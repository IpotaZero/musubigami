const xs="modulepreload",Fs=function(e,t){return new URL(e,t).href},$r={},Cs=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){let l=function(u){return Promise.all(u.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};const o=document.getElementsByTagName("link"),s=document.querySelector("meta[property=csp-nonce]"),c=s?.nonce||s?.getAttribute("nonce");i=l(n.map(u=>{if(u=Fs(u,r),u in $r)return;$r[u]=!0;const h=u.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(r)for(let m=o.length-1;m>=0;m--){const v=o[m];if(v.href===u&&(!h||v.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${p}`))return;const f=document.createElement("link");if(f.rel=h?"stylesheet":xs,h||(f.as="script"),f.crossOrigin="",f.href=u,c&&f.setAttribute("nonce",c),document.head.appendChild(f),h)return new Promise((m,v)=>{f.addEventListener("load",m),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(o){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o}return i.then(o=>{for(const s of o||[])s.status==="rejected"&&a(s.reason);return t().catch(a)})};class ks{static container;static init(){this.container=document.getElementById("container"),this.#e()}static#e(){if(!this.container)throw new Error("Container element not found")}}class Oa{static#e="musubigami";static#i(){return{stageDataList:Array.from({length:18},()=>({cleared:!1})),flags:[],bgmVolume:9,seVolume:9}}static#n(){const t=localStorage.getItem(this.#e);return t?JSON.parse(t):this.#i()}static#t(t){localStorage.setItem(this.#e,JSON.stringify(t))}static getStageData(){return this.#n().stageDataList}static setStageData(t,n){const r=this.#n();r.stageDataList[t]=n,this.#t(r)}static getFlags(){return this.#n().flags}static addFlag(t){const n=this.#n();n.flags.includes(t)||(n.flags.push(t),this.#t(n))}static getBGMVolume(){return this.#n().bgmVolume}static getSEVolume(){return this.#n().seVolume}static setBGMVolume(t){const n=this.#n();n.bgmVolume=t,this.#t(n)}static setSEVolume(t){const n=this.#n();n.seVolume=t,this.#t(n)}static clear(){localStorage.removeItem(this.#e)}static allWin(){for(let t=0;t<18;t++)this.setStageData(t,{cleared:!0})}}window.LocalStorage=Oa;class Ce{static async fadeOut(t,n=200){t.style.transition="opacity 0s",t.style.pointerEvents="none",await Ce.frame(()=>{t.style.opacity="1"}),await Ce.frame(()=>{t.style.transition=`opacity ${n}ms`,t.style.opacity="0"}),await Ce.sleep(n)}static async fadeIn(t,n=200){t.style.transition="opacity 0s",t.style.pointerEvents="none",await Ce.frame(()=>{t.style.opacity="0"}),await Ce.frame(()=>{t.style.transition=`opacity ${n}ms`,t.style.opacity="1"}),await Ce.sleep(n),await Ce.frame(()=>{t.style.pointerEvents=""})}static async valeOut(t,n=200){const r=document.createElement("div");r.classList.add("vale"),r.style.transition=`left ${n}ms cubic-bezier(0.37, 0, 0.63, 1)`,document.body.appendChild(r),await Ce.frame(),await Ce.frame(()=>{r.style.left="0"}),await Ce.sleep(n)}static async valeIn(t,n=200){const r=document.querySelector(".vale");r&&(r.style.transition=`left ${n}ms cubic-bezier(0.12, 0, 0.39, 0)`,await Ce.frame(()=>{r.style.left="calc(100dvw + 4em)"}),await Ce.sleep(n),document.body.removeChild(r))}static sleep(t){return new Promise(n=>{setTimeout(n,t)})}static ok(){const t=new AbortController;return new Promise(n=>{document.addEventListener("click",()=>{t.abort(),n()},{signal:t.signal}),document.addEventListener("keydown",r=>{["KeyZ","Enter","Space"].includes(r.code)&&(t.abort(),n())},{signal:t.signal})})}static key(){const t=new AbortController;return new Promise(n=>{document.addEventListener("click",()=>{t.abort(),n()},{signal:t.signal}),document.addEventListener("keydown",r=>{t.abort(),n()},{signal:t.signal})})}static frame(t=()=>{}){return new Promise(n=>requestAnimationFrame(()=>{t(),n()}))}}class Is{static#e;static init(t){return this.#e=t,this.#e.ready}static async goto(t,{showLoading:n=this.#i,hideLoading:r=this.#n,fadeOut:i=Ce.fadeOut,fadeIn:a=Ce.fadeIn,msIn:o=500,msOut:s=500}={}){const c=document.getElementById("container");await i(c,o),await this.#e.end();let l=!1,u=!1;Ce.sleep(1e3).then(()=>{l||(n(),u=!0)}),this.#e=t(),await this.#e.ready,l=!0,u&&r(),await a(c,s)}static#i(){const t=document.createElement("p");t.textContent="Loading...",t.classList.add("loading"),document.body.appendChild(t)}static#n(){document.querySelectorAll(".loading").forEach(t=>t.remove())}}class ws extends HTMLElement{connectedCallback(){const n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("viewBox","0 0 400 300"),this.appendChild(n),this.#e(n)}getConnectedVertices(t){const n=[];this.querySelectorAll(`.path[data-from="${t}"]`).forEach(i=>{n.push(Number(i.dataset.to))}),this.querySelectorAll(`.path[data-to="${t}"]`).forEach(i=>{n.push(Number(i.dataset.from))});const r=Array.from(this.querySelectorAll(".stage"));return n.map(i=>r[i])}#e(t){const n=this.getAttribute("src");n&&fetch(n).then(r=>r.json()).then(r=>{this.#i(t,r.vertices,r.edges)})}#i(t,n,r){const i="http://www.w3.org/2000/svg";for(;t.firstChild;)t.removeChild(t.firstChild);r.forEach(a=>{const o=document.createElementNS(i,"line"),[s,c]=n[a[0]],[l,u]=n[a[1]];o.setAttribute("x1",s.toString()),o.setAttribute("y1",c.toString()),o.setAttribute("x2",l.toString()),o.setAttribute("y2",u.toString()),o.classList.add("path","hidden"),o.dataset.from=`${a[0]}`,o.dataset.to=`${a[1]}`,t.appendChild(o)}),n.forEach(([a,o],s)=>{const c=document.createElementNS(i,"rect");c.setAttribute("x",(a-16).toString()),c.setAttribute("y",(o-16).toString()),c.setAttribute("width","32"),c.setAttribute("height","32"),c.classList.add("stage","hidden"),t.appendChild(c)})}}customElements.define("x-graph",ws);function _n(e){let t=e.length;for(;--t>=0;)e[t]=0}const Es=3,Ls=258,Ma=29,Ps=256,As=Ps+1+Ma,Ra=30,Ds=512,Ts=new Array((As+2)*2);_n(Ts);const Os=new Array(Ra*2);_n(Os);const Ms=new Array(Ds);_n(Ms);const Rs=new Array(Ls-Es+1);_n(Rs);const Bs=new Array(Ma);_n(Bs);const _s=new Array(Ra);_n(_s);const Ns=(e,t,n,r)=>{let i=e&65535|0,a=e>>>16&65535|0,o=0;for(;n!==0;){o=n>2e3?2e3:n,n-=o;do i=i+t[r++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0};var mr=Ns;const zs=()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=e&1?3988292384^e>>>1:e>>>1;t[n]=e}return t},Us=new Uint32Array(zs()),Gs=(e,t,n,r)=>{const i=Us,a=r+n;e^=-1;for(let o=r;o<a;o++)e=e>>>8^i[(e^t[o])&255];return e^-1};var $e=Gs,gr={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},Ba={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const Vs=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var Hs=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const r in n)Vs(n,r)&&(e[r]=n[r])}}return e},js=e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const n=new Uint8Array(t);for(let r=0,i=0,a=e.length;r<a;r++){let o=e[r];n.set(o,i),i+=o.length}return n},_a={assign:Hs,flattenChunks:js};let Na=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{Na=!1}const rt=new Uint8Array(256);for(let e=0;e<256;e++)rt[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;rt[254]=rt[254]=1;var Ws=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,i,a,o=e.length,s=0;for(i=0;i<o;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),s+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(s),a=0,i=0;a<s;i++)n=e.charCodeAt(i),(n&64512)===55296&&i+1<o&&(r=e.charCodeAt(i+1),(r&64512)===56320&&(n=65536+(n-55296<<10)+(r-56320),i++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|n&63):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|n&63):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|n&63);return t};const Xs=(e,t)=>{if(t<65534&&e.subarray&&Na)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n};var qs=(e,t)=>{const n=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let r,i;const a=new Array(n*2);for(i=0,r=0;r<n;){let o=e[r++];if(o<128){a[i++]=o;continue}let s=rt[o];if(s>4){a[i++]=65533,r+=s-1;continue}for(o&=s===2?31:s===3?15:7;s>1&&r<n;)o=o<<6|e[r++]&63,s--;if(s>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return Xs(a,i)},$s=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(e[n]&192)===128;)n--;return n<0||n===0?t:n+rt[e[n]]>t?n:t},br={string2buf:Ws,buf2string:qs,utf8border:$s};function Zs(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Ys=Zs;const ft=16209,Ks=16191;var Js=function(t,n){let r,i,a,o,s,c,l,u,h,p,f,m,v,x,b,y,S,g,F,w,C,k,O,A;const M=t.state;r=t.next_in,O=t.input,i=r+(t.avail_in-5),a=t.next_out,A=t.output,o=a-(n-t.avail_out),s=a+(t.avail_out-257),c=M.dmax,l=M.wsize,u=M.whave,h=M.wnext,p=M.window,f=M.hold,m=M.bits,v=M.lencode,x=M.distcode,b=(1<<M.lenbits)-1,y=(1<<M.distbits)-1;e:do{m<15&&(f+=O[r++]<<m,m+=8,f+=O[r++]<<m,m+=8),S=v[f&b];n:for(;;){if(g=S>>>24,f>>>=g,m-=g,g=S>>>16&255,g===0)A[a++]=S&65535;else if(g&16){F=S&65535,g&=15,g&&(m<g&&(f+=O[r++]<<m,m+=8),F+=f&(1<<g)-1,f>>>=g,m-=g),m<15&&(f+=O[r++]<<m,m+=8,f+=O[r++]<<m,m+=8),S=x[f&y];t:for(;;){if(g=S>>>24,f>>>=g,m-=g,g=S>>>16&255,g&16){if(w=S&65535,g&=15,m<g&&(f+=O[r++]<<m,m+=8,m<g&&(f+=O[r++]<<m,m+=8)),w+=f&(1<<g)-1,w>c){t.msg="invalid distance too far back",M.mode=ft;break e}if(f>>>=g,m-=g,g=a-o,w>g){if(g=w-g,g>u&&M.sane){t.msg="invalid distance too far back",M.mode=ft;break e}if(C=0,k=p,h===0){if(C+=l-g,g<F){F-=g;do A[a++]=p[C++];while(--g);C=a-w,k=A}}else if(h<g){if(C+=l+h-g,g-=h,g<F){F-=g;do A[a++]=p[C++];while(--g);if(C=0,h<F){g=h,F-=g;do A[a++]=p[C++];while(--g);C=a-w,k=A}}}else if(C+=h-g,g<F){F-=g;do A[a++]=p[C++];while(--g);C=a-w,k=A}for(;F>2;)A[a++]=k[C++],A[a++]=k[C++],A[a++]=k[C++],F-=3;F&&(A[a++]=k[C++],F>1&&(A[a++]=k[C++]))}else{C=a-w;do A[a++]=A[C++],A[a++]=A[C++],A[a++]=A[C++],F-=3;while(F>2);F&&(A[a++]=A[C++],F>1&&(A[a++]=A[C++]))}}else if((g&64)===0){S=x[(S&65535)+(f&(1<<g)-1)];continue t}else{t.msg="invalid distance code",M.mode=ft;break e}break}}else if((g&64)===0){S=v[(S&65535)+(f&(1<<g)-1)];continue n}else if(g&32){M.mode=Ks;break e}else{t.msg="invalid literal/length code",M.mode=ft;break e}break}}while(r<i&&a<s);F=m>>3,r-=F,m-=F<<3,f&=(1<<m)-1,t.next_in=r,t.next_out=a,t.avail_in=r<i?5+(i-r):5-(r-i),t.avail_out=a<s?257+(s-a):257-(a-s),M.hold=f,M.bits=m};const Fn=15,Zr=852,Yr=592,Kr=0,$t=1,Jr=2,Qs=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),el=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),nl=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),tl=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),rl=(e,t,n,r,i,a,o,s)=>{const c=s.bits;let l=0,u=0,h=0,p=0,f=0,m=0,v=0,x=0,b=0,y=0,S,g,F,w,C,k=null,O;const A=new Uint16Array(Fn+1),M=new Uint16Array(Fn+1);let j=null,U,W,q;for(l=0;l<=Fn;l++)A[l]=0;for(u=0;u<r;u++)A[t[n+u]]++;for(f=c,p=Fn;p>=1&&A[p]===0;p--);if(f>p&&(f=p),p===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,s.bits=1,0;for(h=1;h<p&&A[h]===0;h++);for(f<h&&(f=h),x=1,l=1;l<=Fn;l++)if(x<<=1,x-=A[l],x<0)return-1;if(x>0&&(e===Kr||p!==1))return-1;for(M[1]=0,l=1;l<Fn;l++)M[l+1]=M[l]+A[l];for(u=0;u<r;u++)t[n+u]!==0&&(o[M[t[n+u]]++]=u);if(e===Kr?(k=j=o,O=20):e===$t?(k=Qs,j=el,O=257):(k=nl,j=tl,O=0),y=0,u=0,l=h,C=a,m=f,v=0,F=-1,b=1<<f,w=b-1,e===$t&&b>Zr||e===Jr&&b>Yr)return 1;for(;;){U=l-v,o[u]+1<O?(W=0,q=o[u]):o[u]>=O?(W=j[o[u]-O],q=k[o[u]-O]):(W=96,q=0),S=1<<l-v,g=1<<m,h=g;do g-=S,i[C+(y>>v)+g]=U<<24|W<<16|q|0;while(g!==0);for(S=1<<l-1;y&S;)S>>=1;if(S!==0?(y&=S-1,y+=S):y=0,u++,--A[l]===0){if(l===p)break;l=t[n+o[u]]}if(l>f&&(y&w)!==F){for(v===0&&(v=f),C+=h,m=l-v,x=1<<m;m+v<p&&(x-=A[m+v],!(x<=0));)m++,x<<=1;if(b+=1<<m,e===$t&&b>Zr||e===Jr&&b>Yr)return 1;F=y&w,i[F]=f<<24|m<<16|C-a|0}}return y!==0&&(i[C+y]=l-v<<24|64<<16|0),s.bits=f,0};var Yn=rl;const il=0,za=1,Ua=2,{Z_FINISH:Qr,Z_BLOCK:al,Z_TREES:dt,Z_OK:yn,Z_STREAM_END:ol,Z_NEED_DICT:sl,Z_STREAM_ERROR:Ue,Z_DATA_ERROR:Ga,Z_MEM_ERROR:Va,Z_BUF_ERROR:ll,Z_DEFLATED:ei}=Ba,Vt=16180,ni=16181,ti=16182,ri=16183,ii=16184,ai=16185,oi=16186,si=16187,li=16188,ci=16189,_t=16190,Je=16191,Zt=16192,ui=16193,Yt=16194,fi=16195,di=16196,hi=16197,pi=16198,ht=16199,pt=16200,vi=16201,mi=16202,gi=16203,bi=16204,yi=16205,Kt=16206,Si=16207,xi=16208,de=16209,Ha=16210,ja=16211,cl=852,ul=592,fl=15,dl=fl,Fi=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function hl(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const xn=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Vt||t.mode>ja?1:0},Wa=e=>{if(xn(e))return Ue;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Vt,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(cl),t.distcode=t.distdyn=new Int32Array(ul),t.sane=1,t.back=-1,yn},Xa=e=>{if(xn(e))return Ue;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Wa(e)},qa=(e,t)=>{let n;if(xn(e))return Ue;const r=e.state;return t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Ue:(r.window!==null&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,Xa(e))},$a=(e,t)=>{if(!e)return Ue;const n=new hl;e.state=n,n.strm=e,n.window=null,n.mode=Vt;const r=qa(e,t);return r!==yn&&(e.state=null),r},pl=e=>$a(e,dl);let Ci=!0,Jt,Qt;const vl=e=>{if(Ci){Jt=new Int32Array(512),Qt=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Yn(za,e.lens,0,288,Jt,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Yn(Ua,e.lens,0,32,Qt,0,e.work,{bits:5}),Ci=!1}e.lencode=Jt,e.lenbits=9,e.distcode=Qt,e.distbits=5},Za=(e,t,n,r)=>{let i;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(t.subarray(n-r,n-r+i),a.wnext),r-=i,r?(a.window.set(t.subarray(n-r,n),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},ml=(e,t)=>{let n,r,i,a,o,s,c,l,u,h,p,f,m,v,x=0,b,y,S,g,F,w,C,k;const O=new Uint8Array(4);let A,M;const j=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(xn(e)||!e.output||!e.input&&e.avail_in!==0)return Ue;n=e.state,n.mode===Je&&(n.mode=Zt),o=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,l=n.hold,u=n.bits,h=s,p=c,k=yn;e:for(;;)switch(n.mode){case Vt:if(n.wrap===0){n.mode=Zt;break}for(;u<16;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if(n.wrap&2&&l===35615){n.wbits===0&&(n.wbits=15),n.check=0,O[0]=l&255,O[1]=l>>>8&255,n.check=$e(n.check,O,2,0),l=0,u=0,n.mode=ni;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((l&255)<<8)+(l>>8))%31){e.msg="incorrect header check",n.mode=de;break}if((l&15)!==ei){e.msg="unknown compression method",n.mode=de;break}if(l>>>=4,u-=4,C=(l&15)+8,n.wbits===0&&(n.wbits=C),C>15||C>n.wbits){e.msg="invalid window size",n.mode=de;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=l&512?ci:Je,l=0,u=0;break;case ni:for(;u<16;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if(n.flags=l,(n.flags&255)!==ei){e.msg="unknown compression method",n.mode=de;break}if(n.flags&57344){e.msg="unknown header flags set",n.mode=de;break}n.head&&(n.head.text=l>>8&1),n.flags&512&&n.wrap&4&&(O[0]=l&255,O[1]=l>>>8&255,n.check=$e(n.check,O,2,0)),l=0,u=0,n.mode=ti;case ti:for(;u<32;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}n.head&&(n.head.time=l),n.flags&512&&n.wrap&4&&(O[0]=l&255,O[1]=l>>>8&255,O[2]=l>>>16&255,O[3]=l>>>24&255,n.check=$e(n.check,O,4,0)),l=0,u=0,n.mode=ri;case ri:for(;u<16;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}n.head&&(n.head.xflags=l&255,n.head.os=l>>8),n.flags&512&&n.wrap&4&&(O[0]=l&255,O[1]=l>>>8&255,n.check=$e(n.check,O,2,0)),l=0,u=0,n.mode=ii;case ii:if(n.flags&1024){for(;u<16;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}n.length=l,n.head&&(n.head.extra_len=l),n.flags&512&&n.wrap&4&&(O[0]=l&255,O[1]=l>>>8&255,n.check=$e(n.check,O,2,0)),l=0,u=0}else n.head&&(n.head.extra=null);n.mode=ai;case ai:if(n.flags&1024&&(f=n.length,f>s&&(f=s),f&&(n.head&&(C=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(a,a+f),C)),n.flags&512&&n.wrap&4&&(n.check=$e(n.check,r,f,a)),s-=f,a+=f,n.length-=f),n.length))break e;n.length=0,n.mode=oi;case oi:if(n.flags&2048){if(s===0)break e;f=0;do C=r[a+f++],n.head&&C&&n.length<65536&&(n.head.name+=String.fromCharCode(C));while(C&&f<s);if(n.flags&512&&n.wrap&4&&(n.check=$e(n.check,r,f,a)),s-=f,a+=f,C)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=si;case si:if(n.flags&4096){if(s===0)break e;f=0;do C=r[a+f++],n.head&&C&&n.length<65536&&(n.head.comment+=String.fromCharCode(C));while(C&&f<s);if(n.flags&512&&n.wrap&4&&(n.check=$e(n.check,r,f,a)),s-=f,a+=f,C)break e}else n.head&&(n.head.comment=null);n.mode=li;case li:if(n.flags&512){for(;u<16;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if(n.wrap&4&&l!==(n.check&65535)){e.msg="header crc mismatch",n.mode=de;break}l=0,u=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Je;break;case ci:for(;u<32;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}e.adler=n.check=Fi(l),l=0,u=0,n.mode=_t;case _t:if(n.havedict===0)return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,n.hold=l,n.bits=u,sl;e.adler=n.check=1,n.mode=Je;case Je:if(t===al||t===dt)break e;case Zt:if(n.last){l>>>=u&7,u-=u&7,n.mode=Kt;break}for(;u<3;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}switch(n.last=l&1,l>>>=1,u-=1,l&3){case 0:n.mode=ui;break;case 1:if(vl(n),n.mode=ht,t===dt){l>>>=2,u-=2;break e}break;case 2:n.mode=di;break;case 3:e.msg="invalid block type",n.mode=de}l>>>=2,u-=2;break;case ui:for(l>>>=u&7,u-=u&7;u<32;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if((l&65535)!==(l>>>16^65535)){e.msg="invalid stored block lengths",n.mode=de;break}if(n.length=l&65535,l=0,u=0,n.mode=Yt,t===dt)break e;case Yt:n.mode=fi;case fi:if(f=n.length,f){if(f>s&&(f=s),f>c&&(f=c),f===0)break e;i.set(r.subarray(a,a+f),o),s-=f,a+=f,c-=f,o+=f,n.length-=f;break}n.mode=Je;break;case di:for(;u<14;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if(n.nlen=(l&31)+257,l>>>=5,u-=5,n.ndist=(l&31)+1,l>>>=5,u-=5,n.ncode=(l&15)+4,l>>>=4,u-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=de;break}n.have=0,n.mode=hi;case hi:for(;n.have<n.ncode;){for(;u<3;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}n.lens[j[n.have++]]=l&7,l>>>=3,u-=3}for(;n.have<19;)n.lens[j[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,A={bits:n.lenbits},k=Yn(il,n.lens,0,19,n.lencode,0,n.work,A),n.lenbits=A.bits,k){e.msg="invalid code lengths set",n.mode=de;break}n.have=0,n.mode=pi;case pi:for(;n.have<n.nlen+n.ndist;){for(;x=n.lencode[l&(1<<n.lenbits)-1],b=x>>>24,y=x>>>16&255,S=x&65535,!(b<=u);){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if(S<16)l>>>=b,u-=b,n.lens[n.have++]=S;else{if(S===16){for(M=b+2;u<M;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if(l>>>=b,u-=b,n.have===0){e.msg="invalid bit length repeat",n.mode=de;break}C=n.lens[n.have-1],f=3+(l&3),l>>>=2,u-=2}else if(S===17){for(M=b+3;u<M;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}l>>>=b,u-=b,C=0,f=3+(l&7),l>>>=3,u-=3}else{for(M=b+7;u<M;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}l>>>=b,u-=b,C=0,f=11+(l&127),l>>>=7,u-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=de;break}for(;f--;)n.lens[n.have++]=C}}if(n.mode===de)break;if(n.lens[256]===0){e.msg="invalid code -- missing end-of-block",n.mode=de;break}if(n.lenbits=9,A={bits:n.lenbits},k=Yn(za,n.lens,0,n.nlen,n.lencode,0,n.work,A),n.lenbits=A.bits,k){e.msg="invalid literal/lengths set",n.mode=de;break}if(n.distbits=6,n.distcode=n.distdyn,A={bits:n.distbits},k=Yn(Ua,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,A),n.distbits=A.bits,k){e.msg="invalid distances set",n.mode=de;break}if(n.mode=ht,t===dt)break e;case ht:n.mode=pt;case pt:if(s>=6&&c>=258){e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,n.hold=l,n.bits=u,Js(e,p),o=e.next_out,i=e.output,c=e.avail_out,a=e.next_in,r=e.input,s=e.avail_in,l=n.hold,u=n.bits,n.mode===Je&&(n.back=-1);break}for(n.back=0;x=n.lencode[l&(1<<n.lenbits)-1],b=x>>>24,y=x>>>16&255,S=x&65535,!(b<=u);){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if(y&&(y&240)===0){for(g=b,F=y,w=S;x=n.lencode[w+((l&(1<<g+F)-1)>>g)],b=x>>>24,y=x>>>16&255,S=x&65535,!(g+b<=u);){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}l>>>=g,u-=g,n.back+=g}if(l>>>=b,u-=b,n.back+=b,n.length=S,y===0){n.mode=yi;break}if(y&32){n.back=-1,n.mode=Je;break}if(y&64){e.msg="invalid literal/length code",n.mode=de;break}n.extra=y&15,n.mode=vi;case vi:if(n.extra){for(M=n.extra;u<M;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}n.length+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=mi;case mi:for(;x=n.distcode[l&(1<<n.distbits)-1],b=x>>>24,y=x>>>16&255,S=x&65535,!(b<=u);){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if((y&240)===0){for(g=b,F=y,w=S;x=n.distcode[w+((l&(1<<g+F)-1)>>g)],b=x>>>24,y=x>>>16&255,S=x&65535,!(g+b<=u);){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}l>>>=g,u-=g,n.back+=g}if(l>>>=b,u-=b,n.back+=b,y&64){e.msg="invalid distance code",n.mode=de;break}n.offset=S,n.extra=y&15,n.mode=gi;case gi:if(n.extra){for(M=n.extra;u<M;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}n.offset+=l&(1<<n.extra)-1,l>>>=n.extra,u-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=de;break}n.mode=bi;case bi:if(c===0)break e;if(f=p-c,n.offset>f){if(f=n.offset-f,f>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=de;break}f>n.wnext?(f-=n.wnext,m=n.wsize-f):m=n.wnext-f,f>n.length&&(f=n.length),v=n.window}else v=i,m=o-n.offset,f=n.length;f>c&&(f=c),c-=f,n.length-=f;do i[o++]=v[m++];while(--f);n.length===0&&(n.mode=pt);break;case yi:if(c===0)break e;i[o++]=n.length,c--,n.mode=pt;break;case Kt:if(n.wrap){for(;u<32;){if(s===0)break e;s--,l|=r[a++]<<u,u+=8}if(p-=c,e.total_out+=p,n.total+=p,n.wrap&4&&p&&(e.adler=n.check=n.flags?$e(n.check,i,p,o-p):mr(n.check,i,p,o-p)),p=c,n.wrap&4&&(n.flags?l:Fi(l))!==n.check){e.msg="incorrect data check",n.mode=de;break}l=0,u=0}n.mode=Si;case Si:if(n.wrap&&n.flags){for(;u<32;){if(s===0)break e;s--,l+=r[a++]<<u,u+=8}if(n.wrap&4&&l!==(n.total&4294967295)){e.msg="incorrect length check",n.mode=de;break}l=0,u=0}n.mode=xi;case xi:k=ol;break e;case de:k=Ga;break e;case Ha:return Va;case ja:default:return Ue}return e.next_out=o,e.avail_out=c,e.next_in=a,e.avail_in=s,n.hold=l,n.bits=u,(n.wsize||p!==e.avail_out&&n.mode<de&&(n.mode<Kt||t!==Qr))&&Za(e,e.output,e.next_out,p-e.avail_out),h-=e.avail_in,p-=e.avail_out,e.total_in+=h,e.total_out+=p,n.total+=p,n.wrap&4&&p&&(e.adler=n.check=n.flags?$e(n.check,i,p,e.next_out-p):mr(n.check,i,p,e.next_out-p)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Je?128:0)+(n.mode===ht||n.mode===Yt?256:0),(h===0&&p===0||t===Qr)&&k===yn&&(k=ll),k},gl=e=>{if(xn(e))return Ue;let t=e.state;return t.window&&(t.window=null),e.state=null,yn},bl=(e,t)=>{if(xn(e))return Ue;const n=e.state;return(n.wrap&2)===0?Ue:(n.head=t,t.done=!1,yn)},yl=(e,t)=>{const n=t.length;let r,i,a;return xn(e)||(r=e.state,r.wrap!==0&&r.mode!==_t)?Ue:r.mode===_t&&(i=1,i=mr(i,t,n,0),i!==r.check)?Ga:(a=Za(e,t,n,n),a?(r.mode=Ha,Va):(r.havedict=1,yn))};var Sl=Xa,xl=qa,Fl=Wa,Cl=pl,kl=$a,Il=ml,wl=gl,El=bl,Ll=yl,Pl="pako inflate (from Nodeca project)",nn={inflateReset:Sl,inflateReset2:xl,inflateResetKeep:Fl,inflateInit:Cl,inflateInit2:kl,inflate:Il,inflateEnd:wl,inflateGetHeader:El,inflateSetDictionary:Ll,inflateInfo:Pl};function Al(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Dl=Al;const Ya=Object.prototype.toString,{Z_NO_FLUSH:Tl,Z_FINISH:Ol,Z_OK:it,Z_STREAM_END:er,Z_NEED_DICT:nr,Z_STREAM_ERROR:Ml,Z_DATA_ERROR:ki,Z_MEM_ERROR:Rl}=Ba;function Ht(e){this.options=_a.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ys,this.strm.avail_out=0;let n=nn.inflateInit2(this.strm,t.windowBits);if(n!==it)throw new Error(gr[n]);if(this.header=new Dl,nn.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=br.string2buf(t.dictionary):Ya.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=nn.inflateSetDictionary(this.strm,t.dictionary),n!==it)))throw new Error(gr[n])}Ht.prototype.push=function(e,t){const n=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?Ol:Tl,Ya.call(e)==="[object ArrayBuffer]"?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=nn.inflate(n,o),a===nr&&i&&(a=nn.inflateSetDictionary(n,i),a===it?a=nn.inflate(n,o):a===ki&&(a=nr));n.avail_in>0&&a===er&&n.state.wrap>0&&e[n.next_in]!==0;)nn.inflateReset(n),a=nn.inflate(n,o);switch(a){case Ml:case ki:case nr:case Rl:return this.onEnd(a),this.ended=!0,!1}if(s=n.avail_out,n.next_out&&(n.avail_out===0||a===er))if(this.options.to==="string"){let c=br.utf8border(n.output,n.next_out),l=n.next_out-c,u=br.buf2string(n.output,c);n.next_out=l,n.avail_out=r-l,l&&n.output.set(n.output.subarray(c,c+l),0),this.onData(u)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===it&&s===0)){if(a===er)return a=nn.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};Ht.prototype.onData=function(e){this.chunks.push(e)};Ht.prototype.onEnd=function(e){e===it&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=_a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Bl(e,t){const n=new Ht(t);if(n.push(e),n.err)throw n.msg||gr[n.err];return n.result}var _l=Bl,Nl={inflate:_l};const{inflate:zl}=Nl;var Ul=zl,Kn=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),vt=4017,mt=799,gt=3406,bt=2276,yt=1567,St=3784,Cn=5793,xt=2896,Gl=100,Ii=64*1024*1024,yr=0;function Dn(e){var t=yr+e;if(t>Ii){var n=Math.ceil((t-Ii)/1024/1024);throw new Error("Max memory limit exceeded by at least ".concat(n,"MB"))}yr=t}function Vl(e,t){for(var n=16;n>0&&!e[n-1];)n--;for(var r=[{children:[],index:0}],i=0,a=r[0],o=0;o<n;o++){for(var s=0;s<e[o];s++){for(a=r.pop(),a.children[a.index]=t[i];a.index>0;){if(r.length===0)throw new Error("Could not recreate Huffman Table");a=r.pop()}for(a.index++,r.push(a);r.length<=o;){var c={children:[],index:0};r.push(c),a.children[a.index]=c.children,a=c}i++}if(o+1<n){var c={children:[],index:0};r.push(c),a.children[a.index]=c.children,a=c}}return r[0].children}function Hl(e,t,n,r,i,a,o,s,c){var l=n.mcusPerLine,u=n.progressive,h=t,p=0,f=0;function m(){if(f>0)return f--,p>>f&1;if(p=e[t++],p==255){var J=e[t++];if(J)throw new Error("unexpected marker: ".concat((p<<8|J).toString(16)))}return f=7,p>>>7}function v(J){for(var Z=J;;){if(Z=Z[m()],typeof Z=="number")return Z;if(Z===void 0)throw new Error("invalid huffman sequence")}}function x(J){for(var Z=0;J>0;)Z=Z<<1|m(),J--;return Z}function b(J){var Z=x(J);return Z>=1<<J-1?Z:Z+(-1<<J)+1}function y(J,Z){var ue=v(J.huffmanTableDC),pe=ue===0?0:b(ue);Z[0]=J.pred+=pe;for(var fe=1;fe<64;){var ge=v(J.huffmanTableAC),we=ge&15,Le=ge>>4;if(we===0){if(Le<15)break;fe+=16;continue}fe+=Le;var Ke=Kn[fe];Z[Ke]=b(we),fe++}}function S(J,Z){var ue=v(J.huffmanTableDC),pe=ue===0?0:b(ue)<<c;Z[0]=J.pred+=pe}function g(J,Z){Z[0]|=m()<<c}var F=0;function w(J,Z){if(F>0){F--;return}for(var ue=a,pe=o;ue<=pe;){var fe=v(J.huffmanTableAC),ge=fe&15,we=fe>>4;if(ge===0){if(we<15){F=x(we)+(1<<we)-1;break}ue+=16;continue}ue+=we;var Le=Kn[ue];Z[Le]=b(ge)*(1<<c),ue++}}var C=0,k=0;function O(J,Z){for(var ue=a,pe=o,fe=0;ue<=pe;){var ge=Kn[ue],we=Z[ge]<0?-1:1;switch(C){case 0:var Le=v(J.huffmanTableAC),Ke=Le&15;if(fe=Le>>4,Ke===0)fe<15?(F=x(fe)+(1<<fe),C=4):(fe=16,C=1);else{if(Ke!==1)throw new Error("invalid ACn encoding");k=b(Ke),C=fe?2:3}continue;case 1:case 2:Z[ge]?Z[ge]+=(m()<<c)*we:(fe--,fe===0&&(C=C==2?3:0));break;case 3:Z[ge]?Z[ge]+=(m()<<c)*we:(Z[ge]=k<<c,C=0);break;case 4:Z[ge]&&(Z[ge]+=(m()<<c)*we);break}ue++}C===4&&(F--,F===0&&(C=0))}function A(J,Z,ue,pe,fe){var ge=ue/l|0,we=ue%l,Le=ge*J.v+pe,Ke=we*J.h+fe;J.blocks[Le]!==void 0&&Z(J,J.blocks[Le][Ke])}function M(J,Z,ue){var pe=ue/J.blocksPerLine|0,fe=ue%J.blocksPerLine;J.blocks[pe]!==void 0&&Z(J,J.blocks[pe][fe])}var j=r.length,U,W;u?a===0?W=s===0?S:g:W=s===0?w:O:W=y;var q=0,V;j==1?V=r[0].blocksPerLine*r[0].blocksPerColumn:V=l*n.mcusPerColumn,i||(i=V);for(var X,le,he;q<V;){for(var $=0;$<j;$++)r[$].pred=0;if(F=0,j==1){U=r[0];for(var me=0;me<i;me++)M(U,W,q),q++}else for(var me=0;me<i;me++){for(var $=0;$<j;$++){U=r[$],X=U.h,le=U.v;for(var Ge=0;Ge<le;Ge++)for(var cn=0;cn<X;cn++)A(U,W,q,Ge,cn)}if(q++,q===V)break}if(q===V)do{if(e[t]===255&&e[t+1]!==0)break;t+=1}while(t<e.length-2);if(f=0,he=e[t]<<8|e[t+1],he<65280)throw new Error("marker was not found");if(he>=65488&&he<=65495)t+=2;else break}return t-h}function jl(e){var t=[],n=e.blocksPerLine,r=e.blocksPerColumn,i=n<<3,a=new Int32Array(64),o=new Uint8Array(64);function s(x,b,y){for(var S=e.quantizationTable,g=y,F=0;F<64;F++)g[F]=x[F]*S[F];for(var F=0;F<8;++F){var w=8*F;if(g[1+w]==0&&g[2+w]==0&&g[3+w]==0&&g[4+w]==0&&g[5+w]==0&&g[6+w]==0&&g[7+w]==0){var C=Cn*g[0+w]+512>>10;g[0+w]=C,g[1+w]=C,g[2+w]=C,g[3+w]=C,g[4+w]=C,g[5+w]=C,g[6+w]=C,g[7+w]=C;continue}var k=Cn*g[0+w]+128>>8,O=Cn*g[4+w]+128>>8,A=g[2+w],M=g[6+w],j=xt*(g[1+w]-g[7+w])+128>>8,U=xt*(g[1+w]+g[7+w])+128>>8,W=g[3+w]<<4,q=g[5+w]<<4,V=k-O+1>>1;k=k+O+1>>1,O=V,V=A*St+M*yt+128>>8,A=A*yt-M*St+128>>8,M=V,V=j-q+1>>1,j=j+q+1>>1,q=V,V=U+W+1>>1,W=U-W+1>>1,U=V,V=k-M+1>>1,k=k+M+1>>1,M=V,V=O-A+1>>1,O=O+A+1>>1,A=V,V=j*bt+U*gt+2048>>12,j=j*gt-U*bt+2048>>12,U=V,V=W*mt+q*vt+2048>>12,W=W*vt-q*mt+2048>>12,q=V,g[0+w]=k+U,g[7+w]=k-U,g[1+w]=O+q,g[6+w]=O-q,g[2+w]=A+W,g[5+w]=A-W,g[3+w]=M+j,g[4+w]=M-j}for(var F=0;F<8;++F){var X=F;if(g[8+X]==0&&g[16+X]==0&&g[24+X]==0&&g[32+X]==0&&g[40+X]==0&&g[48+X]==0&&g[56+X]==0){var le=Cn*y[F+0]+8192>>14;g[0+X]=le,g[8+X]=le,g[16+X]=le,g[24+X]=le,g[32+X]=le,g[40+X]=le,g[48+X]=le,g[56+X]=le;continue}var k=Cn*g[0+X]+2048>>12,O=Cn*g[32+X]+2048>>12,A=g[16+X],M=g[48+X],j=xt*(g[8+X]-g[56+X])+2048>>12,U=xt*(g[8+X]+g[56+X])+2048>>12,W=g[24+X],q=g[40+X],V=k-O+1>>1;k=k+O+1>>1,O=V,V=A*St+M*yt+2048>>12,A=A*yt-M*St+2048>>12,M=V,V=j-q+1>>1,j=j+q+1>>1,q=V,V=U+W+1>>1,W=U-W+1>>1,U=V,V=k-M+1>>1,k=k+M+1>>1,M=V,V=O-A+1>>1,O=O+A+1>>1,A=V,V=j*bt+U*gt+2048>>12,j=j*gt-U*bt+2048>>12,U=V,V=W*mt+q*vt+2048>>12,W=W*vt-q*mt+2048>>12,q=V,g[0+X]=k+U,g[56+X]=k-U,g[8+X]=O+q,g[48+X]=O-q,g[16+X]=A+W,g[40+X]=A-W,g[24+X]=M+j,g[32+X]=M-j}for(var F=0;F<64;++F){var he=128+(g[F]+8>>4);b[F]=he<0?0:he>255?255:he}}Dn(i*r*8);for(var c=0;c<r;c++){for(var l=c<<3,u=0;u<8;u++)t.push(new Uint8Array(i));for(var h=0;h<n;h++){s(e.blocks[c][h],o,a);for(var p=0,f=h<<3,m=0;m<8;m++)for(var v=t[l+m],u=0;u<8;u++)v[f+u]=o[p++]}}return t}function tn(e){return e<0?0:e>255?255:e}function Wl(e){var t={width:0,height:0,comments:[],adobe:void 0,components:[],exifBuffer:void 0,jfif:void 0},n=Gl*1e3*1e3,r=0;function i(){var be=e[r]<<8|e[r+1];return r+=2,be}function a(){var be=i(),un=e.subarray(r,r+be-2);return r+=un.length,un}function o(be){var un=0,zn=0;for(var Un in be.components)if(be.components.hasOwnProperty(Un)){var Be=be.components[Un];un<Be.h&&(un=Be.h),zn<Be.v&&(zn=Be.v)}var Ur=Math.ceil(be.samplesPerLine/8/un),Gr=Math.ceil(be.scanLines/8/zn);for(var Un in be.components)if(be.components.hasOwnProperty(Un)){var Be=be.components[Un],bs=Math.ceil(Math.ceil(be.samplesPerLine/8)*Be.h/un),ys=Math.ceil(Math.ceil(be.scanLines/8)*Be.v/zn),Vr=Ur*Be.h,Hr=Gr*Be.v,Ss=Hr*Vr,jr=[];Dn(Ss*256);for(var Wr=0;Wr<Hr;Wr++){for(var Xr=[],qr=0;qr<Vr;qr++)Xr.push(new Int32Array(64));jr.push(Xr)}Be.blocksPerLine=bs,Be.blocksPerColumn=ys,Be.blocks=jr}be.maxH=un,be.maxV=zn,be.mcusPerLine=Ur,be.mcusPerColumn=Gr}var s=null,c=null,l=void 0,u=0,h=[],p=[],f=[],m=[],v=i(),x=-1;if(v!=65496)throw new Error("SOI not found");for(v=i();v!=65497;){switch(v){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{var b=a();if(v===65534){for(var y="",S=0;S<b.byteLength;S++)y+=String.fromCharCode(b[S]);t.comments.push(y)}v===65504&&b[0]===74&&b[1]===70&&b[2]===73&&b[3]===70&&b[4]===0&&(s={version:{major:b[5],minor:b[6]},densityUnits:b[7],xDensity:b[8]<<8|b[9],yDensity:b[10]<<8|b[11],thumbWidth:b[12],thumbHeight:b[13],thumbData:b.subarray(14,14+3*b[12]*b[13])}),v===65505&&b[0]===69&&b[1]===120&&b[2]===105&&b[3]===102&&b[4]===0&&(t.exifBuffer=b.subarray(5,b.length)),v===65518&&b[0]===65&&b[1]===100&&b[2]===111&&b[3]===98&&b[4]===101&&b[5]===0&&(c={version:b[6],flags0:b[7]<<8|b[8],flags1:b[9]<<8|b[10],transformCode:b[11]});break}case 65499:{for(var g=i(),F=g+r-2;r<F;){var w=e[r++];Dn(256);var C=new Int32Array(64);if(w>>4===0)for(var k=0;k<64;k++){var O=Kn[k];C[O]=e[r++]}else if(w>>4===1)for(var k=0;k<64;k++){var O=Kn[k];C[O]=i()}else throw new Error("DQT: invalid table spec");h[w&15]=C}break}case 65472:case 65473:case 65474:{i(),l={extended:v===65473,progressive:v===65474,precision:e[r++],scanLines:i(),samplesPerLine:i(),components:{},componentsOrder:[],maxH:0,maxV:0,mcusPerLine:0,mcusPerColumn:0};var A=l.scanLines*l.samplesPerLine;if(A>n){var M=Math.ceil((A-n)/1e6);throw new Error("maxResolutionInMP limit exceeded by ".concat(M,"MP"))}for(var j=e[r++],U=0;U<j;U++){var W=e[r],q=e[r+1]>>4,V=e[r+1]&15,X=e[r+2];l.componentsOrder.push(W),l.components[W]={h:q,v:V,quantizationIdx:X,blocksPerColumn:0,blocksPerLine:0,blocks:[],pred:0},r+=3}o(l),p.push(l);break}case 65476:{for(var le=i(),U=2;U<le;){for(var he=e[r++],$=new Uint8Array(16),me=0,k=0;k<16;k++,r++)me+=$[k]=e[r];Dn(16+me);for(var Ge=new Uint8Array(me),k=0;k<me;k++,r++)Ge[k]=e[r];U+=17+me;var cn=he&15,J=he>>4===0?m:f;J[cn]=Vl($,Ge)}break}case 65501:i(),u=i();break;case 65500:i(),i();break;case 65498:{i();for(var Z=e[r++],ue=[],U=0;U<Z;U++){var pe=l.components[e[r++]],fe=e[r++];pe.huffmanTableDC=m[fe>>4],pe.huffmanTableAC=f[fe&15],ue.push(pe)}var ge=e[r++],we=e[r++],Le=e[r++],Ke=Hl(e,r,l,ue,u,ge,we,Le>>4,Le&15);r+=Ke;break}case 65535:e[r]!==255&&r--;break;default:{if(e[r-3]==255&&e[r-2]>=192&&e[r-2]<=254){r-=3;break}else if(v===224||v==225){if(x!==-1)throw new Error("first unknown JPEG marker at offset ".concat(x.toString(16),", second unknown JPEG marker ").concat(v.toString(16)," at offset ").concat((r-1).toString(16)));x=r-1;var zr=i();if(e[r+zr-2]===255){r+=zr-2;break}}throw new Error("unknown JPEG marker "+v.toString(16))}}v=i()}if(p.length!=1)throw new Error("only single frame JPEGs supported");for(var U=0;U<p.length;U++){var ut=p[U].components;for(var k in ut)ut[k].quantizationTable=h[ut[k].quantizationIdx],delete ut[k].quantizationIdx}t.width=l.samplesPerLine,t.height=l.scanLines,t.jfif=s,t.adobe=c,t.components=[];for(var U=0;U<l.componentsOrder.length;U++){var pe=l.components[l.componentsOrder[U]];t.components.push({lines:jl(pe),scaleX:pe.h/l.maxH,scaleY:pe.v/l.maxV})}return t}function Xl(e){var t=0,n=!1,r=e.width,i=e.height,a=r*i*e.components.length;Dn(a);var o=new Uint8Array(a);switch(e.components.length){case 1:{for(var s=e.components[0],c=0;c<i;c++)for(var l=s.lines[0|c*s.scaleY],u=0;u<r;u++){var h=l[0|u*s.scaleX];o[t++]=h}break}case 2:{for(var s=e.components[0],p=e.components[1],c=0;c<i;c++)for(var l=s.lines[0|c*s.scaleY],f=p.lines[0|c*p.scaleY],u=0;u<r;u++){var m=l[0|u*s.scaleX];o[t++]=m;var v=f[0|u*p.scaleX];o[t++]=v}break}case 3:{n=!0,e.adobe&&e.adobe.transformCode&&(n=!0);for(var s=e.components[0],p=e.components[1],x=e.components[2],c=0;c<i;c++)for(var l=s.lines[0|c*s.scaleY],f=p.lines[0|c*p.scaleY],b=x.lines[0|c*x.scaleY],u=0;u<r;u++){var h=void 0,y=void 0,S=void 0,g=void 0,F=void 0,w=void 0;n?(h=l[0|u*s.scaleX],y=f[0|u*p.scaleX],S=b[0|u*x.scaleX],g=tn(h+1.402*(S-128)),F=tn(h-.3441363*(y-128)-.71413636*(S-128)),w=tn(h+1.772*(y-128))):(g=l[0|u*s.scaleX],F=f[0|u*p.scaleX],w=b[0|u*x.scaleX]),o[t++]=g,o[t++]=F,o[t++]=w}break}case 4:{if(!e.adobe)throw new Error("Unsupported color mode (4 components)");n=!1,e.adobe&&e.adobe.transformCode&&(n=!0);for(var s=e.components[0],p=e.components[1],x=e.components[2],C=e.components[3],c=0;c<i;c++)for(var l=s.lines[0|c*s.scaleY],f=p.lines[0|c*p.scaleY],b=x.lines[0|c*x.scaleY],k=C.lines[0|c*C.scaleY],u=0;u<r;u++){var h=void 0,y=void 0,S=void 0,O=void 0,A=void 0,M=void 0,j=void 0;n?(h=l[0|u*s.scaleX],y=f[0|u*p.scaleX],S=b[0|u*x.scaleX],O=k[0|u*C.scaleX],A=255-tn(h+1.402*(S-128)),M=255-tn(h-.3441363*(y-128)-.71413636*(S-128)),j=255-tn(h+1.772*(y-128))):(A=l[0|u*s.scaleX],M=f[0|u*p.scaleX],j=b[0|u*x.scaleX],O=k[0|u*C.scaleX]),o[t++]=255-A,o[t++]=255-M,o[t++]=255-j,o[t++]=255-O}break}default:throw new Error("Unsupported color mode")}return o}function ql(e,t){if(yr=0,e.length===0)throw new Error("Empty jpeg buffer");var n=Wl(e);Dn(n.width*n.height*4);var r=Xl(n),i=t(n.width,n.height),a=i.width,o=i.height,s=i.data,c=0,l=0;switch(n.components.length){case 1:for(var u=0;u<o;u++)for(var h=0;h<a;h++){var p=r[c++];s[l++]=p,s[l++]=p,s[l++]=p,s[l++]=255}break;case 3:for(var u=0;u<o;u++)for(var h=0;h<a;h++){var f=r[c++],m=r[c++],v=r[c++];s[l++]=f,s[l++]=m,s[l++]=v,s[l++]=255}break;case 4:for(var u=0;u<o;u++)for(var h=0;h<a;h++){var x=r[c++],b=r[c++],p=r[c++],y=r[c++],f=255-tn(x*(1-y/255)+y),m=255-tn(b*(1-y/255)+y),v=255-tn(p*(1-y/255)+y);s[l++]=f,s[l++]=m,s[l++]=v,s[l++]=255}break;default:throw new Error("Unsupported color mode")}return i}var Ka={},Mn={pass:"pass through",norm:"normal",diss:"dissolve",dark:"darken","mul ":"multiply",idiv:"color burn",lbrn:"linear burn",dkCl:"darker color",lite:"lighten",scrn:"screen","div ":"color dodge",lddg:"linear dodge",lgCl:"lighter color",over:"overlay",sLit:"soft light",hLit:"hard light",vLit:"vivid light",lLit:"linear light",pLit:"pin light",hMix:"hard mix",diff:"difference",smud:"exclusion",fsub:"subtract",fdiv:"divide","hue ":"hue","sat ":"saturation",colr:"color","lum ":"luminosity"};Object.keys(Mn).forEach(function(e){return Ka[Mn[e]]=e});var wi=["none","red","orange","yellow","green","blue","violet","gray"],$l=["LMsk","Lr16","Lr32","Layr","Mt16","Mt32","Mtrn","Alph","FMsk","lnk2","FEid","FXid","PxSD","cinf"];function Zl(e){var t={};return Object.keys(e).forEach(function(n){return t[e[n]]=n}),t}function z(e,t,n){var r=Zl(n),i=function(o){var s=o.split(".")[1];if(s&&!r[s])throw new Error("Unrecognized value for enum: '".concat(o,"'"));return r[s]||t},a=function(o){if(o&&!n[o])throw new Error("Invalid value for enum: '".concat(o,"'"));return"".concat(e,".").concat(n[o]||n[t])};return{decode:i,encode:a}}var Ei;(function(e){e[e.RGB=0]="RGB",e[e.HSB=1]="HSB",e[e.CMYK=2]="CMYK",e[e.Lab=7]="Lab",e[e.Grayscale=8]="Grayscale"})(Ei||(Ei={}));var Li;(function(e){e[e.PositionRelativeToLayer=1]="PositionRelativeToLayer",e[e.LayerMaskDisabled=2]="LayerMaskDisabled",e[e.InvertLayerMaskWhenBlending=4]="InvertLayerMaskWhenBlending",e[e.LayerMaskFromRenderingOtherData=8]="LayerMaskFromRenderingOtherData",e[e.MaskHasParametersAppliedToIt=16]="MaskHasParametersAppliedToIt"})(Li||(Li={}));var Pi;(function(e){e[e.UserMaskDensity=1]="UserMaskDensity",e[e.UserMaskFeather=2]="UserMaskFeather",e[e.VectorMaskDensity=4]="VectorMaskDensity",e[e.VectorMaskFeather=8]="VectorMaskFeather"})(Pi||(Pi={}));var Ai;(function(e){e[e.Color0=0]="Color0",e[e.Color1=1]="Color1",e[e.Color2=2]="Color2",e[e.Color3=3]="Color3",e[e.Transparency=-1]="Transparency",e[e.UserMask=-2]="UserMask",e[e.RealUserMask=-3]="RealUserMask"})(Ai||(Ai={}));var Di;(function(e){e[e.RawData=0]="RawData",e[e.RleCompressed=1]="RleCompressed",e[e.ZipWithoutPrediction=2]="ZipWithoutPrediction",e[e.ZipWithPrediction=3]="ZipWithPrediction"})(Di||(Di={}));function Yl(e,t){switch(e){case 0:return 0;case 1:return 1;case 2:return 2;case 3:return t?3:e+1;case-1:return t?4:3;default:return e+1}}function Ja(e,t,n){return e<t?t:e>n?n:e}function Sr(e){for(var t=e.data,n=t instanceof Float32Array?1:t instanceof Uint16Array?65535:255,r=0,i=t.length|0;r<i;r=r+4|0)t[r+0]=0,t[r+1]=0,t[r+2]=0,t[r+3]=n}function xr(e){var t=jt(e.width,e.height),n;if(e.data instanceof Uint8ClampedArray)n=e;else{n=Pr(e.width,e.height);var r=e.data,i=n.data;if(r instanceof Float32Array)for(var a=0,o=r.length;a<o;a+=4)i[a+0]=Math.round(Math.pow(r[a+0],1/2.2)*255),i[a+1]=Math.round(Math.pow(r[a+1],1/2.2)*255),i[a+2]=Math.round(Math.pow(r[a+2],1/2.2)*255),i[a+3]=Math.round(r[a+3]*255);else for(var s=r instanceof Uint16Array?8:0,a=0,o=r.length;a<o;a++)i[a]=r[a]>>>s}return t.getContext("2d").putImageData(n,0,0),t}function Kl(e,t,n,r){if(!(e instanceof Uint8Array||e instanceof Uint8ClampedArray))throw new Error("Invalid bit depth");for(var i=0,a=0,o=0;i<r;i++)for(var s=0;s<n;)for(var c=e[o++],l=0;l<8&&s<n;l++,s++,a+=4){var u=c&128?0:255;c=c<<1,t[a+0]=u,t[a+1]=u,t[a+2]=u,t[a+3]=255}}function Jl(e){var t=jt(100,100);try{var n=t.getContext("2d"),r=ql(e,function(i,a){return n.createImageData(i,a)});t.width=r.width,t.height=r.height,n.putImageData(r,0,0)}catch(i){console.error("JPEG decompression error",i.message)}return t}var jt=function(){throw new Error("Canvas not initialized, use initializeCanvas method to set up createCanvas method")},tr=void 0,Pr=function(e,t){return tr||(tr=jt(1,1)),tr.getContext("2d").createImageData(e,t)};typeof document<"u"&&(jt=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n});var Gn={},Ti;function Ql(){if(Ti)return Gn;Ti=1,Gn.byteLength=s,Gn.toByteArray=l,Gn.fromByteArray=p;for(var e=[],t=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,a=r.length;i<a;++i)e[i]=r[i],t[r.charCodeAt(i)]=i;t[45]=62,t[95]=63;function o(f){var m=f.length;if(m%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var v=f.indexOf("=");v===-1&&(v=m);var x=v===m?0:4-v%4;return[v,x]}function s(f){var m=o(f),v=m[0],x=m[1];return(v+x)*3/4-x}function c(f,m,v){return(m+v)*3/4-v}function l(f){var m,v=o(f),x=v[0],b=v[1],y=new n(c(f,x,b)),S=0,g=b>0?x-4:x,F;for(F=0;F<g;F+=4)m=t[f.charCodeAt(F)]<<18|t[f.charCodeAt(F+1)]<<12|t[f.charCodeAt(F+2)]<<6|t[f.charCodeAt(F+3)],y[S++]=m>>16&255,y[S++]=m>>8&255,y[S++]=m&255;return b===2&&(m=t[f.charCodeAt(F)]<<2|t[f.charCodeAt(F+1)]>>4,y[S++]=m&255),b===1&&(m=t[f.charCodeAt(F)]<<10|t[f.charCodeAt(F+1)]<<4|t[f.charCodeAt(F+2)]>>2,y[S++]=m>>8&255,y[S++]=m&255),y}function u(f){return e[f>>18&63]+e[f>>12&63]+e[f>>6&63]+e[f&63]}function h(f,m,v){for(var x,b=[],y=m;y<v;y+=3)x=(f[y]<<16&16711680)+(f[y+1]<<8&65280)+(f[y+2]&255),b.push(u(x));return b.join("")}function p(f){for(var m,v=f.length,x=v%3,b=[],y=16383,S=0,g=v-x;S<g;S+=y)b.push(h(f,S,S+y>g?g:S+y));return x===1?(m=f[v-1],b.push(e[m>>2]+e[m<<4&63]+"==")):x===2&&(m=(f[v-2]<<8)+f[v-1],b.push(e[m>>10]+e[m>>4&63]+e[m<<2&63]+"=")),b.join("")}return Gn}var Fr=Ql();function Cr(e){return(e&4294967168)===0?1:(e&4294965248)===0?2:(e&4294901760)===0?3:4}function ec(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r>=55296&&r<=56319){if(n+1<e.length){var i=e.charCodeAt(n+1);(i&64512)===56320&&(n++,t+=Cr(((r&1023)<<10)+(i&1023)+65536))}}else t+=Cr(r)}return t}function Oi(e,t,n){var r=Cr(n);switch(r){case 1:e[t]=n;break;case 2:e[t]=n>>6&31|192,e[t+1]=n&63|128;break;case 3:e[t]=n>>12&15|224,e[t+1]=n>>6&63|128,e[t+2]=n&63|128;break;default:e[t]=n>>18&7|240,e[t+1]=n>>12&63|128,e[t+2]=n>>6&63|128,e[t+3]=n&63|128;break}return r}function nc(e,t,n){for(var r=0;r<n.length;r++){var i=n.charCodeAt(r);if(i>=55296&&i<=56319){if(r+1<n.length){var a=n.charCodeAt(r+1);if((a&64512)===56320){r++;var o=((i&1023)<<10)+(a&1023)+65536;t+=Oi(e,t,o)}}}else t+=Oi(e,t,i)}return t}function Qa(e){if(e.length>1e3&&typeof TextEncoder<"u")return new TextEncoder().encode(e);var t=new Uint8Array(ec(e));return nc(t,0,e),t}function kn(e,t){if(t>=e.length)throw Error("Invalid byte index");var n=e[t];if((n&192)===128)return n&63;throw Error("Invalid continuation byte")}function eo(e){if(e.byteLength>1e3&&typeof TextDecoder<"u")return new TextDecoder().decode(e);for(var t=[],n=0;n<e.length;){var r=e[n++],i=void 0;if((r&128)===0)i=r;else if((r&224)===192){var a=kn(e,n++);if(i=(r&31)<<6|a,i<128)throw Error("Invalid continuation byte")}else if((r&240)===224){var a=kn(e,n++),o=kn(e,n++);if(i=(r&15)<<12|a<<6|o,i<2048)throw Error("Invalid continuation byte");if(i>=55296&&i<=57343)throw Error("Lone surrogate U+".concat(i.toString(16).toUpperCase()," is not a scalar value"))}else if((r&248)===240){var a=kn(e,n++),o=kn(e,n++),s=kn(e,n++);if(i=(r&15)<<18|a<<12|o<<6|s,i<65536||i>1114111)throw Error("Invalid continuation byte")}else throw Error("Invalid UTF-8 detected");i>65535&&(i-=65536,t.push(String.fromCharCode(i>>>10&1023|55296)),i=56320|i&1023),t.push(String.fromCharCode(i))}return t.join("")}var rn=function(){return rn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},rn.apply(this,arguments)},tc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function rc(e){var t={};return Object.keys(e).forEach(function(n){return t[e[n]]=n}),t}var qn={"#Ang":"Angle","#Rsl":"Density","#Rlt":"Distance","#Nne":"None","#Prc":"Percent","#Pxl":"Pixels","#Mlm":"Millimeters","#Pnt":"Points",RrPi:"Picas",RrIn:"Inches",RrCm:"Centimeters"},Ft=rc(qn);function P(e,t){return{name:e,classID:t}}var ee=P("","null"),no={strokeStyleContent:P("","solidColorLayer"),printProofSetup:P("Proof Setup","proofSetup"),Grad:P("Gradient","Grdn"),Trnf:P("Transform","Trnf"),patternFill:P("","patternFill"),ebbl:P("","ebbl"),SoFi:P("","SoFi"),GrFl:P("","GrFl"),sdwC:P("","RGBC"),hglC:P("","RGBC"),"Clr ":P("","RGBC"),tintColor:P("","RGBC"),Ofst:P("","Pnt "),ChFX:P("","ChFX"),MpgS:P("","ShpC"),DrSh:P("","DrSh"),IrSh:P("","IrSh"),OrGl:P("","OrGl"),IrGl:P("","IrGl"),TrnS:P("","ShpC"),Ptrn:P("","Ptrn"),FrFX:P("","FrFX"),phase:P("","Pnt "),frameStep:ee,duration:ee,workInTime:ee,workOutTime:ee,audioClipGroupList:ee,bounds:P("","Rctn"),customEnvelopeWarp:P("","customEnvelopeWarp"),warp:P("","warp"),"Sz  ":P("","Pnt "),origin:P("","Pnt "),autoExpandOffset:P("","Pnt "),keyOriginShapeBBox:P("","unitRect"),Vrsn:ee,psVersion:ee,docDefaultNewArtboardBackgroundColor:P("","RGBC"),artboardRect:P("","classFloatRect"),keyOriginRRectRadii:P("","radii"),keyOriginBoxCorners:ee,rectangleCornerA:P("","Pnt "),rectangleCornerB:P("","Pnt "),rectangleCornerC:P("","Pnt "),rectangleCornerD:P("","Pnt "),compInfo:ee,quiltWarp:P("","quiltWarp"),generatorSettings:ee,crema:ee,FrIn:ee,blendOptions:ee,FXRf:ee,Lefx:ee,time:ee,animKey:ee,timeScope:ee,inTime:ee,outTime:ee,sheetStyle:ee,translation:ee,Skew:ee,boundingBox:P("","boundingBox"),"Lnk ":P("","ExternalFileLink"),frameReader:P("","FrameReader"),effectParams:P("","motionTrackEffectParams"),Impr:P("None","none"),Anch:P("","Pnt "),"Fwd ":P("","Pnt "),"Bwd ":P("","Pnt "),FlrC:P("","Pnt "),meshBoundaryPath:P("","pathClass"),filterFX:P("","filterFXStyle"),Fltr:P("","rigidTransform"),FrgC:P("","RGBC"),BckC:P("","RGBC"),sdwM:P("Parameters","adaptCorrectTones"),hglM:P("Parameters","adaptCorrectTones"),customShape:P("","customShape"),origFXRefPoint:ee,FXRefPoint:ee,ClMg:P("","ClMg")},to={"Crv ":P("","CrPt"),Clrs:P("","Clrt"),Trns:P("","TrnS"),keyDescriptorList:ee,solidFillMulti:P("","SoFi"),gradientFillMulti:P("","GrFl"),dropShadowMulti:P("","DrSh"),innerShadowMulti:P("","IrSh"),frameFXMulti:P("","FrFX"),FrIn:ee,FSts:ee,LaSt:ee,sheetTimelineOptions:ee,trackList:P("","animationTrack"),globalTrackList:P("","animationTrack"),keyList:ee,audioClipGroupList:ee,audioClipList:ee,countObjectList:P("","countObject"),countGroupList:P("","countGroup"),slices:P("","slice"),"Pts ":P("","Pthp"),SbpL:P("","SbpL"),pathComponents:P("","PaCm"),filterFXList:P("","filterFX"),puppetShapeList:P("","puppetShape"),channelDenoise:P("","channelDenoiseParams"),ShrP:P("","Pnt "),layerSettings:ee,list:ee,Adjs:P("","CrvA")},Mi={TEXT:["Txt ","printerName","Nm  ","Idnt","blackAndWhitePresetFileName","LUT3DFileName","presetFileName","curvesPresetFileName","mixerPresetFileName","placed","description","reason","artboardPresetName","json","clipID","relPath","fullPath","mediaDescriptor","Msge","altTag","url","cellText","preset","KnNm","FPth","comment","originalPath"],tdta:["EngineData","LUT3DFileData","indexArray","originalVertexArray","deformedVertexArray","LqMe"],long:["TextIndex","RndS","Mdpn","Smth","Lctn","strokeStyleVersion","LaID","Vrsn","Cnt ","Brgh","Cntr","means","vibrance","Strt","bwPresetKind","comp","compID","originalCompID","curvesPresetKind","mixerPresetKind","uOrder","vOrder","PgNm","totalPages","Crop","numerator","denominator","frameCount","Annt","keyOriginType","unitValueQuadVersion","keyOriginIndex","major","minor","fix","docDefaultNewArtboardBackgroundType","artboardBackgroundType","numModifyingFX","deformNumRows","deformNumCols","FrID","FrDl","FsID","LCnt","AFrm","AFSt","numBefore","numAfter","Spcn","minOpacity","maxOpacity","BlnM","sheetID","gblA","globalAltitude","descVersion","frameReaderType","LyrI","zoomOrigin","fontSize","Rds ","sliceID","topOutset","leftOutset","bottomOutset","rightOutset","filterID","meshQuality","meshExpansion","meshRigidity","VrsM","VrsN","NmbG","WLMn","WLMx","AmMn","AmMx","SclH","SclV","Lvl ","TlNm","TlOf","FlRs","Thsh","ShrS","ShrE","FlRs","Vrnc","Strg","ExtS","ExtD","HrzS","VrtS","NmbR","EdgF","Ang1","Ang2","Ang3","Ang4","lastAppliedComp","capturedInfo"],enum:["textGridding","Ornt","warpStyle","warpRotate","Inte","Bltn","ClrS","BlrQ","bvlT","bvlS","bvlD","Md  ","glwS","GrdF","GlwT","RplS","BlrM","SmBM","strokeStyleLineCapType","strokeStyleLineJoinType","strokeStyleLineAlignment","strokeStyleBlendMode","PntT","Styl","lookupType","LUTFormat","dataOrder","tableOrder","enableCompCore","enableCompCoreGPU","compCoreSupport","compCoreGPUSupport","Engn","enableCompCoreThreads","gs99","FrDs","trackID","animInterpStyle","horzAlign","vertAlign","bgColorType","shapeOperation","UndA","Wvtp","Drct","WndM","Edg ","FlCl","IntE","IntC","Cnvr","Fl  ","Dstr","MztT","Lns ","ExtT","DspM","ExtR","ZZTy","SphM","SmBQ","placedLayerOCIOConversion","gradientsInterpolationMethod"],bool:["PstS","printSixteenBit","masterFXSwitch","enab","uglg","antialiasGloss","useShape","useTexture","uglg","antialiasGloss","useShape","Vsbl","useTexture","Algn","Rvrs","Dthr","Invr","VctC","ShTr","layerConceals","strokeEnabled","fillEnabled","strokeStyleScaleLock","strokeStyleStrokeAdjust","hardProof","MpBl","paperWhite","useLegacy","Auto","Lab ","useTint","keyShapeInvalidated","autoExpandEnabled","autoNestEnabled","autoPositionEnabled","shrinkwrapOnSaveEnabled","present","showInDialog","overprint","sheetDisclosed","lightsDisclosed","meshesDisclosed","materialsDisclosed","hasMotion","muted","Effc","selected","autoScope","fillCanvas","cellTextIsHTML","Smoo","Clsp","validAtPosition","rigidType","hasoptions","filterMaskEnable","filterMaskLinked","filterMaskExtendWithWhite","removeJPEGArtifact","Mnch","ExtF","ExtM","moreAccurate","GpuY","LIWy","Cnty"],doub:["warpValue","warpPerspective","warpPerspectiveOther","Intr","Wdth","Hght","strokeStyleMiterLimit","strokeStyleResolution","layerTime","keyOriginResolution","xx","xy","yx","yy","tx","ty","FrGA","frameRate","audioLevel","rotation","X   ","Y   ","redFloat","greenFloat","blueFloat","imageResolution","PuX0","PuX1","PuX2","PuX3","PuY0","PuY1","PuY2","PuY3"],UntF:["sdwO","hglO","lagl","Lald","srgR","blur","Sftn","Opct","Dstn","Angl","Ckmt","Nose","Inpr","ShdN","strokeStyleLineWidth","strokeStyleLineDashOffset","strokeStyleOpacity","H   ","Top ","Left","Btom","Rght","Rslt","topRight","topLeft","bottomLeft","bottomRight","ClNs","Shrp"],VlLs:["Crv ","Clrs","Mnm ","Mxm ","Trns","pathList","strokeStyleLineDashSet","FrLs","slices","LaSt","Trnf","nonAffineTransform","keyDescriptorList","guideIndeces","gradientFillMulti","solidFillMulti","frameFXMulti","innerShadowMulti","dropShadowMulti","FrIn","FSts","FsFr","sheetTimelineOptions","audioClipList","trackList","globalTrackList","keyList","audioClipList","warpValues","selectedPin","Pts ","SbpL","pathComponents","pinOffsets","posFinalPins","pinVertexIndices","PinP","PnRt","PnOv","PnDp","filterFXList","puppetShapeList","ShrP","channelDenoise","Mtrx","layerSettings","list","compList","Adjs"],ObAr:["meshPoints","quiltSliceX","quiltSliceY"],"obj ":["null","Chnl"],"Pth ":["DspF"]},ic=["Rd  ","Grn ","Bl  ","Yllw","Ylw ","Cyn ","Mgnt","Blck","Gry ","Lmnc","A   ","B   "],ro={"Mnm ":"long","Mxm ":"long",FrLs:"long",strokeStyleLineDashSet:"UntF",Trnf:"doub",nonAffineTransform:"doub",keyDescriptorList:"Objc",gradientFillMulti:"Objc",solidFillMulti:"Objc",frameFXMulti:"Objc",innerShadowMulti:"Objc",dropShadowMulti:"Objc",LaSt:"Objc",FrIn:"Objc",FSts:"Objc",FsFr:"long",blendOptions:"Objc",sheetTimelineOptions:"Objc",keyList:"Objc",warpValues:"doub",selectedPin:"long","Pts ":"Objc",SbpL:"Objc",pathComponents:"Objc",pinOffsets:"doub",posFinalPins:"doub",pinVertexIndices:"long",PinP:"doub",PnRt:"long",PnOv:"bool",PnDp:"doub",filterFXList:"Objc",puppetShapeList:"Objc",ShrP:"Objc",channelDenoise:"Objc",Mtrx:"long",compList:"long",Chnl:"enum"},Nt={};for(var rr=0,Ri=Object.keys(Mi);rr<Ri.length;rr++)for(var Bi=Ri[rr],ir=0,_i=Mi[Bi];ir<_i.length;ir++){var Rn=_i[ir];Nt[Rn]=Bi}for(var ar=0,Ni=Object.keys(no);ar<Ni.length;ar++){var Rn=Ni[ar];Nt[Rn]||(Nt[Rn]="Objc")}for(var or=0,zi=Object.keys(to);or<zi.length;or++){var Rn=zi[or];ro[Rn]="Objc"}function ac(e,t,n,r){return e==="presetKind"?typeof t=="string"?"enum":"long":e==="null"&&n==="slices"?"TEXT":e==="groupID"?n==="slices"?"long":"TEXT":e==="Sz  "?"Wdth"in t?"Objc":"units"in t?"UntF":"doub":e==="Type"?typeof t=="string"?"enum":"long":e==="AntA"?typeof t=="string"?"enum":"bool":(e==="Hrzn"||e==="Vrtc")&&(r.Type==="keyType.Pstn"||r._classID==="Ofst")?"long":e==="Hrzn"||e==="Vrtc"||e==="Top "||e==="Left"||e==="Btom"||e==="Rght"?n==="slices"?"long":typeof t=="number"?"doub":"UntF":e==="Vrsn"?typeof t=="number"?"long":"Objc":e==="Rd  "||e==="Grn "||e==="Bl  "?n==="artd"?"long":"doub":e==="Trnf"?Array.isArray(t)?"VlLs":"Objc":Nt[e]}function an(e){var t=_(e);return qt(e,t||4)}function on(e,t){if(t.length===4&&t!=="warp"&&t!=="time"&&t!=="hold"&&t!=="list")H(e,0),G(e,t);else{H(e,t.length);for(var n=0;n<t.length;n++)B(e,t.charCodeAt(n))}}function io(e,t){for(var n=gn(e),r=t?{_name:n.name,_classID:n.classID}:{},i=L(e),a=0;a<i;a++){var o=an(e),s=se(e),c=oo(e,s,t);r[o]=c}return r}function ao(e,t,n,r,i){Sn(e,t),on(e,n);var a=Object.keys(r),o=a.length;"_name"in r&&o--,"_classID"in r&&o--,D(e,o);for(var s=0,c=a;s<c.length;s++){var l=c[s];if(!(l==="_name"||l==="_classID")){var u=ac(l,r[l],i,r),h=no[l];l==="bounds"&&i==="text"?h=P("","bounds"):l==="origin"?u=i==="slices"?"enum":"Objc":(l==="Cyn "||l==="Mgnt"||l==="Ylw "||l==="Blck")&&r._classID==="CMYC"?u="doub":/^PN[a-z][a-z]$/.test(l)?u="TEXT":/^PT[a-z][a-z]$/.test(l)?u="long":/^PF[a-z][a-z]$/.test(l)||(l==="Rds "||l==="Thsh")&&typeof r[l]=="number"&&r._classID==="SmrB"?u="doub":l==="ClSz"||l==="Rds "||l==="Amnt"?u=typeof r[l]=="number"?"long":"UntF":(l==="sdwM"||l==="hglM")&&typeof r[l]=="string"||l==="blur"&&typeof r[l]=="string"?u="enum":l==="Hght"&&typeof r[l]=="number"&&r._classID==="Embs"||l==="Angl"&&typeof r[l]=="number"&&(r._classID==="Embs"||r._classID==="smartSharpen"||r._classID==="Twrl"||r._classID==="MtnB")?u="long":l==="Angl"&&typeof r[l]=="number"?u="doub":l==="bounds"&&i==="slices"?(u="Objc",h=P("","Rct1")):l==="Scl "?typeof r[l]=="object"&&"Hrzn"in r[l]?(u="Objc",h=ee):typeof r[l]=="number"?u="long":u="UntF":l==="audioClipGroupList"&&a.length===1?u="VlLs":(l==="Strt"||l==="Brgh")&&"H   "in r?u="doub":l==="Wdth"&&typeof r[l]=="object"?u="UntF":l==="Ofst"&&typeof r[l]=="number"?u="long":l==="Strt"&&typeof r[l]=="object"?(u="Objc",h=ee):ic.indexOf(l)!==-1?u=n==="RGBC"&&i!=="artd"?"doub":"long":l==="profile"?u=n==="printOutput"?"TEXT":"tdta":l==="strokeStyleContent"?r[l]["Clr "]?h=P("","solidColorLayer"):r[l].Grad?h=P("","gradientLayer"):r[l].Ptrn&&(h=P("","patternLayer")):l==="bounds"&&i==="quiltWarp"&&(h=P("","classFloatRect")),h&&h.classID==="RGBC"&&"H   "in r[l]&&(h={classID:"HSBC",name:""}),on(e,l),G(e,u||"long"),so(e,u||"long",r[l],l,h,i)}}}function oo(e,t,n){switch(t){case"obj ":return sc(e);case"Objc":case"GlbO":return io(e,n);case"VlLs":{for(var r=_(e),i=[],a=0;a<r;a++){var o=se(e);i.push(oo(e,o,n))}return i}case"doub":return ze(e);case"UntF":{var s=se(e),c=ze(e);if(!qn[s])throw new Error("Invalid units: ".concat(s));return{units:qn[s],value:c}}case"UnFl":{var s=se(e),c=je(e);if(!qn[s])throw new Error("Invalid units: ".concat(s));return{units:qn[s],value:c}}case"TEXT":return Fe(e);case"enum":{var l=an(e),c=an(e);return"".concat(l,".").concat(c)}case"long":return _(e);case"comp":{var u=L(e),h=L(e);return{low:u,high:h}}case"bool":return!!T(e);case"type":case"GlbC":return gn(e);case"alis":{var p=_(e);return qt(e,p)}case"tdta":{var f=_(e);return ke(e,f)}case"ObAr":{_(e),Fe(e),an(e);for(var m=_(e),i=[],a=0;a<m;a++){var v=an(e);se(e),se(e);for(var x=_(e),b=[],y=0;y<x;y++)b.push(ze(e));i.push({type:v,values:b})}return i}case"Pth ":{_(e);var S=se(e);ha(e);var g=ha(e),F=bc(e,g);return{sig:S,path:F}}default:throw new Error("Invalid TySh descriptor OSType: ".concat(t," at ").concat(e.offset.toString(16)))}}var oc={meshPoints:"rationalPoint",quiltSliceX:"UntF",quiltSliceY:"UntF"};function so(e,t,n,r,i,a){switch(t){case"obj ":lc(e,r,n);break;case"Objc":case"GlbO":{if(typeof n!="object")throw new Error("Invalid struct value: ".concat(JSON.stringify(n),", key: ").concat(r));if(!i)throw new Error("Missing ext type for: '".concat(r,"' (").concat(JSON.stringify(n),")"));var o=n._name||i.name,s=n._classID||i.classID;ao(e,o,s,n,a);break}case"VlLs":if(!Array.isArray(n))throw new Error("Invalid list value: ".concat(JSON.stringify(n),", key: ").concat(r));H(e,n.length);for(var c=0;c<n.length;c++){var l=ro[r];G(e,l||"long"),so(e,l||"long",n[c],"".concat(r,"[]"),to[r],a)}break;case"doub":if(typeof n!="number")throw new Error("Invalid number value: ".concat(JSON.stringify(n),", key: ").concat(r));Ye(e,n);break;case"UntF":if(!Ft[n.units])throw new Error("Invalid units: ".concat(n.units," in ").concat(r));G(e,Ft[n.units]),Ye(e,n.value);break;case"UnFl":if(!Ft[n.units])throw new Error("Invalid units: ".concat(n.units," in ").concat(r));G(e,Ft[n.units]),We(e,n.value);break;case"TEXT":Sn(e,n);break;case"enum":{if(typeof n!="string")throw new Error("Invalid enum value: ".concat(JSON.stringify(n),", key: ").concat(r));var u=n.split("."),h=u[0],p=u[1];on(e,h),on(e,p);break}case"long":if(typeof n!="number")throw new Error("Invalid integer value: ".concat(JSON.stringify(n),", key: ").concat(r));H(e,n);break;case"bool":if(typeof n!="boolean")throw new Error("Invalid boolean value: ".concat(JSON.stringify(n),", key: ").concat(r));B(e,n?1:0);break;case"tdta":H(e,n.byteLength),sn(e,n);break;case"ObAr":{H(e,16),Sn(e,"");var f=oc[r];if(!f)throw new Error("Not implemented ObArType for: ".concat(r));on(e,f),H(e,n.length);for(var c=0;c<n.length;c++){on(e,n[c].type),G(e,"UnFl"),G(e,"#Pxl"),H(e,n[c].values.length);for(var m=0;m<n[c].values.length;m++)Ye(e,n[c].values[m])}break}case"Pth ":{var v=12+n.path.length*2;H(e,v),G(e,n.sig),Pa(e,v),Pa(e,n.path.length),iu(e,n.path);break}default:throw new Error("Not implemented descriptor OSType: ".concat(t))}}function sc(e){for(var t=_(e),n=[],r=0;r<t;r++){var i=se(e);switch(i){case"prop":{gn(e);var a=an(e);n.push(a);break}case"Clss":n.push(gn(e));break;case"Enmr":{gn(e);var o=an(e),s=an(e);n.push("".concat(o,".").concat(s));break}case"rele":{gn(e),n.push(L(e));break}case"Idnt":n.push(_(e));break;case"indx":n.push(_(e));break;case"name":{gn(e),n.push(Fe(e));break}default:throw new Error("Invalid descriptor reference type: ".concat(i))}}return n}function lc(e,t,n){H(e,n.length);for(var r=0;r<n.length;r++){var i=n[r],a="unknown";switch(typeof i=="string"&&(/^[a-z ]+\.[a-z ]+$/i.test(i)?a="Enmr":a="name"),G(e,a),a){case"Enmr":{var o=i.split("."),s=o[0],c=o[1];Ui(e,"\0",s),on(e,s),on(e,c);break}case"name":{Ui(e,"\0","Lyr "),Me(e,i+"\0");break}default:throw new Error("Invalid descriptor reference type: ".concat(a))}}return n}function gn(e){var t=Fe(e),n=an(e);return{name:t,classID:n}}function Ui(e,t,n){Me(e,t),on(e,n)}function Y(e,t){t===void 0&&(t=!1);var n=L(e);if(n!==16)throw new Error("Invalid descriptor version: ".concat(n));var r=io(e,t);return r}function K(e,t,n,r,i){i===void 0&&(i=""),D(e,16),ao(e,t,n,r,i)}function Jn(e){return{x:e.Hrzn,y:e.Vrtc}}function Qn(e){return{Hrzn:e.x,Vrtc:e.y}}function Gi(e){return{top:re(e["Top "]),left:re(e.Left),right:re(e.Rght),bottom:re(e.Btom)}}function Vi(e){var t;return t={Left:ce(e.left,"bounds.left")},t["Top "]=ce(e.top,"bounds.top"),t.Rght=ce(e.right,"bounds.right"),t.Btom=ce(e.bottom,"bounds.bottom"),t}function Hi(e){var t={enabled:!!e.enab,position:Xt.decode(e.Styl),fillType:ko.decode(e.PntT),blendMode:Ne.decode(e["Md  "]),opacity:oe(e.Opct),size:re(e["Sz  "])};return e.present!==void 0&&(t.present=e.present),e.showInDialog!==void 0&&(t.showInDialog=e.showInDialog),e.overprint!==void 0&&(t.overprint=e.overprint),e["Clr "]&&(t.color=Xe(e["Clr "])),e.Grad&&(t.gradient=ho(e)),e.Ptrn&&(t.pattern=po(e)),t}function ji(e){var t={};return t.enab=!!e.enabled,e.present!==void 0&&(t.present=!!e.present),e.showInDialog!==void 0&&(t.showInDialog=!!e.showInDialog),t.Styl=Xt.encode(e.position),t.PntT=ko.encode(e.fillType),t["Md  "]=Ne.encode(e.blendMode),t.Opct=Se(e.opacity),t["Sz  "]=ce(e.size,"size"),e.color&&(t["Clr "]=qe(e.color)),e.gradient&&(t=rn(rn({},t),vo(e.gradient))),e.pattern&&(t=rn(rn({},t),mo(e.pattern))),e.overprint!==void 0&&(t.overprint=!!e.overprint),t}function ot(e,t,n){for(var r,i,a,o=n?{"Scl ":_e((r=e.scale)!==null&&r!==void 0?r:1),masterFXSwitch:!e.disabled}:{masterFXSwitch:!e.disabled,"Scl ":_e((i=e.scale)!==null&&i!==void 0?i:1)},s=["dropShadow","innerShadow","solidFill","gradientOverlay","stroke"],c=0,l=s;c<l.length;c++){var u=l[c];if(e[u]&&!Array.isArray(e[u]))throw new Error("".concat(u," should be an array"))}var h=function(S){return!!S&&S.length>1&&n},p=function(S){return!!S&&S.length>=1&&(!n||S.length===1)};if(p(e.dropShadow)&&(o.DrSh=Ae(e.dropShadow[0],"dropShadow",t)),h(e.dropShadow)&&(o.dropShadowMulti=e.dropShadow.map(function(S){return Ae(S,"dropShadow",t)})),p(e.innerShadow)&&(o.IrSh=Ae(e.innerShadow[0],"innerShadow",t)),h(e.innerShadow)&&(o.innerShadowMulti=e.innerShadow.map(function(S){return Ae(S,"innerShadow",t)})),e.outerGlow&&(o.OrGl=Ae(e.outerGlow,"outerGlow",t)),h(e.solidFill)&&(o.solidFillMulti=e.solidFill.map(function(S){return Ae(S,"solidFill",t)})),h(e.gradientOverlay)&&(o.gradientFillMulti=e.gradientOverlay.map(function(S){return Ae(S,"gradientOverlay",t)})),h(e.stroke)&&(o.frameFXMulti=e.stroke.map(function(S){return ji(S)})),e.innerGlow&&(o.IrGl=Ae(e.innerGlow,"innerGlow",t)),e.bevel&&(o.ebbl=Ae(e.bevel,"bevel",t)),p(e.solidFill)&&(o.SoFi=Ae(e.solidFill[0],"solidFill",t)),e.patternOverlay&&(o.patternFill=Ae(e.patternOverlay,"patternOverlay",t)),p(e.gradientOverlay)&&(o.GrFl=Ae(e.gradientOverlay[0],"gradientOverlay",t)),e.satin&&(o.ChFX=Ae(e.satin,"satin",t)),p(e.stroke)&&(o.FrFX=ji((a=e.stroke)===null||a===void 0?void 0:a[0])),n){o.numModifyingFX=0;for(var f=0,m=Object.keys(e);f<m.length;f++){var u=m[f],v=e[u];if(Array.isArray(v))for(var x=0,b=v;x<b.length;x++){var y=b[x];y.enabled&&o.numModifyingFX++}else v.enabled&&o.numModifyingFX++}}return o}function st(e,t){var n={},r=e.masterFXSwitch,i=e.DrSh,a=e.dropShadowMulti,o=e.IrSh,s=e.innerShadowMulti,c=e.OrGl,l=e.IrGl,u=e.ebbl,h=e.SoFi,p=e.solidFillMulti,f=e.patternFill,m=e.GrFl,v=e.gradientFillMulti,x=e.ChFX,b=e.FrFX,y=e.frameFXMulti;e.numModifyingFX;var S=tc(e,["masterFXSwitch","DrSh","dropShadowMulti","IrSh","innerShadowMulti","OrGl","IrGl","ebbl","SoFi","solidFillMulti","patternFill","GrFl","gradientFillMulti","ChFX","FrFX","frameFXMulti","numModifyingFX"]);return r||(n.disabled=!0),e["Scl "]&&(n.scale=oe(e["Scl "])),i&&(n.dropShadow=[Pe(i,t)]),a&&(n.dropShadow=a.map(function(g){return Pe(g,t)})),o&&(n.innerShadow=[Pe(o,t)]),s&&(n.innerShadow=s.map(function(g){return Pe(g,t)})),c&&(n.outerGlow=Pe(c,t)),l&&(n.innerGlow=Pe(l,t)),u&&(n.bevel=Pe(u,t)),h&&(n.solidFill=[Pe(h,t)]),p&&(n.solidFill=p.map(function(g){return Pe(g,t)})),f&&(n.patternOverlay=Pe(f,t)),m&&(n.gradientOverlay=[Pe(m,t)]),v&&(n.gradientOverlay=v.map(function(g){return Pe(g,t)})),x&&(n.satin=Pe(x,t)),b&&(n.stroke=[Hi(b)]),y&&(n.stroke=y.map(function(g){return Hi(g)})),t&&Object.keys(S).length>1&&console.log("Unhandled effect keys:",S),n}function Wi(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=i.time,o=a.denominator,s=a.numerator,c=i.selected,l=i.animKey,u={numerator:s,denominator:o},h=Fo.decode(i.animInterpStyle);switch(l.Type){case"keyType.Opct":n.push({interpolation:h,time:u,selected:c,type:"opacity",value:oe(l.Opct)});break;case"keyType.Pstn":n.push({interpolation:h,time:u,selected:c,type:"position",x:l.Hrzn,y:l.Vrtc});break;case"keyType.Trnf":n.push({interpolation:h,time:u,selected:c,type:"transform",scale:Jn(l["Scl "]),skew:Jn(l.Skew),rotation:l.rotation,translation:Jn(l.translation)});break;case"keyType.sheetStyle":{var p={interpolation:h,time:u,selected:c,type:"style"};l.sheetStyle.Lefx&&(p.style=st(l.sheetStyle.Lefx,t)),n.push(p);break}case"keyType.globalLighting":{n.push({interpolation:h,time:u,selected:c,type:"globalLighting",globalAngle:l.gblA,globalAltitude:l.globalAltitude});break}default:throw new Error("Unsupported keyType value")}}return n}function Xi(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],i=r.time,a=r.selected,o=a===void 0?!1:a,s=r.interpolation,c=Fo.encode(s),l=void 0;switch(r.type){case"opacity":l={Type:"keyType.Opct",Opct:Se(r.value)};break;case"position":l={Type:"keyType.Pstn",Hrzn:r.x,Vrtc:r.y};break;case"transform":l={Type:"keyType.Trnf","Scl ":Qn(r.scale),Skew:Qn(r.skew),rotation:r.rotation,translation:Qn(r.translation)};break;case"style":l={Type:"keyType.sheetStyle",sheetStyle:{Vrsn:1,blendOptions:{}}},r.style&&(l.sheetStyle={Vrsn:1,Lefx:ot(r.style,!1,!1),blendOptions:{}});break;case"globalLighting":{l={Type:"keyType.globalLighting",gblA:r.globalAngle,globalAltitude:r.globalAltitude};break}default:throw new Error("Unsupported keyType value")}t.push({Vrsn:1,animInterpStyle:c,time:i,animKey:l,selected:o})}return t}function lo(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a={type:Co.decode(i.trackID),enabled:i.enab,keys:Wi(i.keyList,t)};i.effectParams&&(a.effectParams={fillCanvas:i.effectParams.fillCanvas,zoomOrigin:i.effectParams.zoomOrigin,keys:Wi(i.effectParams.keyList,t)}),n.push(a)}return n}function co(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(rn(rn({trackID:Co.encode(r.type),Vrsn:1,enab:!!r.enabled,Effc:!!r.effectParams},r.effectParams?{effectParams:{keyList:Xi(r.keys),fillCanvas:r.effectParams.fillCanvas,zoomOrigin:r.effectParams.zoomOrigin}}:{}),{keyList:Xi(r.keys)}))}return t}function Pe(e,t){for(var n={},r=0,i=Object.keys(e);r<i.length;r++){var a=i[r],o=e[a];switch(a){case"enab":n.enabled=!!o;break;case"uglg":n.useGlobalLight=!!o;break;case"AntA":n.antialiased=!!o;break;case"Algn":n.align=!!o;break;case"Dthr":n.dither=!!o;break;case"Invr":n.invert=!!o;break;case"Rvrs":n.reverse=!!o;break;case"Clr ":n.color=Xe(o);break;case"hglC":n.highlightColor=Xe(o);break;case"sdwC":n.shadowColor=Xe(o);break;case"Styl":n.position=Xt.decode(o);break;case"Md  ":n.blendMode=Ne.decode(o);break;case"hglM":n.highlightBlendMode=Ne.decode(o);break;case"sdwM":n.shadowBlendMode=Ne.decode(o);break;case"bvlS":n.style=go.decode(o);break;case"bvlD":n.direction=yo.decode(o);break;case"bvlT":n.technique=bo.decode(o);break;case"GlwT":n.technique=So.decode(o);break;case"glwS":n.source=xo.decode(o);break;case"Type":n.type=Wt.decode(o);break;case"gs99":n.interpolationMethod=Bn.decode(o);break;case"Opct":n.opacity=oe(o);break;case"hglO":n.highlightOpacity=oe(o);break;case"sdwO":n.shadowOpacity=oe(o);break;case"lagl":n.angle=Rt(o);break;case"Angl":n.angle=Rt(o);break;case"Lald":n.altitude=Rt(o);break;case"Sftn":n.soften=re(o);break;case"srgR":n.strength=oe(o);break;case"blur":n.size=re(o);break;case"Nose":n.noise=oe(o);break;case"Inpr":n.range=oe(o);break;case"Ckmt":n.choke=re(o);break;case"ShdN":n.jitter=oe(o);break;case"Dstn":n.distance=re(o);break;case"Scl ":n.scale=oe(o);break;case"Ptrn":n.pattern={name:o["Nm  "],id:o.Idnt};break;case"phase":n.phase={x:o.Hrzn,y:o.Vrtc};break;case"Ofst":n.offset={x:oe(o.Hrzn),y:oe(o.Vrtc)};break;case"MpgS":case"TrnS":n.contour={name:o["Nm  "],curve:o["Crv "].map(function(s){return{x:s.Hrzn,y:s.Vrtc}})};break;case"Grad":n.gradient=uo(o);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":n[a]=o;break;case"_name":case"_classID":break;default:t&&console.log("Invalid effect key: '".concat(a,"', value:"),o)}}return n}function Ae(e,t,n){var r={enab:!1};t==="dropShadow"&&(r.TrnS={"Nm  ":"","Crv ":[]});for(var i=0,a=Object.keys(e);i<a.length;i++){var o=a[i],s=o,c=e[s];switch(s){case"enabled":r.enab=!!c;break;case"useGlobalLight":r.uglg=!!c;break;case"antialiased":r.AntA=!!c;break;case"align":r.Algn=!!c;break;case"dither":r.Dthr=!!c;break;case"invert":r.Invr=!!c;break;case"reverse":r.Rvrs=!!c;break;case"color":r["Clr "]=qe(c);break;case"highlightColor":r.hglC=qe(c);break;case"shadowColor":r.sdwC=qe(c);break;case"position":r.Styl=Xt.encode(c);break;case"blendMode":r["Md  "]=Ne.encode(c);break;case"highlightBlendMode":r.hglM=Ne.encode(c);break;case"shadowBlendMode":r.sdwM=Ne.encode(c);break;case"style":r.bvlS=go.encode(c);break;case"direction":r.bvlD=yo.encode(c);break;case"technique":t==="bevel"?r.bvlT=bo.encode(c):r.GlwT=So.encode(c);break;case"source":r.glwS=xo.encode(c);break;case"type":r.Type=Wt.encode(c);break;case"interpolationMethod":r.gs99=Bn.encode(c);break;case"opacity":r.Opct=Se(c);break;case"highlightOpacity":r.hglO=Se(c);break;case"shadowOpacity":r.sdwO=Se(c);break;case"angle":t==="gradientOverlay"||t==="patternFill"?r.Angl=et(c):r.lagl=et(c);break;case"altitude":r.Lald=et(c);break;case"soften":r.Sftn=ce(c,s);break;case"strength":r.srgR=Se(c);break;case"size":r.blur=ce(c,s);break;case"noise":r.Nose=Se(c);break;case"range":r.Inpr=Se(c);break;case"choke":r.Ckmt=ce(c,s);break;case"jitter":r.ShdN=Se(c);break;case"distance":r.Dstn=ce(c,s);break;case"scale":r["Scl "]=Se(c);break;case"pattern":r.Ptrn={"Nm  ":c.name,Idnt:c.id};break;case"phase":r.phase={Hrzn:c.x,Vrtc:c.y};break;case"offset":r.Ofst={Hrzn:Se(c.x),Vrtc:Se(c.y)};break;case"contour":{r[t==="satin"?"MpgS":"TrnS"]={"Nm  ":c.name,"Crv ":c.curve.map(function(l){return{Hrzn:l.x,Vrtc:l.y}})};break}case"gradient":r.Grad=fo(c);break;case"useTexture":case"useShape":case"layerConceals":case"present":case"showInDialog":case"antialiasGloss":r[s]=c;break;default:n&&console.log("Invalid effect key: '".concat(s,"', value:"),c)}}return r}function uo(e){if(e.GrdF==="GrdF.CstS"){var t=e.Intr||4096;return{type:"solid",name:e["Nm  "],smoothness:e.Intr/4096,colorStops:e.Clrs.map(function(n){return{color:Xe(n["Clr "]),location:n.Lctn/t,midpoint:n.Mdpn/100}}),opacityStops:e.Trns.map(function(n){return{opacity:oe(n.Opct),location:n.Lctn/t,midpoint:n.Mdpn/100}})}}else return{type:"noise",name:e["Nm  "],roughness:e.Smth/4096,colorModel:zt.decode(e.ClrS),randomSeed:e.RndS,restrictColors:!!e.VctC,addTransparency:!!e.ShTr,min:e["Mnm "].map(function(n){return n/100}),max:e["Mxm "].map(function(n){return n/100})}}function fo(e){var t,n;if(e.type==="solid"){var r=Math.round(((t=e.smoothness)!==null&&t!==void 0?t:1)*4096);return{"Nm  ":e.name||"",GrdF:"GrdF.CstS",Intr:r,Clrs:e.colorStops.map(function(i){var a;return{"Clr ":qe(i.color),Type:"Clry.UsrS",Lctn:Math.round(i.location*r),Mdpn:Math.round(((a=i.midpoint)!==null&&a!==void 0?a:.5)*100)}}),Trns:e.opacityStops.map(function(i){var a;return{Opct:Se(i.opacity),Lctn:Math.round(i.location*r),Mdpn:Math.round(((a=i.midpoint)!==null&&a!==void 0?a:.5)*100)}})}}else return{GrdF:"GrdF.ClNs","Nm  ":e.name||"",ShTr:!!e.addTransparency,VctC:!!e.restrictColors,ClrS:zt.encode(e.colorModel),RndS:e.randomSeed||0,Smth:Math.round(((n=e.roughness)!==null&&n!==void 0?n:1)*4096),"Mnm ":(e.min||[0,0,0,0]).map(function(i){return i*100}),"Mxm ":(e.max||[1,1,1,1]).map(function(i){return i*100})}}function ho(e){var t=uo(e.Grad);return t.style=Wt.decode(e.Type),e.Dthr!==void 0&&(t.dither=e.Dthr),e.gradientsInterpolationMethod!==void 0&&(t.interpolationMethod=Bn.decode(e.gradientsInterpolationMethod)),e.Rvrs!==void 0&&(t.reverse=e.Rvrs),e.Angl!==void 0&&(t.angle=Rt(e.Angl)),e["Scl "]!==void 0&&(t.scale=oe(e["Scl "])),e.Algn!==void 0&&(t.align=e.Algn),e.Ofst!==void 0&&(t.offset={x:oe(e.Ofst.Hrzn),y:oe(e.Ofst.Vrtc)}),t}function po(e){var t={name:e.Ptrn["Nm  "],id:e.Ptrn.Idnt};return e.Lnkd!==void 0&&(t.linked=e.Lnkd),e.phase!==void 0&&(t.phase={x:e.phase.Hrzn,y:e.phase.Vrtc}),t}function lt(e){if("Grad"in e)return ho(e);if("Ptrn"in e)return rn({type:"pattern"},po(e));if("Clr "in e)return{type:"color",color:Xe(e["Clr "])};throw new Error("Invalid vector content")}function vo(e){var t={};return e.dither!==void 0&&(t.Dthr=e.dither),e.interpolationMethod!==void 0&&(t.gradientsInterpolationMethod=Bn.encode(e.interpolationMethod)),e.reverse!==void 0&&(t.Rvrs=e.reverse),e.angle!==void 0&&(t.Angl=et(e.angle)),t.Type=Wt.encode(e.style),e.align!==void 0&&(t.Algn=e.align),e.scale!==void 0&&(t["Scl "]=Se(e.scale)),e.offset&&(t.Ofst={Hrzn:Se(e.offset.x),Vrtc:Se(e.offset.y)}),t.Grad=fo(e),t}function mo(e){var t={Ptrn:{"Nm  ":e.name||"",Idnt:e.id||""}};return e.linked!==void 0&&(t.Lnkd=!!e.linked),e.phase!==void 0&&(t.phase={Hrzn:e.phase.x,Vrtc:e.phase.y}),t}function ct(e){return e.type==="color"?{key:"SoCo",descriptor:{"Clr ":qe(e.color)}}:e.type==="pattern"?{key:"PtFl",descriptor:mo(e)}:{key:"GdFl",descriptor:vo(e)}}function Xe(e){if("H   "in e)return{h:cc(e["H   "]),s:e.Strt,b:e.Brgh};if("Rd  "in e)return{r:e["Rd  "],g:e["Grn "],b:e["Bl  "]};if("Cyn "in e)return{c:e["Cyn "],m:e.Mgnt,y:e["Ylw "],k:e.Blck};if("Gry "in e)return{k:e["Gry "]};if("Lmnc"in e)return{l:e.Lmnc,a:e["A   "],b:e["B   "]};if("redFloat"in e)return{fr:e.redFloat,fg:e.greenFloat,fb:e.blueFloat};throw new Error("Unsupported color descriptor")}function qe(e){if(e){if("r"in e)return{_name:"",_classID:"RGBC","Rd  ":e.r||0,"Grn ":e.g||0,"Bl  ":e.b||0};if("fr"in e)return{_name:"",_classID:"RGBC",redFloat:e.fr,greenFloat:e.fg,blueFloat:e.fb};if("h"in e)return{_name:"",_classID:"HSBC","H   ":et(e.h*360),Strt:e.s||0,Brgh:e.b||0};if("c"in e)return{_name:"",_classID:"CMYC","Cyn ":e.c||0,Mgnt:e.m||0,"Ylw ":e.y||0,Blck:e.k||0};if("l"in e)return{_name:"",_classID:"LABC",Lmnc:e.l||0,"A   ":e.a||0,"B   ":e.b||0};if("k"in e)return{_name:"",_classID:"GRYC","Gry ":e.k};throw new Error("Invalid color value")}else return{_name:"",_classID:"RGBC","Rd  ":0,"Grn ":0,"Bl  ":0}}function Rt(e){if(e===void 0)return 0;if(e.units!=="Angle")throw new Error("Invalid units: ".concat(e.units));return e.value}function oe(e){if(e===void 0)return 1;if(e.units!=="Percent")throw new Error("Invalid units: ".concat(e.units));return e.value/100}function cc(e){if(e===void 0)return 1;if(e.units==="Percent")return e.value/100;if(e.units==="Angle")return e.value/360;throw new Error("Invalid units: ".concat(e.units))}function re(e){var t=e.units,n=e.value;if(t!=="Pixels"&&t!=="Millimeters"&&t!=="Points"&&t!=="None"&&t!=="Picas"&&t!=="Inches"&&t!=="Centimeters"&&t!=="Density")throw new Error("Invalid units: ".concat(JSON.stringify({units:t,value:n})));return{value:n,units:t}}function dn(e,t){return t===void 0&&(t="Pixels"),typeof e=="number"?{value:e,units:t}:re(e)}function et(e){return{units:"Angle",value:e||0}}function Se(e){return{units:"Percent",value:Math.round((e||0)*100)}}function _e(e){return{units:"Percent",value:(e||0)*100}}function ce(e,t){if(e==null)return{units:"Pixels",value:0};if(typeof e!="object")throw new Error("Invalid value: ".concat(JSON.stringify(e)," (key: ").concat(t,") (should have value and units)"));var n=e.units,r=e.value;if(typeof r!="number")throw new Error("Invalid value in ".concat(JSON.stringify(e)," (key: ").concat(t,")"));if(n!=="Pixels"&&n!=="Millimeters"&&n!=="Points"&&n!=="None"&&n!=="Picas"&&n!=="Inches"&&n!=="Centimeters"&&n!=="Density")throw new Error("Invalid units in ".concat(JSON.stringify(e)," (key: ").concat(t,")"));return{units:n,value:r}}function Ee(e){var t=e.numerator,n=e.denominator;return{numerator:t,denominator:n}}var qi=z("textGridding","none",{none:"None",round:"Rnd "}),nt=z("Ornt","horizontal",{horizontal:"Hrzn",vertical:"Vrtc"}),$i=z("Annt","sharp",{none:"Anno",sharp:"antiAliasSharp",crisp:"AnCr",strong:"AnSt",smooth:"AnSm",platform:"antiAliasPlatformGray",platformLCD:"antiAliasPlatformLCD"}),Ar=z("warpStyle","none",{none:"warpNone",arc:"warpArc",arcLower:"warpArcLower",arcUpper:"warpArcUpper",arch:"warpArch",bulge:"warpBulge",shellLower:"warpShellLower",shellUpper:"warpShellUpper",flag:"warpFlag",wave:"warpWave",fish:"warpFish",rise:"warpRise",fisheye:"warpFisheye",inflate:"warpInflate",squeeze:"warpSqueeze",twist:"warpTwist",cylinder:"warpCylinder",custom:"warpCustom"}),Ne=z("BlnM","normal",{normal:"Nrml",dissolve:"Dslv",darken:"Drkn",multiply:"Mltp","color burn":"CBrn","linear burn":"linearBurn","darker color":"darkerColor",lighten:"Lghn",screen:"Scrn","color dodge":"CDdg","linear dodge":"linearDodge","lighter color":"lighterColor",overlay:"Ovrl","soft light":"SftL","hard light":"HrdL","vivid light":"vividLight","linear light":"linearLight","pin light":"pinLight","hard mix":"hardMix",difference:"Dfrn",exclusion:"Xclu",subtract:"blendSubtraction",divide:"blendDivide",hue:"H   ",saturation:"Strt",color:"Clr ",luminosity:"Lmns","linear height":"linearHeight",height:"Hght",subtraction:"Sbtr"}),go=z("BESl","inner bevel",{"inner bevel":"InrB","outer bevel":"OtrB",emboss:"Embs","pillow emboss":"PlEb","stroke emboss":"strokeEmboss"}),bo=z("bvlT","smooth",{smooth:"SfBL","chisel hard":"PrBL","chisel soft":"Slmt"}),yo=z("BESs","up",{up:"In  ",down:"Out "}),So=z("BETE","softer",{softer:"SfBL",precise:"PrBL"}),xo=z("IGSr","edge",{edge:"SrcE",center:"SrcC"}),Wt=z("GrdT","linear",{linear:"Lnr ",radial:"Rdl ",angle:"Angl",reflected:"Rflc",diamond:"Dmnd"}),Fo=z("animInterpStyle","linear",{linear:"Lnr ",hold:"hold"}),Co=z("stdTrackID","opacity",{opacity:"opacityTrack",style:"styleTrack",sheetTransform:"sheetTransformTrack",sheetPosition:"sheetPositionTrack",globalLighting:"globalLightingTrack"}),Bn=z("gradientInterpolationMethodType","perceptual",{perceptual:"Perc",linear:"Lnr ",classic:"Gcls",smooth:"Smoo"}),zt=z("ClrS","rgb",{rgb:"RGBC",hsb:"HSBl",lab:"LbCl",hsl:"HSLC"}),Xt=z("FStl","outside",{outside:"OutF",center:"CtrF",inside:"InsF"}),ko=z("FrFl","color",{color:"SClr",gradient:"GrFl",pattern:"Ptrn"}),Zi=z("ESliceType","image",{image:"Img ",noImage:"noImage"}),Yi=z("ESliceHorzAlign","default",{default:"default"}),Ki=z("ESliceVertAlign","default",{default:"default"}),Ji=z("ESliceOrigin","userGenerated",{userGenerated:"userGenerated",autoGenerated:"autoGenerated",layer:"layer"}),Qi=z("ESliceBGColorType","none",{none:"None",matte:"matte",color:"Clr "}),ea=z("strokeStyleLineCapType","butt",{butt:"strokeStyleButtCap",round:"strokeStyleRoundCap",square:"strokeStyleSquareCap"}),na=z("strokeStyleLineJoinType","miter",{miter:"strokeStyleMiterJoin",round:"strokeStyleRoundJoin",bevel:"strokeStyleBevelJoin"}),ta=z("strokeStyleLineAlignment","inside",{inside:"strokeStyleAlignInside",center:"strokeStyleAlignCenter",outside:"strokeStyleAlignOutside"}),Io=z("BlrM","ispinmage",{spin:"Spn ",zoom:"Zm  "}),wo=z("BlrQ","good",{draft:"Drft",good:"Gd  ",best:"Bst "}),Eo=z("SmBM","normal",{normal:"SBMN","edge only":"SBME","overlay edge":"SBMO"}),Lo=z("SmBQ","medium",{low:"SBQL",medium:"SBQM",high:"SBQH"}),Po=z("DspM","stretch to fit",{"stretch to fit":"StrF",tile:"Tile"}),Tn=z("UndA","repeat edge pixels",{"wrap around":"WrpA","repeat edge pixels":"RptE"}),Ao=z("Cnvr","rectangular to polar",{"rectangular to polar":"RctP","polar to rectangular":"PlrR"}),Do=z("RplS","medium",{small:"Sml ",medium:"Mdm ",large:"Lrg "}),To=z("SphM","normal",{normal:"Nrml","horizontal only":"HrzO","vertical only":"VrtO"}),Oo=z("Wvtp","sine",{sine:"WvSn",triangle:"WvTr",square:"WvSq"}),Mo=z("ZZTy","pond ripples",{"around center":"ArnC","out from center":"OtFr","pond ripples":"PndR"}),Ro=z("Dstr","uniform",{uniform:"Unfr",gaussian:"Gsn "}),tt=z("Chnl","composite",{red:"Rd  ",green:"Grn ",blue:"Bl  ",composite:"Cmps"}),Bo=z("MztT","fine dots",{"fine dots":"FnDt","medium dots":"MdmD","grainy dots":"GrnD","coarse dots":"CrsD","short lines":"ShrL","medium lines":"MdmL","long lines":"LngL","short strokes":"ShSt","medium strokes":"MdmS","long strokes":"LngS"}),_o=z("Lns ","50-300mm zoom",{"50-300mm zoom":"Zm  ","32mm prime":"Nkn ","105mm prime":"Nkn1","movie prime":"PnVs"}),No=z("blurType","gaussian blur",{"gaussian blur":"GsnB","lens blur":"lensBlur","motion blur":"MtnB"}),zo=z("DfsM","normal",{normal:"Nrml","darken only":"DrkO","lighten only":"LghO",anisotropic:"anisotropic"}),Uo=z("ExtT","blocks",{blocks:"Blks",pyramids:"Pyrm"}),Go=z("ExtR","random",{random:"Rndm","level-based":"LvlB"}),Vo=z("FlCl","background color",{"background color":"FlBc","foreground color":"FlFr","inverse image":"FlIn","unaltered image":"FlSm"}),Ho=z("CntE","upper",{lower:"Lwr ",upper:"Upr "}),jo=z("WndM","wind",{wind:"Wnd ",blast:"Blst",stagger:"Stgr"}),Wo=z("Drct","from the right",{left:"Left",right:"Rght"}),Xo=z("IntE","odd lines",{"odd lines":"ElmO","even lines":"ElmE"}),qo=z("IntC","interpolation",{duplication:"CrtD",interpolation:"CrtI"}),$o=z("FlMd","wrap around",{"set to transparent":"Bckg","repeat edge pixels":"Rpt ","wrap around":"Wrp "});z("prjM","fisheye",{fisheye:"fisP",perspective:"perP",auto:"auto","full spherical":"fusP"});var Zo=z("presetKindType","presetKindCustom",{custom:"presetKindCustom",default:"presetKindDefault"}),Pn=function(){return Pn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},Pn.apply(this,arguments)},Yo={};function ne(e,t,n,r){var i={key:e,has:t,read:n,write:r};Yo[i.key]=i}var Ct=[void 0,"PPI","PPCM"],kt=[void 0,"Inches","Centimeters","Points","Picas","Columns"],ra="0123456789abcdef";function ia(e){return e<=57?e-48:e-87}function uc(e,t){return ia(e.charCodeAt(t))<<4|ia(e.charCodeAt(t+1))}function Dr(e,t){var n=ke(e,t);return eo(n)}function Tr(e,t){var n=Qa(t);sn(e,n)}function fc(e){for(var t=T(e),n=ke(e,t),r=!1,i=0;i<n.byteLength;i++)if(n[i]&128){r=!0;break}if(r){var a=new TextDecoder("gbk");return a.decode(n)}else return eo(n)}function dc(e,t){for(var n="",r=0,i=t.codePointAt(r++);i!==void 0;i=t.codePointAt(r++))n+=i>127?"?":String.fromCodePoint(i);var a=Qa(n);B(e,a.byteLength),sn(e,a)}ne(1061,function(e){return e.captionDigest!==void 0},function(e,t){for(var n="",r=0;r<16;r++){var i=T(e);n+=ra[i>>4],n+=ra[i&15]}t.captionDigest=n},function(e,t){for(var n=0;n<16;n++)B(e,uc(t.captionDigest,n*2))});ne(1060,function(e){return e.xmpMetadata!==void 0},function(e,t,n){t.xmpMetadata=Dr(e,n())},function(e,t){Tr(e,t.xmpMetadata)});var It=z("Inte","perceptual",{perceptual:"Img ",saturation:"Grp ","relative colorimetric":"Clrm","absolute colorimetric":"AClr"});ne(1082,function(e){return e.printInformation!==void 0},function(e,t){var n,r,i=Y(e);t.printInformation={printerName:i.printerName||"",renderingIntent:It.decode((n=i.Inte)!==null&&n!==void 0?n:"Inte.Img ")};var a=t.printInformation;i.PstS!==void 0&&(a.printerManagesColors=i.PstS),i["Nm  "]!==void 0&&(a.printerProfile=i["Nm  "]),i.MpBl!==void 0&&(a.blackPointCompensation=i.MpBl),i.printSixteenBit!==void 0&&(a.printSixteenBit=i.printSixteenBit),i.hardProof!==void 0&&(a.hardProof=i.hardProof),i.printProofSetup&&("Bltn"in i.printProofSetup?a.proofSetup={builtin:i.printProofSetup.Bltn.split(".")[1]}:a.proofSetup={profile:i.printProofSetup.profile,renderingIntent:It.decode((r=i.printProofSetup.Inte)!==null&&r!==void 0?r:"Inte.Img "),blackPointCompensation:!!i.printProofSetup.MpBl,paperWhite:!!i.printProofSetup.paperWhite})},function(e,t){var n,r,i=t.printInformation,a={};i.printerManagesColors?a.PstS=!0:(i.hardProof!==void 0&&(a.hardProof=!!i.hardProof),a.ClrS="ClrS.RGBC",a["Nm  "]=(n=i.printerProfile)!==null&&n!==void 0?n:"CIE RGB"),a.Inte=It.encode(i.renderingIntent),i.printerManagesColors||(a.MpBl=!!i.blackPointCompensation),a.printSixteenBit=!!i.printSixteenBit,a.printerName=i.printerName||"",i.proofSetup&&"profile"in i.proofSetup?a.printProofSetup={profile:i.proofSetup.profile||"",Inte:It.encode(i.proofSetup.renderingIntent),MpBl:!!i.proofSetup.blackPointCompensation,paperWhite:!!i.proofSetup.paperWhite}:a.printProofSetup={Bltn:!((r=i.proofSetup)===null||r===void 0)&&r.builtin?"builtinProof.".concat(i.proofSetup.builtin):"builtinProof.proofCMYK"},K(e,"","printOutput",a)});ne(1005,function(e){return e.resolutionInfo!==void 0},function(e,t){var n=De(e),r=E(e),i=E(e),a=De(e),o=E(e),s=E(e);t.resolutionInfo={horizontalResolution:n,horizontalResolutionUnit:Ct[r]||"PPI",widthUnit:kt[i]||"Inches",verticalResolution:a,verticalResolutionUnit:Ct[o]||"PPI",heightUnit:kt[s]||"Inches"}},function(e,t){var n=t.resolutionInfo;Oe(e,n.horizontalResolution||0),I(e,Math.max(1,Ct.indexOf(n.horizontalResolutionUnit))),I(e,Math.max(1,kt.indexOf(n.widthUnit))),Oe(e,n.verticalResolution||0),I(e,Math.max(1,Ct.indexOf(n.verticalResolutionUnit))),I(e,Math.max(1,kt.indexOf(n.heightUnit)))});var aa=["centered","size to fit","user defined"];ne(1062,function(e){return e.printScale!==void 0},function(e,t){t.printScale={style:aa[Q(e)],x:je(e),y:je(e),scale:je(e)}},function(e,t){var n=t.printScale,r=n.style,i=n.x,a=n.y,o=n.scale;te(e,Math.max(0,aa.indexOf(r))),We(e,i||0),We(e,a||0),We(e,o||0)});ne(1006,function(e){return e.alphaChannelNames!==void 0},function(e,t,n){if(t.alphaChannelNames)R(e,n());else for(t.alphaChannelNames=[];n()>0;){var r=fc(e);t.alphaChannelNames.push(r)}},function(e,t){for(var n=0,r=t.alphaChannelNames;n<r.length;n++){var i=r[n];dc(e,i)}});ne(1045,function(e){return e.alphaChannelNames!==void 0},function(e,t,n){for(t.alphaChannelNames=[];n()>0;)t.alphaChannelNames.push(Fe(e))},function(e,t){for(var n=0,r=t.alphaChannelNames;n<r.length;n++){var i=r[n];Sn(e,i)}});ne(1053,function(e){return e.alphaIdentifiers!==void 0},function(e,t,n){for(t.alphaIdentifiers=[];n()>=4;)t.alphaIdentifiers.push(L(e))},function(e,t){for(var n=0,r=t.alphaIdentifiers;n<r.length;n++){var i=r[n];D(e,i)}});ne(1010,function(e){return e.backgroundColor!==void 0},function(e,t){return t.backgroundColor=ye(e)},function(e,t){return xe(e,t.backgroundColor)});ne(1037,function(e){return e.globalAngle!==void 0},function(e,t){return t.globalAngle=_(e)},function(e,t){return H(e,t.globalAngle)});ne(1049,function(e){return e.globalAltitude!==void 0},function(e,t){return t.globalAltitude=L(e)},function(e,t){return D(e,t.globalAltitude)});ne(1011,function(e){return e.printFlags!==void 0},function(e,t){t.printFlags={labels:!!T(e),cropMarks:!!T(e),colorBars:!!T(e),registrationMarks:!!T(e),negative:!!T(e),flip:!!T(e),interpolate:!!T(e),caption:!!T(e),printFlags:!!T(e)}},function(e,t){var n=t.printFlags;B(e,n.labels?1:0),B(e,n.cropMarks?1:0),B(e,n.colorBars?1:0),B(e,n.registrationMarks?1:0),B(e,n.negative?1:0),B(e,n.flip?1:0),B(e,n.interpolate?1:0),B(e,n.caption?1:0),B(e,n.printFlags?1:0)});ne(1034,function(e){return e.copyrighted!==void 0},function(e,t){t.copyrighted=!!T(e)},function(e,t){B(e,t.copyrighted?1:0)});ne(1035,function(e){return e.url!==void 0},function(e,t,n){t.url=qt(e,n())},function(e,t){tu(e,t.url)});ne(1080,function(e){return e.countInformation!==void 0},function(e,t){var n=Y(e);t.countInformation=n.countGroupList.map(function(r){return{color:{r:r["Rd  "],g:r["Grn "],b:r["Bl  "]},name:r["Nm  "],size:r["Rds "],fontSize:r.fontSize,visible:r.Vsbl,points:r.countObjectList.map(function(i){return{x:i["X   "],y:i["Y   "]}})}})},function(e,t){var n={Vrsn:1,countGroupList:t.countInformation.map(function(r){return{"Rd  ":r.color.r,"Grn ":r.color.g,"Bl  ":r.color.b,"Nm  ":r.name,"Rds ":r.size,fontSize:r.fontSize,Vsbl:r.visible,countObjectList:r.points.map(function(i){return{"X   ":i.x,"Y   ":i.y}})}})};K(e,"","Cnt ",n)});ne(1024,function(e){return e.layerState!==void 0},function(e,t){return t.layerState=E(e)},function(e,t){return I(e,t.layerState)});ne(1026,function(e){return e.layersGroup!==void 0},function(e,t,n){for(t.layersGroup=[];n()>0;)t.layersGroup.push(E(e))},function(e,t){for(var n=0,r=t.layersGroup;n<r.length;n++){var i=r[n];I(e,i)}});ne(1072,function(e){return e.layerGroupsEnabledId!==void 0},function(e,t,n){for(t.layerGroupsEnabledId=[];n()>0;)t.layerGroupsEnabledId.push(T(e))},function(e,t){for(var n=0,r=t.layerGroupsEnabledId;n<r.length;n++){var i=r[n];B(e,i)}});ne(1069,function(e){return e.layerSelectionIds!==void 0},function(e,t){var n=E(e);for(t.layerSelectionIds=[];n--;)t.layerSelectionIds.push(L(e))},function(e,t){I(e,t.layerSelectionIds.length);for(var n=0,r=t.layerSelectionIds;n<r.length;n++){var i=r[n];D(e,i)}});ne(1032,function(e){return e.gridAndGuidesInformation!==void 0},function(e,t){var n=L(e),r=L(e),i=L(e),a=L(e);if(n!==1)throw new Error("Invalid 1032 resource version: ".concat(n));t.gridAndGuidesInformation={grid:{horizontal:r,vertical:i},guides:[]};for(var o=0;o<a;o++)t.gridAndGuidesInformation.guides.push({location:L(e)/32,direction:T(e)?"horizontal":"vertical"})},function(e,t){var n=t.gridAndGuidesInformation,r=n.grid||{horizontal:576,vertical:576},i=n.guides||[];D(e,1),D(e,r.horizontal),D(e,r.vertical),D(e,i.length);for(var a=0,o=i;a<o.length;a++){var s=o[a];D(e,s.location*32),B(e,s.direction==="horizontal"?1:0)}});ne(1065,function(e){return e.layerComps!==void 0},function(e,t){var n=Y(e,!0);t.layerComps={list:[]};for(var r=0,i=n.list;r<i.length;r++){var a=i[r];t.layerComps.list.push({id:a.compID,name:a["Nm  "],capturedInfo:a.capturedInfo}),"comment"in a&&(t.layerComps.list[t.layerComps.list.length-1].comment=a.comment)}"lastAppliedComp"in n&&(t.layerComps.lastApplied=n.lastAppliedComp)},function(e,t){for(var n=t.layerComps,r={list:[]},i=0,a=n.list;i<a.length;i++){var o=a[i],s={};s._classID="Comp",s["Nm  "]=o.name,"comment"in o&&(s.comment=o.comment),s.compID=o.id,s.capturedInfo=o.capturedInfo,r.list.push(s)}"lastApplied"in n&&(r.lastAppliedComp=n.lastApplied),K(e,"","CompList",r)});var oa=["normal",void 0,void 0,void 0,void 0,void 0,void 0,"multiply","screen",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,"difference"];ne(1078,function(e){return e.onionSkins!==void 0},function(e,t){var n=Y(e);t.onionSkins={enabled:n.enab,framesBefore:n.numBefore,framesAfter:n.numAfter,frameSpacing:n.Spcn,minOpacity:n.minOpacity/100,maxOpacity:n.maxOpacity/100,blendMode:oa[n.BlnM]||"normal"}},function(e,t){var n=t.onionSkins,r={Vrsn:1,enab:n.enabled,numBefore:n.framesBefore,numAfter:n.framesAfter,Spcn:n.frameSpacing,minOpacity:n.minOpacity*100|0,maxOpacity:n.maxOpacity*100|0,BlnM:Math.max(0,oa.indexOf(n.blendMode))};K(e,"","null",r)});ne(1075,function(e){return e.timelineInformation!==void 0},function(e,t){var n,r,i=Y(e);t.timelineInformation={enabled:i.enab,frameStep:Ee(i.frameStep),frameRate:i.frameRate,time:Ee(i.time),duration:Ee(i.duration),workInTime:Ee(i.workInTime),workOutTime:Ee(i.workOutTime),repeats:i.LCnt,hasMotion:i.hasMotion,globalTracks:lo(i.globalTrackList,!!e.logMissingFeatures)},!((r=(n=i.audioClipGroupList)===null||n===void 0?void 0:n.audioClipGroupList)===null||r===void 0)&&r.length&&(t.timelineInformation.audioClipGroups=i.audioClipGroupList.audioClipGroupList.map(function(a){return{id:a.groupID,muted:a.muted,audioClips:a.audioClipList.map(function(o){var s=o.clipID,c=o.timeScope,l=o.muted,u=o.audioLevel,h=o.frameReader;return{id:s,start:Ee(c.Strt),duration:Ee(c.duration),inTime:Ee(c.inTime),outTime:Ee(c.outTime),muted:l,audioLevel:u,frameReader:{type:h.frameReaderType,mediaDescriptor:h.mediaDescriptor,link:{name:h["Lnk "]["Nm  "],fullPath:h["Lnk "].fullPath,relativePath:h["Lnk "].relPath}}}})}}))},function(e,t){var n,r=t.timelineInformation,i={Vrsn:1,enab:r.enabled,frameStep:r.frameStep,frameRate:r.frameRate,time:r.time,duration:r.duration,workInTime:r.workInTime,workOutTime:r.workOutTime,LCnt:r.repeats,globalTrackList:co(r.globalTracks),audioClipGroupList:{audioClipGroupList:(n=r.audioClipGroups)===null||n===void 0?void 0:n.map(function(a){return{groupID:a.id,muted:a.muted,audioClipList:a.audioClips.map(function(o){return{clipID:o.id,timeScope:{Vrsn:1,Strt:o.start,duration:o.duration,inTime:o.inTime,outTime:o.outTime},frameReader:{frameReaderType:o.frameReader.type,descVersion:1,"Lnk ":{descVersion:1,"Nm  ":o.frameReader.link.name,fullPath:o.frameReader.link.fullPath,relPath:o.frameReader.link.relativePath},mediaDescriptor:o.frameReader.mediaDescriptor},muted:o.muted,audioLevel:o.audioLevel}})}})},hasMotion:r.hasMotion};K(e,"","null",i,"anim")});ne(1076,function(e){return e.sheetDisclosure!==void 0},function(e,t){var n=Y(e);t.sheetDisclosure={},n.sheetTimelineOptions&&(t.sheetDisclosure.sheetTimelineOptions=n.sheetTimelineOptions.map(function(r){return{sheetID:r.sheetID,sheetDisclosed:r.sheetDisclosed,lightsDisclosed:r.lightsDisclosed,meshesDisclosed:r.meshesDisclosed,materialsDisclosed:r.materialsDisclosed}}))},function(e,t){var n=t.sheetDisclosure,r={Vrsn:1};n.sheetTimelineOptions&&(r.sheetTimelineOptions=n.sheetTimelineOptions.map(function(i){return{Vrsn:2,sheetID:i.sheetID,sheetDisclosed:i.sheetDisclosed,lightsDisclosed:i.lightsDisclosed,meshesDisclosed:i.meshesDisclosed,materialsDisclosed:i.materialsDisclosed}})),K(e,"","null",r)});ne(1054,function(e){return e.urlsList!==void 0},function(e,t){var n=L(e);t.urlsList=[];for(var r=0;r<n;r++){var i=se(e);if(i!=="slic"&&e.throwForMissingFeatures)throw new Error("Unknown long");var a=L(e),o=Fe(e);t.urlsList.push({id:a,url:o,ref:"slice"})}},function(e,t){var n=t.urlsList;D(e,n.length);for(var r=0;r<n.length;r++)G(e,"slic"),D(e,n[r].id),Me(e,n[r].url)});function sa(e){return{"Top ":e.top,Left:e.left,Btom:e.bottom,Rght:e.right}}function la(e){return{top:e["Top "],left:e.Left,bottom:e.Btom,right:e.Rght}}function wt(e,t){return e[Math.max(0,Math.min(e.length-1,t))]}var ca=["autoGenerated","layer","userGenerated"],ua=["noImage","image"],Et=["default"];ne(1050,function(e){return e.slices?e.slices.length:0},function(e,t){var n=L(e);if(n===6){t.slices||(t.slices=[]);var r=_(e),i=_(e),a=_(e),o=_(e),s=Fe(e),c=L(e);t.slices.push({bounds:{top:r,left:i,bottom:a,right:o},groupName:s,slices:[]});for(var l=t.slices[t.slices.length-1].slices,u=0;u<c;u++){var h=L(e),p=L(e),f=wt(ca,L(e)),m=f=="layer"?L(e):0,v=Fe(e),x=wt(ua,L(e)),b=_(e),y=_(e),S=_(e),g=_(e),F=Fe(e),w=Fe(e),C=Fe(e),k=Fe(e),O=!!T(e),A=Fe(e),M=wt(Et,L(e)),j=wt(Et,L(e)),U=T(e),W=T(e),q=T(e),V=T(e),X=U+W+q+V===0?"none":U===0?"matte":"color";l.push({id:h,groupId:p,origin:f,associatedLayerId:m,name:v,target:w,message:C,altTag:k,cellTextIsHTML:O,cellText:A,horizontalAlignment:M,verticalAlignment:j,type:x,url:F,bounds:{top:y,left:b,bottom:g,right:S},backgroundColorType:X,backgroundColor:{r:W,g:q,b:V,a:U}})}var le=Y(e);le.slices.forEach(function(he){var $=l.find(function(me){return he.sliceID==me.id});$&&($.topOutset=he.topOutset,$.leftOutset=he.leftOutset,$.bottomOutset=he.bottomOutset,$.rightOutset=he.rightOutset)})}else if(n===7||n===8){var le=Y(e);t.slices||(t.slices=[]),t.slices.push({groupName:le.baseName,bounds:la(le.bounds),slices:le.slices.map(function($){return Pn(Pn({},$["Nm  "]?{name:$["Nm  "]}:{}),{id:$.sliceID,groupId:$.groupID,associatedLayerId:0,origin:Ji.decode($.origin),type:Zi.decode($.Type),bounds:la($.bounds),url:$.url,target:$.null,message:$.Msge,altTag:$.altTag,cellTextIsHTML:$.cellTextIsHTML,cellText:$.cellText,horizontalAlignment:Yi.decode($.horzAlign),verticalAlignment:Ki.decode($.vertAlign),backgroundColorType:Qi.decode($.bgColorType),backgroundColor:$.bgColor?{r:$.bgColor["Rd  "],g:$.bgColor["Grn "],b:$.bgColor["Bl  "],a:$.bgColor.alpha}:{r:0,g:0,b:0,a:0},topOutset:$.topOutset||0,leftOutset:$.leftOutset||0,bottomOutset:$.bottomOutset||0,rightOutset:$.rightOutset||0})})})}else throw new Error("Invalid slices version (".concat(n,")"))},function(e,t,n){var r=t.slices[n],i=r.bounds,a=r.groupName,o=r.slices;D(e,6),H(e,i.top),H(e,i.left),H(e,i.bottom),H(e,i.right),Me(e,a),D(e,o.length);for(var s=0;s<o.length;s++){var c=o[s],l=c.backgroundColor,u=l.a,h=l.r,p=l.g,f=l.b;c.backgroundColorType==="none"?u=h=p=f=0:c.backgroundColorType==="matte"&&(u=0,h=p=f=255),D(e,c.id),D(e,c.groupId),D(e,ca.indexOf(c.origin)),c.origin==="layer"&&D(e,c.associatedLayerId),Me(e,c.name||""),D(e,ua.indexOf(c.type)),H(e,c.bounds.left),H(e,c.bounds.top),H(e,c.bounds.right),H(e,c.bounds.bottom),Me(e,c.url),Me(e,c.target),Me(e,c.message),Me(e,c.altTag),B(e,c.cellTextIsHTML?1:0),Me(e,c.cellText),D(e,Et.indexOf(c.horizontalAlignment)),D(e,Et.indexOf(c.verticalAlignment)),B(e,u),B(e,h),B(e,p),B(e,f)}var m={bounds:sa(i),slices:[]};o.forEach(function(v){var x=Pn(Pn({sliceID:v.id,groupID:v.groupId,origin:Ji.encode(v.origin),Type:Zi.encode(v.type),bounds:sa(v.bounds)},v.name?{"Nm  ":v.name}:{}),{url:v.url,null:v.target,Msge:v.message,altTag:v.altTag,cellTextIsHTML:v.cellTextIsHTML,cellText:v.cellText,horzAlign:Yi.encode(v.horizontalAlignment),vertAlign:Ki.encode(v.verticalAlignment),bgColorType:Qi.encode(v.backgroundColorType)});if(v.backgroundColorType==="color"){var b=v.backgroundColor,y=b.r,S=b.g,g=b.b,F=b.a;x.bgColor={"Rd  ":y,"Grn ":S,"Bl  ":g,alpha:F}}x.topOutset=v.topOutset||0,x.leftOutset=v.leftOutset||0,x.bottomOutset=v.bottomOutset||0,x.rightOutset=v.rightOutset||0,m.slices.push(x)}),K(e,"","null",m,"slices")});ne(1064,function(e){return e.pixelAspectRatio!==void 0},function(e,t){if(L(e)>2)throw new Error("Invalid pixelAspectRatio version");t.pixelAspectRatio={aspect:ze(e)}},function(e,t){D(e,2),Ye(e,t.pixelAspectRatio.aspect)});ne(1041,function(e){return e.iccUntaggedProfile!==void 0},function(e,t){t.iccUntaggedProfile=!!T(e)},function(e,t){B(e,t.iccUntaggedProfile?1:0)});ne(1044,function(e){return e.idsSeedNumber!==void 0},function(e,t){return t.idsSeedNumber=L(e)},function(e,t){return D(e,t.idsSeedNumber)});ne(1036,function(e){return e.thumbnail!==void 0||e.thumbnailRaw!==void 0},function(e,t,n){var r=L(e),i=L(e),a=L(e);L(e),L(e),L(e);var o=E(e),s=E(e);if(r!==1||o!==24||s!==1){e.logMissingFeatures&&e.log("Invalid thumbnail data (format: ".concat(r,", bitsPerPixel: ").concat(o,", planes: ").concat(s,")")),R(e,n());return}var c=n(),l=ke(e,c);e.useRawThumbnail?t.thumbnailRaw={width:i,height:a,data:l}:l.byteLength&&(t.thumbnail=Jl(l))},function(e,t){var n,r=0,i=0,a=new Uint8Array(0);if(t.thumbnailRaw)r=t.thumbnailRaw.width,i=t.thumbnailRaw.height,a=t.thumbnailRaw.data;else try{var o=(n=t.thumbnail.toDataURL("image/jpeg",1))===null||n===void 0?void 0:n.substring(23);o&&(a=Fr.toByteArray(o),r=t.thumbnail.width,i=t.thumbnail.height)}catch{}var s=24,c=Math.floor((r*s+31)/32)*4,l=1,u=c*i*l,h=a.length;D(e,1),D(e,r),D(e,i),D(e,c),D(e,u),D(e,h),I(e,s),I(e,l),sn(e,a)});ne(1057,function(e){return e.versionInfo!==void 0},function(e,t,n){var r=L(e);if(r!==1)throw new Error("Invalid versionInfo version");t.versionInfo={hasRealMergedData:!!T(e),writerName:Fe(e),readerName:Fe(e),fileVersion:L(e)},R(e,n())},function(e,t){var n=t.versionInfo;D(e,1),B(e,n.hasRealMergedData?1:0),Me(e,n.writerName),Me(e,n.readerName),D(e,n.fileVersion)});ne(7e3,function(e){return e.imageReadyVariables!==void 0},function(e,t,n){t.imageReadyVariables=Dr(e,n())},function(e,t){Tr(e,t.imageReadyVariables)});ne(7001,function(e){return e.imageReadyDataSets!==void 0},function(e,t,n){t.imageReadyDataSets=Dr(e,n())},function(e,t){Tr(e,t.imageReadyDataSets)});ne(1088,function(e){return e.pathSelectionState!==void 0},function(e,t,n){var r=Y(e);t.pathSelectionState=r.null},function(e,t){var n={null:t.pathSelectionState};K(e,"","null",n)});var fa=z("FrmD","",{auto:"Auto",none:"None",dispose:"Disp"});ne(4e3,function(e){return e.animations!==void 0},function(e,t,n){var r=se(e);if(r==="mani")pn(e,"IRFR"),Re(e,1,function(a){for(var o=function(){pn(e,"8BIM");var s=se(e);Re(e,1,function(c){if(s==="AnDs"){var l=Y(e);t.animations={frames:l.FrIn.map(function(h){return{id:h.FrID,delay:(h.FrDl||0)/100,dispose:h.FrDs?fa.decode(h.FrDs):"auto"}}),animations:l.FSts.map(function(h){return{id:h.FsID,frames:h.FsFr,repeats:h.LCnt,activeFrame:h.AFrm||0}})}}else if(s==="Roll"){var u=ke(e,c());e.logDevFeatures&&e.log("#4000 Roll",u)}else e.logMissingFeatures&&e.log("Unhandled subsection in #4000",s)})};a()>0;)o()});else if(r==="mopt"){var i=ke(e,n());e.logDevFeatures&&e.log("#4000 mopt",i)}else e.logMissingFeatures&&e.log("Unhandled key in #4000:",r)},function(e,t){t.animations&&(G(e,"mani"),G(e,"IRFR"),bn(e,1,function(){G(e,"8BIM"),G(e,"AnDs"),bn(e,1,function(){for(var n={FrIn:[],FSts:[]},r=0;r<t.animations.frames.length;r++){var i=t.animations.frames[r],a={FrID:i.id};i.delay&&(a.FrDl=i.delay*100|0),a.FrDs=fa.encode(i.dispose),n.FrIn.push(a)}for(var r=0;r<t.animations.animations.length;r++){var o=t.animations.animations[r],s={FsID:o.id,AFrm:o.activeFrame|0,FsFr:o.frames,LCnt:o.repeats|0};n.FSts.push(s)}K(e,"","null",n)})}))});var hc=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n},Ko=[0,1,3,2],pc=["bitmap","grayscale","indexed","RGB","CMYK","multichannel","duotone","lab"];function kr(e){for(var t=e.width*e.height*4,n=0;n<t;n+=4){var r=e.data[n];e.data[n+1]=r,e.data[n+2]=r}}function da(e,t,n){var r=new DataView(e,t,n);return{view:r,offset:0,strict:!1,debug:!1,large:!1,globalAlpha:!1,log:console.log}}function Ir(e,t){if(e.strict)throw new Error(t);e.debug&&e.log(t)}function T(e){return e.offset+=1,e.view.getUint8(e.offset-1)}function vc(e){return e.view.getUint8(e.offset)}function Q(e){return e.offset+=2,e.view.getInt16(e.offset-2,!1)}function E(e){return e.offset+=2,e.view.getUint16(e.offset-2,!1)}function mc(e){return e.offset+=2,e.view.getUint16(e.offset-2,!0)}function _(e){return e.offset+=4,e.view.getInt32(e.offset-4,!1)}function ha(e){return e.offset+=4,e.view.getInt32(e.offset-4,!0)}function L(e){return e.offset+=4,e.view.getUint32(e.offset-4,!1)}function je(e){return e.offset+=4,e.view.getFloat32(e.offset-4,!1)}function ze(e){return e.offset+=8,e.view.getFloat64(e.offset-8,!1)}function De(e){return _(e)/65536}function Ve(e){return _(e)/(1<<24)}function ke(e,t){var n=e.view.byteOffset+e.offset;if(e.offset+=t,n+t>e.view.buffer.byteLength){if(Ir(e,"Reading bytes exceeding buffer length"),t>100*1024*1024)throw new Error("Reading past end of file");var r=new Uint8Array(t),i=Math.min(t,e.view.byteLength-n);return i>0&&r.set(new Uint8Array(e.view.buffer,n,i)),r}else return new Uint8Array(e.view.buffer,n,t)}function se(e){return Jo(e,4)}function gc(e,t){var n=String.fromCharCode(e.view.getUint8(t))+String.fromCharCode(e.view.getUint8(t+1))+String.fromCharCode(e.view.getUint8(t+2))+String.fromCharCode(e.view.getUint8(t+3));return n=="8BIM"||n=="8B64"}function hn(e,t){for(var n=T(e),r=n?Jo(e,n):"";++n%t;)e.offset++;return r}function Fe(e){var t=L(e);return Or(e,t)}function Or(e,t){for(var n="";t--;){var r=E(e);(r||t>0)&&(n+=String.fromCharCode(r))}return n}function bc(e,t){for(var n="";t--;){var r=mc(e);(r||t>0)&&(n+=String.fromCharCode(r))}return n}function qt(e,t){for(var n="";t--;)n+=String.fromCharCode(T(e));return n}function R(e,t){e.offset+=t}function pn(e,t,n){var r=e.offset,i=se(e);if(i!==t&&i!==n)throw new Error("Invalid signature: '".concat(i,"' at 0x").concat(r.toString(16)))}function Jo(e,t){for(var n=ke(e,t),r="",i=0;i<n.length;i++)r+=String.fromCharCode(n[i]);return r}function yc(e){return e==="8BIM"||e==="MeSa"||e==="AgHg"||e==="PHUT"||e==="DCSR"}function Sc(e,t){var n;t===void 0&&(t={}),pn(e,"8BPS");var r=E(e);if(r!==1&&r!==2)throw new Error("Invalid PSD file version: ".concat(r));R(e,6);var i=E(e),a=L(e),o=L(e),s=E(e),c=E(e),l=r===1?3e4:3e5;if(o>l||a>l)throw new Error("Invalid size: ".concat(o,"x").concat(a));if(i>16)throw new Error("Invalid channel count: ".concat(i));if(![1,8,16,32].includes(s))throw new Error("Invalid bitsPerChannel: ".concat(s));if(Ko.indexOf(c)===-1)throw new Error("Color mode not supported: ".concat((n=pc[c])!==null&&n!==void 0?n:c));var u={width:o,height:a,channels:i,bitsPerChannel:s,colorMode:c};Object.assign(e,t),e.large=r===2,e.globalAlpha=!1,Re(e,1,function(v){if(v()){if(c===2){if(v()!=768)throw new Error("Invalid color palette size");u.palette=[];for(var x=0;x<256;x++)u.palette.push({r:T(e),g:0,b:0});for(var x=0;x<256;x++)u.palette[x].g=T(e);for(var x=0;x<256;x++)u.palette[x].b=T(e)}R(e,v())}});var h={};Re(e,1,function(v){for(var x=function(){Qo(e,yc);var b=E(e);hn(e,2),Re(e,2,function(y){var S=Yo[b],g=b===1036&&!!e.skipThumbnail;if(S&&!g)try{S.read(e,h,y)}catch(F){if(e.throwForMissingFeatures)throw F;R(e,y())}else R(e,y())})};v()>0;)x()}),h.layersGroup,h.layerGroupsEnabledId;var p=hc(h,["layersGroup","layerGroupsEnabledId"]);Object.keys(p)&&(u.imageResources=p),Re(e,1,function(v){if(Re(e,2,function(b){Mr(e,u,h),R(e,b())},void 0,e.large),v()>0){var x=Ic(e);x&&(u.globalLayerMaskInfo=x)}else R(e,v());for(;v()>0;){for(;v()&&vc(e)===0;)R(e,1);v()>=12?es(e,u,u,h):R(e,v())}},void 0,e.large);var f=u.children&&u.children.length,m=e.skipCompositeImageData&&(e.skipLayerImageData||f);return m||Lc(e,u),u}function Mr(e,t,n){var r,i,a=n.layersGroup,o=a===void 0?[]:a,s=n.layerGroupsEnabledId,c=s===void 0?[]:s,l=Q(e);l<0&&(e.globalAlpha=!0,l=-l);for(var u=[],h=[],p=0;p<l;p++){var f=xc(e,t,n),m=f.layer,v=f.channels;o[p]!==void 0&&(m.linkGroup=o[p]),c[p]!==void 0&&(m.linkGroupEnabled=!!c[p]),u.push(m),h.push(v)}if(!e.skipLayerImageData)for(var p=0;p<l;p++)kc(e,t,u[p],h[p]);t.children||(t.children=[]);for(var x=[t],p=u.length-1;p>=0;p--){var b=u[p],y=b.sectionDivider?b.sectionDivider.type:0;y===1||y===2?(b.opened=y===1,b.children=[],!((r=b.sectionDivider)===null||r===void 0)&&r.key&&(b.blendMode=(i=Mn[b.sectionDivider.key])!==null&&i!==void 0?i:b.blendMode),x[x.length-1].children.unshift(b),x.push(b)):y===3?x.pop():x[x.length-1].children.unshift(b)}}function xc(e,t,n){var r={};r.top=_(e),r.left=_(e),r.bottom=_(e),r.right=_(e);for(var i=E(e),a=[],o=0;o<i;o++){var s=Q(e),c=L(e);if(e.large){if(c!==0)throw new Error("Sizes larger than 4GB are not supported");c=L(e)}a.push({id:s,length:c})}pn(e,"8BIM");var l=se(e);if(!Mn[l])throw new Error("Invalid blend mode: '".concat(l,"'"));r.blendMode=Mn[l],r.opacity=T(e)/255,r.clipping=T(e)===1;var u=T(e);return r.transparencyProtected=(u&1)!==0,r.hidden=(u&2)!==0,u&32&&(r.effectsOpen=!0),R(e,1),Re(e,1,function(h){Fc(e,r);var p=Cc(e);for(p&&(r.blendingRanges=p),r.name=hn(e,1);h()>4&&!gc(e,e.offset);)e.offset++;for(;h()>=12;)es(e,r,t,n);R(e,h())}),{layer:r,channels:a}}function Fc(e,t){return Re(e,1,function(n){if(n()){var r={};t.mask=r,r.top=_(e),r.left=_(e),r.bottom=_(e),r.right=_(e),r.defaultColor=T(e);var i=T(e);if(r.positionRelativeToLayer=(i&1)!==0,r.disabled=(i&2)!==0,r.fromVectorData=(i&8)!==0,n()>=18){var a={};t.realMask=a;var o=T(e);a.positionRelativeToLayer=(o&1)!==0,a.disabled=(o&2)!==0,a.fromVectorData=(o&8)!==0,a.defaultColor=T(e),a.top=_(e),a.left=_(e),a.bottom=_(e),a.right=_(e)}if(i&16){var s=T(e);s&1&&(r.userMaskDensity=T(e)/255),s&2&&(r.userMaskFeather=ze(e)),s&4&&(r.vectorMaskDensity=T(e)/255),s&8&&(r.vectorMaskFeather=ze(e))}R(e,n())}})}function Lt(e){return[T(e),T(e),T(e),T(e)]}function Cc(e){return Re(e,1,function(t){for(var n=Lt(e),r=Lt(e),i=[];t()>0;){var a=Lt(e),o=Lt(e);i.push({sourceRange:a,destRange:o})}return{compositeGrayBlendSource:n,compositeGraphBlendDestinationRange:r,ranges:i}})}function kc(e,t,n,r){var i,a,o,s,c=(n.right||0)-(n.left||0),l=(n.bottom||0)-(n.top||0),u=t.colorMode===4,h;if(c&&l)if(u){if(t.bitsPerChannel!==8)throw new Error("bitsPerChannel Not supproted");h={width:c,height:l,data:new Uint8ClampedArray(c*l*5)};for(var p=4;p<h.data.byteLength;p+=5)h.data[p]=255}else h=wr(c,l,(i=t.bitsPerChannel)!==null&&i!==void 0?i:8),Sr(h);for(var f=0,m=r;f<m.length;f++){var v=m[f];if(v.length!==0){if(v.length<2)throw new Error("Invalid channel length");var x=e.offset,b=E(e);if(b>3&&(e.offset-=1,b=E(e)),b>3&&(e.offset-=3,b=E(e)),b>3)throw new Error("Invalid compression: ".concat(b));if(v.id===-2||v.id===-3){var y=v.id===-2?n.mask:n.realMask;if(!y)throw new Error("Missing layer ".concat(v.id===-2?"mask":"real mask"," data"));var S=(y.right||0)-(y.left||0),g=(y.bottom||0)-(y.top||0);if(S<0||g<0||S>3e4||g>3e4)throw new Error("Invalid mask size");if(S&&g){var F=wr(S,g,(a=t.bitsPerChannel)!==null&&a!==void 0?a:8);Sr(F),e.offset,pa(e,v.length,F,b,S,g,(o=t.bitsPerChannel)!==null&&o!==void 0?o:8,0,e.large,4),kr(F),e.useImageData?y.imageData=F:y.canvas=xr(F)}}else{var w=Yl(v.id,u),C=h;if(w<0&&(C=void 0,e.throwForMissingFeatures))throw new Error("Channel not supported: ".concat(v.id));pa(e,v.length,C,b,c,l,(s=t.bitsPerChannel)!==null&&s!==void 0?s:8,w,e.large,u?5:4),e.offset=x+v.length,C&&t.colorMode===1&&kr(C)}}}if(h){if(u){var k=h;h=Pr(k.width,k.height),ns(k,h,!1)}e.useImageData?n.imageData=h:n.canvas=xr(h)}}function pa(e,t,n,r,i,a,o,s,c,l){if(r===0)rs(e,n,i,a,o,l,s);else if(r===1)$n(e,n,i,a,o,l,[s],c);else if(r===2)va(e,t,n,i,a,o,l,s,!1);else if(r===3)va(e,t,n,i,a,o,l,s,!0);else throw new Error("Invalid Compression type: ".concat(r))}function Ic(e){return Re(e,1,function(t){if(t()){var n=E(e),r=E(e),i=E(e),a=E(e),o=E(e),s=E(e)/255,c=T(e);return R(e,t()),{overlayColorSpace:n,colorSpace1:r,colorSpace2:i,colorSpace3:a,colorSpace4:o,opacity:s,kind:c}}})}var wc=[0,1,-1,2,-2,3,-3,4,-4];function Qo(e,t){for(var n=e.offset,r="",i=0,a=wc;i<a.length;i++){var o=a[i];try{e.offset=n+o,r=se(e)}catch{}if(t(r))break}if(!t(r))throw new Error("Invalid signature: '".concat(r,"' at 0x").concat(n.toString(16)));return r}function Ec(e){return e==="8BIM"||e==="8B64"}function es(e,t,n,r){var i=Qo(e,Ec),a=se(e),o=i==="8B64"||e.large&&$l.indexOf(a)!==-1;Re(e,2,function(s){var c=Ut[a];if(c)try{c.read(e,t,s,n,r)}catch(l){if(e.throwForMissingFeatures)throw l}else e.logMissingFeatures&&e.log("Unhandled additional info: ".concat(a)),R(e,s());s()&&(e.logMissingFeatures&&e.log("Unread ".concat(s()," bytes left for additional info: ").concat(a)),R(e,s()))},!1,o)}function wr(e,t,n,r){if(r===void 0&&(r=4),n===1||n===8)return r===4?Pr(e,t):{width:e,height:t,data:new Uint8ClampedArray(e*t*r)};if(n===16)return{width:e,height:t,data:new Uint16Array(e*t*r)};if(n===32)return{width:e,height:t,data:new Float32Array(e*t*r)};throw new Error("Invalid bitDepth (".concat(n,")"))}function Lc(e,t){var n,r=E(e),i=(n=t.bitsPerChannel)!==null&&n!==void 0?n:8;if(Ko.indexOf(t.colorMode)===-1)throw new Error("Color mode not supported: ".concat(t.colorMode));if(r!==0&&r!==1)throw new Error("Compression type not supported: ".concat(r));var a=wr(t.width,t.height,i);switch(Sr(a),t.colorMode){case 0:{if(i!==1)throw new Error("Invalid bitsPerChannel for bitmap color mode");var o=void 0;if(r===0)o=ke(e,Math.ceil(t.width/8)*t.height);else if(r===1)o=new Uint8Array(t.width*t.height),$n(e,{data:o,width:t.width,height:t.height},t.width,t.height,8,1,[0],e.large);else throw new Error("Bitmap compression not supported: ".concat(r));Kl(o,a.data,t.width,t.height);break}case 3:case 1:{var s=t.colorMode===1?[0]:[0,1,2];if(t.channels&&t.channels>3)for(var c=3;c<t.channels;c++)s.push(c);else e.globalAlpha&&s.push(3);if(r===0)for(var c=0;c<s.length;c++)rs(e,a,t.width,t.height,i,4,s[c]);else r===1&&(e.offset,$n(e,a,t.width,t.height,i,4,s,e.large));t.colorMode===1&&kr(a);break}case 2:{if(i!==8)throw new Error("bitsPerChannel Not supproted");if(t.channels!==1)throw new Error("Invalid channel count");if(!t.palette)throw new Error("Missing color palette");if(r===0)throw new Error("Not implemented");if(r===1){var l={width:a.width,height:a.height,data:new Uint8Array(a.width*a.height)};$n(e,l,t.width,t.height,i,1,[0],e.large),Pc(l,a,t.palette)}else throw new Error("Not implemented");break}case 4:{if(i!==8)throw new Error("bitsPerChannel Not supproted");if(t.channels!==4)throw new Error("Invalid channel count");var s=[0,1,2,3];if(e.globalAlpha&&s.push(4),r===0)throw new Error("Not implemented");if(r===1){var u={width:a.width,height:a.height,data:new Uint8Array(a.width*a.height*5)};e.offset,$n(e,u,t.width,t.height,i,5,s,e.large),ns(u,a,!0)}else throw new Error("Not implemented");break}default:throw new Error("Color mode not supported: ".concat(t.colorMode))}if(e.globalAlpha){if(t.bitsPerChannel!==8)throw new Error("bitsPerChannel Not supproted");for(var h=a.data,p=a.width*a.height*4,c=0;c<p;c+=4){var f=h[c+3];if(f!=0&&f!=255){var m=f/255,v=1/m,x=255*(1-v);h[c+0]=h[c+0]*v+x,h[c+1]=h[c+1]*v+x,h[c+2]=h[c+2]*v+x}}}e.useImageData?t.imageData=a:t.canvas=xr(a)}function ns(e,t,n){for(var r=t.width*t.height*4,i=e.data,a=t.data,o=0,s=0;s<r;o+=5,s+=4){var c=i[o],l=i[o+1],u=i[o+2],h=i[o+3];a[s]=(c*h|0)/255|0,a[s+1]=(l*h|0)/255|0,a[s+2]=(u*h|0)/255|0,a[s+3]=n?255-i[o+4]:i[o+4]}}function Pc(e,t,n){for(var r=e.width*e.height,i=e.data,a=t.data,o=0,s=0;o<r;o++,s+=4){var c=n[i[o]];a[s+0]=c.r,a[s+1]=c.g,a[s+2]=c.b,a[s+3]=255}}function Ac(e,t){if(e.byteLength/e.length!==t.byteLength/t.length)throw new Error("Invalid array types")}function ts(e,t){if(t===8)return e;if(t===16)if(e.byteOffset%2){var n=new Uint16Array(e.byteLength/2);return new Uint8Array(n.buffer,n.byteOffset,n.byteLength).set(e),n}else return new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);else if(t===32)if(e.byteOffset%4){var n=new Float32Array(e.byteLength/4);return new Uint8Array(n.buffer,n.byteOffset,n.byteLength).set(e),n}else return new Float32Array(e.buffer,e.byteOffset,e.byteLength/4);else throw new Error("Invalid bitDepth (".concat(t,")"))}function Er(e,t,n,r){Ac(e.data,t);for(var i=e.width*e.height,a=e.data,o=0,s=n|0;o<i;o++,s=s+r|0)a[s]=t[o]}function rs(e,t,n,r,i,a,o){var s=ke(e,n*r*Math.floor(i/8));if(i==32)for(var c=0;c<s.byteLength;c+=4){var l=s[c+0],u=s[c+1],h=s[c+2],p=s[c+3];s[c+0]=p,s[c+1]=h,s[c+2]=u,s[c+3]=l}var f=ts(s,i);t&&o<a&&Er(t,f,o,a)}function sr(e,t,n,r){for(var i=0;i<n;i++)for(var a=i*t,o=1,s=a+1;o<t;o++,s++)e[s]=(e[s-1]+e[s])%r}function va(e,t,n,r,i,a,o,s,c){var l=ke(e,t),u=Ul(l);if(n&&s<o){var h=ts(u,a);if(a===8)c&&sr(u,r,i,256),Er(n,u,s,o);else if(a===16)c&&sr(h,r,i,65536),Er(n,h,s,o);else if(a===32){c&&sr(u,r*4,i,256);for(var p=s,f=new Uint32Array(n.data.buffer,n.data.byteOffset,n.data.length),m=0;m<i;m++)for(var v=r*4*m,x=0;x<r;x++,v++,p+=o){var b=v+r,y=b+r,S=y+r;f[p]=(u[v]<<24|u[b]<<16|u[y]<<8|u[S])>>>0}}else throw new Error("Invalid bitDepth")}}function $n(e,t,n,r,i,a,o,s){var c=t&&t.data,l;if(s){l=new Uint32Array(o.length*r);for(var u=0,h=0;u<o.length;u++)for(var p=0;p<r;p++,h++)l[h]=L(e)}else{l=new Uint16Array(o.length*r);for(var u=0,h=0;u<o.length;u++)for(var p=0;p<r;p++,h++)l[h]=E(e)}if(i!==1&&i!==8)throw new Error("Invalid bit depth (".concat(i,")"));for(var f=a-1|0,m=0,h=0;m<o.length;m++){var v=o[m]|0,x=m>f||v>f;if(!c||x)for(var p=0;p<r;p++,h++)R(e,l[h]);else for(var p=0,b=v|0;p<r;p++,h++)for(var y=l[h],S=ke(e,y),g=0,F=0;g<y;g++){var w=S[g];if(w>128){var C=S[++g];w=256-w|0;for(var k=0;k<=w&&F<n;k=k+1|0,F=F+1|0)c[b]=C,b=b+a|0}else if(w<128)for(var k=0;k<=w&&F<n;k=k+1|0,F=F+1|0)c[b]=S[++g],b=b+a|0}}}function Re(e,t,n,r,i){r===void 0&&(r=!0),i===void 0&&(i=!1);var a=L(e);if(i){if(a!==0)throw new Error("Sizes larger than 4GB are not supported");a=L(e)}if(!(a<=0&&r)){var o=e.offset+a;if(o>e.view.byteLength)throw new Error("Section exceeds file size");var s=n(function(){return o-e.offset});for(e.offset!==o&&(e.offset>o?Ir(e,"Exceeded section limits"):Ir(e,"Unread section data"));a%t;)a++,o++;return e.offset=o,s}}function ye(e){var t=E(e);switch(t){case 0:{var n=E(e)/257,r=E(e)/257,i=E(e)/257;return R(e,2),{r:n,g:r,b:i}}case 1:{var a=E(e)/65535,o=E(e)/65535,i=E(e)/65535;return R(e,2),{h:a,s:o,b:i}}case 2:{var s=E(e)/257,c=E(e)/257,l=E(e)/257,u=E(e)/257;return{c:s,m:c,y:l,k:u}}case 7:{var h=Q(e)/1e4,p=Q(e),f=Q(e),m=p<0?p/12800:p/12700,i=f<0?f/12800:f/12700;return R(e,2),{l:h,a:m,b:i}}case 8:{var u=E(e)*255/1e4;return R(e,6),{k:u}}default:throw new Error("Invalid color space")}}var is=[void 0,"outer bevel","inner bevel","emboss","pillow emboss","stroke emboss"];function In(e){return pn(e,"8BIM"),Mn[se(e)]||"normal"}function En(e,t){G(e,"8BIM"),G(e,Ka[t]||"norm")}function wn(e){return T(e)/255}function Ln(e,t){B(e,Math.round(t*255)|0)}function Dc(e){var t=E(e);if(t!==0)throw new Error("Invalid effects layer version: ".concat(t));for(var n=E(e),r={},i=0;i<n;i++){pn(e,"8BIM");var a=se(e);switch(a){case"cmnS":{var o=L(e),s=L(e),c=!!T(e);if(R(e,2),o!==7||s!==0||!c)throw new Error("Invalid effects common state");break}case"dsdw":case"isdw":{var l=L(e),u=L(e);if(l!==41&&l!==51)throw new Error("Invalid shadow size: ".concat(l));if(u!==0&&u!==2)throw new Error("Invalid shadow version: ".concat(u));var o=De(e);De(e);var h=De(e),p=De(e),f=ye(e),m=In(e),v=!!T(e),x=!!T(e),b=wn(e);l>=51&&ye(e);var y={size:{units:"Pixels",value:o},distance:{units:"Pixels",value:p},angle:h,color:f,blendMode:m,enabled:v,useGlobalLight:x,opacity:b};a==="dsdw"?r.dropShadow=[y]:r.innerShadow=[y];break}case"oglw":{var l=L(e),S=L(e);if(l!==32&&l!==42)throw new Error("Invalid outer glow size: ".concat(l));if(S!==0&&S!==2)throw new Error("Invalid outer glow version: ".concat(S));var o=De(e);De(e);var f=ye(e),m=In(e),v=!!T(e),b=wn(e);l>=42&&ye(e),r.outerGlow={size:{units:"Pixels",value:o},color:f,blendMode:m,enabled:v,opacity:b};break}case"iglw":{var l=L(e),g=L(e);if(l!==32&&l!==43)throw new Error("Invalid inner glow size: ".concat(l));if(g!==0&&g!==2)throw new Error("Invalid inner glow version: ".concat(g));var o=De(e);De(e);var f=ye(e),m=In(e),v=!!T(e),b=wn(e);l>=43&&(T(e),ye(e)),r.innerGlow={size:{units:"Pixels",value:o},color:f,blendMode:m,enabled:v,opacity:b};break}case"bevl":{var l=L(e),F=L(e);if(l!==58&&l!==78)throw new Error("Invalid bevel size: ".concat(l));if(F!==0&&F!==2)throw new Error("Invalid bevel version: ".concat(F));var h=De(e),w=De(e),o=De(e),C=In(e),k=In(e),O=ye(e),A=ye(e),M=is[T(e)]||"inner bevel",j=wn(e),U=wn(e),v=!!T(e),x=!!T(e),W=T(e)?"down":"up";l>=78&&(ye(e),ye(e)),r.bevel={size:{units:"Pixels",value:o},angle:h,strength:w,highlightBlendMode:C,shadowBlendMode:k,highlightColor:O,shadowColor:A,style:M,highlightOpacity:j,shadowOpacity:U,enabled:v,useGlobalLight:x,direction:W};break}case"sofi":{var o=L(e),q=L(e);if(o!==34)throw new Error("Invalid effects solid fill info size: ".concat(o));if(q!==2)throw new Error("Invalid effects solid fill info version: ".concat(q));var m=In(e),f=ye(e),b=wn(e),v=!!T(e);ye(e),r.solidFill=[{blendMode:m,color:f,opacity:b,enabled:v}];break}default:throw new Error("Invalid effect type: '".concat(a,"'"))}}return r}function ma(e,t){var n;D(e,51),D(e,2),Oe(e,t.size&&t.size.value||0),Oe(e,0),Oe(e,t.angle||0),Oe(e,t.distance&&t.distance.value||0),xe(e,t.color),En(e,t.blendMode),B(e,t.enabled?1:0),B(e,t.useGlobalLight?1:0),Ln(e,(n=t.opacity)!==null&&n!==void 0?n:1),xe(e,t.color)}function Tc(e,t){var n,r,i,a,o,s,c=(n=t.dropShadow)===null||n===void 0?void 0:n[0],l=(r=t.innerShadow)===null||r===void 0?void 0:r[0],u=t.outerGlow,h=t.innerGlow,p=t.bevel,f=(i=t.solidFill)===null||i===void 0?void 0:i[0],m=1;if(c&&m++,l&&m++,u&&m++,h&&m++,p&&m++,f&&m++,I(e,0),I(e,m),G(e,"8BIM"),G(e,"cmnS"),D(e,7),D(e,0),B(e,1),ie(e,2),c&&(G(e,"8BIM"),G(e,"dsdw"),ma(e,c)),l&&(G(e,"8BIM"),G(e,"isdw"),ma(e,l)),u&&(G(e,"8BIM"),G(e,"oglw"),D(e,42),D(e,2),Oe(e,((a=u.size)===null||a===void 0?void 0:a.value)||0),Oe(e,0),xe(e,u.color),En(e,u.blendMode),B(e,u.enabled?1:0),Ln(e,u.opacity||0),xe(e,u.color)),h&&(G(e,"8BIM"),G(e,"iglw"),D(e,43),D(e,2),Oe(e,((o=h.size)===null||o===void 0?void 0:o.value)||0),Oe(e,0),xe(e,h.color),En(e,h.blendMode),B(e,h.enabled?1:0),Ln(e,h.opacity||0),B(e,0),xe(e,h.color)),p){G(e,"8BIM"),G(e,"bevl"),D(e,78),D(e,2),Oe(e,p.angle||0),Oe(e,p.strength||0),Oe(e,((s=p.size)===null||s===void 0?void 0:s.value)||0),En(e,p.highlightBlendMode),En(e,p.shadowBlendMode),xe(e,p.highlightColor),xe(e,p.shadowColor);var v=is.indexOf(p.style);B(e,v<=0?1:v),Ln(e,p.highlightOpacity||0),Ln(e,p.shadowOpacity||0),B(e,p.enabled?1:0),B(e,p.useGlobalLight?1:0),B(e,p.direction==="down"?1:0),xe(e,p.highlightColor),xe(e,p.shadowColor)}f&&(G(e,"8BIM"),G(e,"sofi"),D(e,34),D(e,2),En(e,f.blendMode),xe(e,f.color),Ln(e,f.opacity||0),B(e,f.enabled?1:0),xe(e,f.color))}function ga(e){return e===32||e===10||e===13||e===9}function ba(e){return e>=48&&e<=57||e===46||e===45}function as(e){var t=0;function n(){for(;t<e.length&&ga(e[t]);)t++}function r(){var y=e[t];return t++,y===92&&(y=e[t],t++),y}function i(){var y="";if(e[t]===41)return t++,y;if(e[t]!==254||e[t+1]!==255)throw new Error("Invalid utf-16 BOM");for(t+=2;t<e.length&&e[t]!==41;){var S=r(),g=r(),F=S<<8|g;y+=String.fromCharCode(F)}return t++,y}var a=null,o=[];function s(y){o.length?(c(y),o.push(y)):(o.push(y),a=y)}function c(y){if(!o.length)throw new Error("Invalid data");var S=o[o.length-1];if(typeof S=="string")o[o.length-2][S]=y,u();else if(Array.isArray(S))S.push(y);else throw new Error("Invalid data")}function l(y){o.length||s({});var S=o[o.length-1];if(S&&typeof S=="string")c(y==="nil"?null:"/".concat(y));else if(S&&typeof S=="object")o.push(y);else throw new Error("Invalid data")}function u(){if(!o.length)throw new Error("Invalid data");o.pop()}n();for(var h=e.length;h>0&&e[h-1]===0;)h--;for(;t<h;){var p=t,f=e[p];if(f===60&&e[p+1]===60)t+=2,s({});else if(f===62&&e[p+1]===62)t+=2,u();else if(f===47){t+=1;for(var m=t;t<e.length&&!ga(e[t]);)t++;for(var v="",x=m;x<t;x++)v+=String.fromCharCode(e[x]);l(v)}else if(f===40)t+=1,c(i());else if(f===91)t+=1,s([]);else if(f===93)t+=1,u();else if(f===110&&e[p+1]===117&&e[p+2]===108&&e[p+3]===108)t+=4,c(null);else if(f===116&&e[p+1]===114&&e[p+2]===117&&e[p+3]===101)t+=4,c(!0);else if(f===102&&e[p+1]===97&&e[p+2]===108&&e[p+3]===115&&e[p+4]===101)t+=5,c(!1);else if(ba(f)){for(var b="";t<e.length&&ba(e[t]);)b+=String.fromCharCode(e[t]),t++;c(parseFloat(b))}else t+=1,console.log("Invalid token '".concat(String.fromCharCode(f),"' (").concat(f,") at ").concat(t));n()}return a}var Oc=["Axis","XY","Zone","WordSpacing","FirstLineIndent","GlyphSpacing","StartIndent","EndIndent","SpaceBefore","SpaceAfter","LetterSpacing","Values","GridSize","GridLeading","PointBase","BoxBounds","TransformPoint0","TransformPoint1","TransformPoint2","FontSize","Leading","HorizontalScale","VerticalScale","BaselineShift","Tsume","OutlineWidth","AutoLeading"],Mc=["RunLengthArray"];function Rc(e,t){t===void 0&&(t=!1);var n=new Uint8Array(1024),r=0,i=0;function a(y){if(r>=n.length){var S=new Uint8Array(n.length*2);S.set(n),n=S}n[r]=y,r++}function o(y){for(var S=0;S<y.length;S++)a(y.charCodeAt(S))}function s(){if(t)o(" ");else for(var y=0;y<i;y++)o("	")}function c(y,S){s(),o("/".concat(y)),m(S,y,!0),t||o(`
`)}function l(y){return y.toString()}function u(y){return y.toFixed(5).replace(/(\d)0+$/g,"$1").replace(/^0+\.([1-9])/g,".$1").replace(/^-0+\.0(\d)/g,"-.0$1")}function h(y,S){var g=S&&Oc.indexOf(S)!==-1||(y|0)!==y;return g?u(y):l(y)}function p(y){var S=Object.keys(y);return S.indexOf("98")!==-1&&S.unshift.apply(S,S.splice(S.indexOf("99"),1)),S.indexOf("99")!==-1&&S.unshift.apply(S,S.splice(S.indexOf("99"),1)),S}function f(y){(y===40||y===41||y===92)&&a(92),a(y)}function m(y,S,g){g===void 0&&(g=!1);function F(){g?o(" "):s()}if(y===null)F(),o(t?"/nil":"null");else if(typeof y=="number")F(),o(h(y,S));else if(typeof y=="boolean")F(),o(y?"true":"false");else if(typeof y=="string")if(F(),(S==="99"||S==="98")&&y.charAt(0)==="/")o(y);else{o("("),a(254),a(255);for(var w=0;w<y.length;w++){var C=y.charCodeAt(w);f(C>>8&255),f(C&255)}o(")")}else if(Array.isArray(y))if(F(),y.every(function(X){return typeof X=="number"})){o("[");for(var k=Mc.indexOf(S)!==-1,O=0,A=y;O<A.length;O++){var M=A[O];o(" "),o(k?h(M):u(M))}o(" ]")}else{o("["),t||o(`
`);for(var j=0,U=y;j<U.length;j++){var M=U[j];m(M,S),t||o(`
`)}s(),o("]")}else if(typeof y=="object"){g&&!t&&o(`
`),s(),o("<<"),t||o(`
`),i++;for(var W=0,q=p(y);W<q.length;W++){var V=q[W];c(V,y[V])}i--,s(),o(">>")}}if(t){if(typeof e=="object")for(var v=0,x=p(e);v<x.length;v++){var b=x[v];c(b,e[b])}}else o(`

`),m(e);return n.slice(0,r)}var ve=function(){return ve=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ve.apply(this,arguments)},os={name:"MyriadPro-Regular",script:0,type:0,synthetic:0},Pt={justification:"left",firstLineIndent:0,startIndent:0,endIndent:0,spaceBefore:0,spaceAfter:0,autoHyphenate:!0,hyphenatedWordSize:6,preHyphen:2,postHyphen:2,consecutiveHyphens:8,zone:36,wordSpacing:[.8,1,1.33],letterSpacing:[0,0,0],glyphSpacing:[1,1,1],autoLeading:1.2,leadingType:0,hanging:!1,burasagari:!1,kinsokuOrder:0,everyLineComposer:!1},Bc={font:os,fontSize:12,fauxBold:!1,fauxItalic:!1,autoLeading:!0,leading:0,horizontalScale:1,verticalScale:1,tracking:0,autoKerning:!0,kerning:0,baselineShift:0,fontCaps:0,fontBaseline:0,underline:!1,strikethrough:!1,ligatures:!0,dLigatures:!1,baselineDirection:2,tsume:0,styleRunAlignment:2,language:0,noBreak:!1,fillColor:{r:0,g:0,b:0},strokeColor:{r:0,g:0,b:0},fillFlag:!0,strokeFlag:!1,fillFirst:!0,yUnderline:1,outlineWidth:1,characterDirection:0,hindiNumbers:!1,kashida:1,diacriticPos:2},_c={isOn:!1,show:!1,size:18,leading:22,color:{r:0,g:0,b:255},leadingFillColor:{r:0,g:0,b:255},alignLineHeightToGridFlags:!1},Rr=["justification","firstLineIndent","startIndent","endIndent","spaceBefore","spaceAfter","autoHyphenate","hyphenatedWordSize","preHyphen","postHyphen","consecutiveHyphens","zone","wordSpacing","letterSpacing","glyphSpacing","autoLeading","leadingType","hanging","burasagari","kinsokuOrder","everyLineComposer"],Br=["font","fontSize","fauxBold","fauxItalic","autoLeading","leading","horizontalScale","verticalScale","tracking","autoKerning","kerning","baselineShift","fontCaps","fontBaseline","underline","strikethrough","ligatures","dLigatures","baselineDirection","tsume","styleRunAlignment","language","noBreak","fillColor","strokeColor","fillFlag","strokeFlag","fillFirst","yUnderline","outlineWidth","characterDirection","hindiNumbers","kashida","diacriticPos"],ss=["none","crisp","strong","smooth","sharp"],ls=["left","right","center","justify-left","justify-right","justify-center","justify-all"];function cs(e){return e.substring(0,1).toUpperCase()+e.substring(1)}function Nc(e){var t=e.Values;switch(e.Type){case 0:return{k:t[1]*255};case 1:return t[0]===1?{r:t[1]*255,g:t[2]*255,b:t[3]*255}:{r:t[1]*255,g:t[2]*255,b:t[3]*255,a:t[0]*255};case 2:return{c:t[1]*255,m:t[2]*255,y:t[3]*255,k:t[4]*255};default:throw new Error("Unknown color type in text layer")}}function Lr(e){if(e){if("r"in e)return{Type:1,Values:["a"in e?e.a/255:1,e.r/255,e.g/255,e.b/255]};if("c"in e)return{Type:2,Values:[1,e.c/255,e.m/255,e.y/255,e.k/255]};if("k"in e)return{Type:0,Values:[1,e.k/255]};throw new Error("Invalid color type in text layer")}else return{Type:1,Values:[0,0,0,0]}}function ya(e,t){if(!e||!t||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Sa(e,t){if(!e||!t)return!1;for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];if(e[i]!==t[i])return!1}for(var a=0,o=Object.keys(t);a<o.length;a++){var i=o[a];if(e[i]!==t[i])return!1}return!0}function zc(e,t){for(var n=0;n<e.length;n++)if(e[n].name===t.name)return n;return e.push(t),e.length-1}function us(e,t,n){for(var r={},i=0,a=t;i<a.length;i++){var o=a[i],s=cs(o);e[s]!==void 0&&(o==="justification"?r[o]=ls[e[s]]:o==="font"?r[o]=n[e[s]]:o==="fillColor"||o==="strokeColor"?r[o]=Nc(e[s]):r[o]=e[s])}return r}function fs(e,t,n){for(var r,i={},a=0,o=t;a<o.length;a++){var s=o[a],c=cs(s);e[s]!==void 0&&(s==="justification"?i[c]=ls.indexOf((r=e[s])!==null&&r!==void 0?r:"left"):s==="font"?i[c]=zc(n,e[s]):s==="fillColor"||s==="strokeColor"?i[c]=Lr(e[s]):i[c]=e[s])}return i}function Uc(e,t){return us(e,Rr,t)}function Gc(e,t){return us(e,Br,t)}function At(e,t){return fs(e,Rr,t)}function lr(e,t){return fs(e,Br,t)}function xa(e,t,n){if(t.length){for(var r=function(s){var c=t[0].style[s];if(c!==void 0){var l=!1;Array.isArray(c)?l=t.every(function(v){return ya(v.style[s],c)}):typeof c=="object"?l=t.every(function(v){return Sa(v.style[s],c)}):l=t.every(function(v){return v.style[s]===c}),l&&(e[s]=c)}var u=e[s];if(u!==void 0)for(var h=0,p=t;h<p.length;h++){var f=p[h],m=!1;Array.isArray(c)?m=ya(f.style[s],c):typeof c=="object"?m=Sa(f.style[s],c):m=f.style[s]===c,m&&delete f.style[s]}},i=0,a=n;i<a.length;i++){var o=a[i];r(o)}t.every(function(s){return Object.keys(s.style).length===0})&&(t.length=0)}}function Vc(e){for(var t,n,r,i,a,o,s=e.EngineDict,c=e.ResourceDict,l=c.FontSet.map(function(w){return{name:w.Name,script:w.Script,type:w.FontType,synthetic:w.Synthetic}}),u=s.Editor.Text.replace(/\r/g,`
`),h=0;/\n$/.test(u);)u=u.substring(0,u.length-1),h++;var p={text:u,antiAlias:(t=ss[s.AntiAlias])!==null&&t!==void 0?t:"smooth",useFractionalGlyphWidths:!!s.UseFractionalGlyphWidths,superscriptSize:c.SuperscriptSize,superscriptPosition:c.SuperscriptPosition,subscriptSize:c.SubscriptSize,subscriptPosition:c.SubscriptPosition,smallCapSize:c.SmallCapSize},f=(o=(a=(i=(r=(n=s.Rendered)===null||n===void 0?void 0:n.Shapes)===null||r===void 0?void 0:r.Children)===null||i===void 0?void 0:i[0])===null||a===void 0?void 0:a.Cookie)===null||o===void 0?void 0:o.Photoshop;f&&(p.shapeType=f.ShapeType===1?"box":"point",f.PointBase&&(p.pointBase=f.PointBase),f.BoxBounds&&(p.boxBounds=f.BoxBounds));var m=s.ParagraphRun;p.paragraphStyle={},p.paragraphStyleRuns=[];for(var v=0;v<m.RunArray.length;v++){var x=m.RunArray[v],b=m.RunLengthArray[v],y=Uc(x.ParagraphSheet.Properties,l);p.paragraphStyleRuns.push({length:b,style:y})}for(var S=h;p.paragraphStyleRuns.length&&S>0;S--)--p.paragraphStyleRuns[p.paragraphStyleRuns.length-1].length===0&&p.paragraphStyleRuns.pop();xa(p.paragraphStyle,p.paragraphStyleRuns,Rr),p.paragraphStyleRuns.length||delete p.paragraphStyleRuns;var g=s.StyleRun;p.style={},p.styleRuns=[];for(var v=0;v<g.RunArray.length;v++){var F=g.RunLengthArray[v],y=Gc(g.RunArray[v].StyleSheet.StyleSheetData,l);y.font||(y.font=l[0]),p.styleRuns.push({length:F,style:y})}for(var S=h;p.styleRuns.length&&S>0;S--)--p.styleRuns[p.styleRuns.length-1].length===0&&p.styleRuns.pop();return xa(p.style,p.styleRuns,Br),p.styleRuns.length||delete p.styleRuns,p}function Hc(e){var t,n,r,i,a,o,s,c,l,u,h,p,f="".concat((e.text||"").replace(/\r?\n/g,"\r"),"\r"),m=[{name:"AdobeInvisFont",script:0,type:0,synthetic:0}],v=((t=e.style)===null||t===void 0?void 0:t.font)||((r=(n=e.styleRuns)===null||n===void 0?void 0:n.find(function(Z){return Z.style.font}))===null||r===void 0?void 0:r.style.font)||os,x=[],b=[],y=e.paragraphStyleRuns;if(y&&y.length){for(var S=f.length,g=0,F=y;g<F.length;g++){var w=F[g],C=Math.min(w.length,S);S-=C,C&&(S===1&&w===y[y.length-1]&&(C++,S--),b.push(C),x.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:At(ve(ve(ve({},Pt),e.paragraphStyle),w.style),m)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}S&&(b.push(S),x.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:At(ve(ve({},Pt),e.paragraphStyle),m)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}))}else for(var k=0,O=0;k<f.length;k++)f.charCodeAt(k)===13&&(b.push(k-O+1),x.push({ParagraphSheet:{DefaultStyleSheet:0,Properties:At(ve(ve({},Pt),e.paragraphStyle),m)},Adjustments:{Axis:[1,0,1],XY:[0,0]}}),O=k+1);for(var A=lr(ve(ve({},Bc),{font:v}),m),M=e.styleRuns||[{length:f.length,style:e.style||{}}],j=[],U=[],W=f.length,q=0,V=M;q<V.length;q++){var X=V[q],C=Math.min(X.length,W);W-=C,C&&(W===1&&X===M[M.length-1]&&(C++,W--),U.push(C),j.push({StyleSheet:{StyleSheetData:lr(ve(ve({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),X.style),m)}}))}W&&M.length&&(U.push(W),j.push({StyleSheet:{StyleSheetData:lr(ve({kerning:0,autoKerning:!0,fillColor:{r:0,g:0,b:0}},e.style),m)}}));var le=ve(ve({},_c),e.gridInfo),he=e.orientation==="vertical"?2:0,$=e.orientation==="vertical"?1:0,me=e.shapeType==="box"?1:0,Ge={ShapeType:me};me===0?Ge.PointBase=e.pointBase||[0,0]:Ge.BoxBounds=e.boxBounds||[0,0,0,0],Ge.Base={ShapeType:me,TransformPoint0:[1,0],TransformPoint1:[0,1],TransformPoint2:[0,0]};var cn={KinsokuSet:[{Name:"PhotoshopKinsokuHard",NoStart:"?!)]},.:;",NoEnd:"([{",Keep:"",Hanging:".,"},{Name:"PhotoshopKinsokuSoft",NoStart:"",NoEnd:"",Keep:"",Hanging:".,"}],MojiKumiSet:[{InternalName:"Photoshop6MojiKumiSet1"},{InternalName:"Photoshop6MojiKumiSet2"},{InternalName:"Photoshop6MojiKumiSet3"},{InternalName:"Photoshop6MojiKumiSet4"}],TheNormalStyleSheet:0,TheNormalParagraphSheet:0,ParagraphSheetSet:[{Name:"Normal RGB",DefaultStyleSheet:0,Properties:At(ve(ve({},Pt),e.paragraphStyle),m)}],StyleSheetSet:[{Name:"Normal RGB",StyleSheetData:A}],FontSet:m.map(function(Z){return{Name:Z.name,Script:Z.script||0,FontType:Z.type||0,Synthetic:Z.synthetic||0}}),SuperscriptSize:(i=e.superscriptSize)!==null&&i!==void 0?i:.583,SuperscriptPosition:(a=e.superscriptPosition)!==null&&a!==void 0?a:.333,SubscriptSize:(o=e.subscriptSize)!==null&&o!==void 0?o:.583,SubscriptPosition:(s=e.subscriptPosition)!==null&&s!==void 0?s:.333,SmallCapSize:(c=e.smallCapSize)!==null&&c!==void 0?c:.7},J={EngineDict:{Editor:{Text:f},ParagraphRun:{DefaultRunData:{ParagraphSheet:{DefaultStyleSheet:0,Properties:{}},Adjustments:{Axis:[1,0,1],XY:[0,0]}},RunArray:x,RunLengthArray:b,IsJoinable:1},StyleRun:{DefaultRunData:{StyleSheet:{StyleSheetData:{}}},RunArray:j,RunLengthArray:U,IsJoinable:2},GridInfo:{GridIsOn:!!le.isOn,ShowGrid:!!le.show,GridSize:(l=le.size)!==null&&l!==void 0?l:18,GridLeading:(u=le.leading)!==null&&u!==void 0?u:22,GridColor:Lr(le.color),GridLeadingFillColor:Lr(le.color),AlignLineHeightToGridFlags:!!le.alignLineHeightToGridFlags},AntiAlias:ss.indexOf((h=e.antiAlias)!==null&&h!==void 0?h:"sharp"),UseFractionalGlyphWidths:(p=e.useFractionalGlyphWidths)!==null&&p!==void 0?p:!0,Rendered:{Version:1,Shapes:{WritingDirection:he,Children:[{ShapeType:me,Procession:$,Lines:{WritingDirection:he,Children:[]},Cookie:{Photoshop:Ge}}]}}},ResourceDict:ve({},cn),DocumentResources:ve({},cn)};return J}var cr={0:{uproot:!0,children:{0:{name:"Type"},1:{name:"Values"}}}},_r={0:{name:"Font"},1:{name:"FontSize"},2:{name:"FauxBold"},3:{name:"FauxItalic"},4:{name:"AutoLeading"},5:{name:"Leading"},6:{name:"HorizontalScale"},7:{name:"VerticalScale"},8:{name:"Tracking"},9:{name:"BaselineShift"},11:{name:"Kerning?"},12:{name:"FontCaps"},13:{name:"FontBaseline"},15:{name:"Strikethrough?"},16:{name:"Underline?"},18:{name:"Ligatures"},19:{name:"DLigatures"},23:{name:"Fractions"},24:{name:"Ordinals"},28:{name:"StylisticAlternates"},30:{name:"OldStyle?"},35:{name:"BaselineDirection"},38:{name:"Language"},52:{name:"NoBreak"},53:{name:"FillColor",children:cr},54:{name:"StrokeColor",children:cr},55:{children:{99:{uproot:!0}}},79:{children:cr}},ur={0:{name:"Justification"},1:{name:"FirstLineIndent"},2:{name:"StartIndent"},3:{name:"EndIndent"},4:{name:"SpaceBefore"},5:{name:"SpaceAfter"},7:{name:"AutoLeading"},9:{name:"AutoHyphenate"},10:{name:"HyphenatedWordSize"},11:{name:"PreHyphen"},12:{name:"PostHyphen"},13:{name:"ConsecutiveHyphens?"},14:{name:"Zone"},15:{name:"HypenateCapitalizedWords"},17:{name:"WordSpacing"},18:{name:"LetterSpacing"},19:{name:"GlyphSpacing"},32:{name:"StyleSheet",children:_r}},Fa={name:"StyleSheetData",children:_r},jc={0:{name:"ResourceDict",children:{1:{name:"FontSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},2:{name:"FontType"}}}}}}}}},2:{name:"2",children:{}},3:{name:"MojiKumiSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"InternalName"}}}}}}},4:{name:"KinsokuSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},5:{uproot:!0,children:{0:{name:"NoStart"},1:{name:"NoEnd"},2:{name:"Keep"},3:{name:"Hanging"},4:{name:"Name"}}}}}}}}},5:{name:"StyleSheetSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},6:Fa}}}}}},6:{name:"ParagraphSheetSet",children:{0:{uproot:!0,children:{0:{uproot:!0,children:{0:{name:"Name"},5:{name:"Properties",children:ur},6:{name:"DefaultStyleSheet"}}}}}}},8:{name:"TextFrameSet",children:{0:{uproot:!0,children:{0:{name:"path",children:{0:{name:"name"},1:{name:"bezierCurve",children:{0:{name:"controlPoints"}}},2:{name:"data",children:{0:{name:"type"},1:{name:"orientation"},2:{name:"frameMatrix"},4:{name:"4"},6:{name:"textRange"},7:{name:"rowGutter"},8:{name:"columnGutter"},9:{name:"9"},10:{name:"baselineAlignment",children:{0:{name:"flag"},1:{name:"min"}}},11:{name:"pathData",children:{1:{name:"1"},0:{name:"reversed"},2:{name:"2"},3:{name:"3"},4:{name:"spacing"},5:{name:"5"},6:{name:"6"},7:{name:"7"},18:{name:"18"}}},12:{name:"12"},13:{name:"13"}}},3:{name:"3"},97:{name:"uuid"}}}}}}},9:{name:"Predefined",children:{0:{children:{0:{uproot:!0}}},1:{children:{0:{uproot:!0}}}}}}},1:{name:"EngineDict",children:{0:{name:"0",children:{3:{name:"SuperscriptSize"},4:{name:"SuperscriptPosition"},5:{name:"SubscriptSize"},6:{name:"SubscriptPosition"},7:{name:"SmallCapSize"},8:{name:"UseFractionalGlyphWidths"},15:{children:{0:{uproot:!0}}}}},1:{name:"Editors?",children:{0:{name:"Editor",children:{0:{name:"Text"},5:{name:"ParagraphRun",children:{0:{name:"RunArray",children:{0:{name:"ParagraphSheet",children:{0:{uproot:!0,children:{0:{name:"0"},5:{name:"5",children:ur},6:{name:"6"}}}}},1:{name:"RunLength"}}}}},6:{name:"StyleRun",children:{0:{name:"RunArray",children:{0:{name:"StyleSheet",children:{0:{uproot:!0,children:{6:Fa}}}},1:{name:"RunLength"}}}}}}},1:{name:"FontVectorData ???"}}},2:{name:"StyleSheet",children:_r},3:{name:"ParagraphSheet",children:ur}}}};function Zn(e,t){var n,r;if(e===null)return e;if(Array.isArray(e))return e.map(function(c){return Zn(c,t)});if(typeof e!="object")return e;for(var i={},a=0,o=Object.keys(e);a<o.length;a++){var s=o[a];if(t[s])if(t[s].uproot){s!=="99"&&(i=Zn(e[s],(n=t[s].children)!==null&&n!==void 0?n:{})),e[99]&&(i._type=e[99]);break}else i[t[s].name||s]=Zn(e[s],(r=t[s].children)!==null&&r!==void 0?r:{});else s==="99"?i._type=e[s]:i[s]=Zn(e[s],{})}return i}function Wc(e){return Zn(e,jc)}var d=function(){return d=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},d.apply(this,arguments)},Te="abcdefghijklmnopqrstuvwxyz",Ut={};function N(e,t,n,r){var i={key:e,has:t,read:n,write:r};Ut[i.key]=i}function Nn(e,t){Ut[e]=Ut[t]}function ae(e){return function(t){return t[e]!==void 0}}function fr(e){if(L(e))throw new Error("Resource size above 4 GB limit at ".concat(e.offset.toString(16)));return L(e)}function dr(e,t){D(e,0),D(e,t)}N("TySh",ae("text"),function(e,t,n){if(Q(e)!==1)throw new Error("Invalid TySh version");for(var r=[],i=0;i<6;i++)r.push(ze(e));if(Q(e)!==50)throw new Error("Invalid TySh text version");var a=Y(e);if(Q(e)!==1)throw new Error("Invalid TySh warp version");var o=Y(e);if(t.text={transform:r,left:je(e),top:je(e),right:je(e),bottom:je(e),text:a["Txt "].replace(/\r/g,`
`),index:a.TextIndex||0,gridding:qi.decode(a.textGridding),antiAlias:$i.decode(a.AntA),orientation:nt.decode(a.Ornt),warp:{style:Ar.decode(o.warpStyle),value:o.warpValue||0,perspective:o.warpPerspective||0,perspectiveOther:o.warpPerspectiveOther||0,rotate:nt.decode(o.warpRotate)}},a.bounds&&(t.text.bounds=Gi(a.bounds)),a.boundingBox&&(t.text.boundingBox=Gi(a.boundingBox)),a.EngineData){var s=as(a.EngineData),c=Vc(s);t.text=d(d({},t.text),c)}R(e,n())},function(e,t){var n=t.text,r=n.warp||{},i=n.transform||[1,0,0,1,0,0],a=d(d(d({"Txt ":(n.text||"").replace(/\r?\n/g,"\r"),textGridding:qi.encode(n.gridding),Ornt:nt.encode(n.orientation),AntA:$i.encode(n.antiAlias)},n.bounds?{bounds:Vi(n.bounds)}:{}),n.boundingBox?{boundingBox:Vi(n.boundingBox)}:{}),{TextIndex:n.index||0,EngineData:Rc(Hc(n))});te(e,1);for(var o=0;o<6;o++)Ye(e,i[o]);te(e,50),K(e,"","TxLr",a,"text"),te(e,1),K(e,"","warp",Gt(r)),We(e,n.left),We(e,n.top),We(e,n.right),We(e,n.bottom)});N("SoCo",function(e){return e.vectorFill!==void 0&&e.vectorStroke===void 0&&e.vectorFill.type==="color"},function(e,t){var n=Y(e);t.vectorFill=lt(n)},function(e,t){var n=ct(t.vectorFill).descriptor;K(e,"","null",n)});N("GdFl",function(e){return e.vectorFill!==void 0&&e.vectorStroke===void 0&&(e.vectorFill.type==="solid"||e.vectorFill.type==="noise")},function(e,t,n){var r=Y(e);t.vectorFill=lt(r),R(e,n())},function(e,t){var n=ct(t.vectorFill).descriptor;K(e,"","null",n)});N("PtFl",function(e){return e.vectorFill!==void 0&&e.vectorStroke===void 0&&e.vectorFill.type==="pattern"},function(e,t){var n=Y(e);t.vectorFill=lt(n)},function(e,t){var n=ct(t.vectorFill).descriptor;K(e,"","null",n)});N("vscg",function(e){return e.vectorFill!==void 0&&e.vectorStroke!==void 0},function(e,t,n){se(e);var r=Y(e);t.vectorFill=lt(r),R(e,n())},function(e,t){var n=ct(t.vectorFill),r=n.descriptor,i=n.key;G(e,i),K(e,"","null",r)});function Xc(e,t,n){var r=Ve(e)*n,i=Ve(e)*t,a=Ve(e)*n,o=Ve(e)*t,s=Ve(e)*n,c=Ve(e)*t;return[i,r,o,a,c,s]}function qc(e,t,n,r){He(e,t[1]/r),He(e,t[0]/n),He(e,t[3]/r),He(e,t[2]/n),He(e,t[5]/r),He(e,t[4]/n)}var ds=["exclude","combine","subtract","intersect"];function $c(e,t,n,r,i){for(var a=e.offset+i,o=t.paths,s=void 0;a-e.offset>=26;){var c=E(e);switch(c){case 0:case 3:{E(e);var l=Q(e),u=E(e);R(e,18),s={open:c===3,knots:[],fillRule:u===2?"non-zero":"even-odd"},l!==-1&&(s.operation=ds[l]),o.push(s);break}case 1:case 2:case 4:case 5:s.knots.push({linked:c===1||c===4,points:Xc(e,n,r)});break;case 6:R(e,24);break;case 7:{var h=Ve(e),p=Ve(e),f=Ve(e),m=Ve(e),v=Ve(e);R(e,4),t.clipboard={top:h,left:p,bottom:f,right:m,resolution:v};break}case 8:t.fillStartsWithAllPixels=!!E(e),R(e,22);break;default:throw new Error("Invalid vmsk section")}}return o}N("vmsk",ae("vectorMask"),function(e,t,n,r){var i=r.width,a=r.height;if(L(e)!==3)throw new Error("Invalid vmsk version");t.vectorMask={paths:[]};var o=t.vectorMask,s=L(e);o.invert=(s&1)!==0,o.notLink=(s&2)!==0,o.disable=(s&4)!==0,$c(e,o,i,a,n()),R(e,n())},function(e,t,n){var r=n.width,i=n.height,a=t.vectorMask,o=(a.invert?1:0)|(a.notLink?2:0)|(a.disable?4:0);D(e,3),D(e,o),I(e,6),ie(e,24);var s=a.clipboard;s&&(I(e,7),He(e,s.top),He(e,s.left),He(e,s.bottom),He(e,s.right),He(e,s.resolution),ie(e,4)),I(e,8),I(e,a.fillStartsWithAllPixels?1:0),ie(e,22);for(var c=0,l=a.paths;c<l.length;c++){var u=l[c];I(e,u.open?3:0),I(e,u.knots.length),I(e,u.operation?ds.indexOf(u.operation):-1),I(e,u.fillRule==="non-zero"?2:1),ie(e,18);for(var h=u.open?4:1,p=u.open?5:2,f=0,m=u.knots;f<m.length;f++){var v=m[f],x=v.linked,b=v.points;I(e,x?h:p),qc(e,b,r,i)}}});Nn("vsms","vmsk");N("vowv",ae("vowv"),function(e,t){t.vowv=L(e)},function(e,t){D(e,t.vowv)});N("vogk",ae("vectorOrigination"),function(e,t,n){if(_(e)!==1)throw new Error("Invalid vogk version");var r=Y(e);t.vectorOrigination={keyDescriptorList:[]};for(var i=0,a=r.keyDescriptorList;i<a.length;i++){var o=a[i],s={};o.keyShapeInvalidated!=null&&(s.keyShapeInvalidated=o.keyShapeInvalidated),o.keyOriginType!=null&&(s.keyOriginType=o.keyOriginType),o.keyOriginResolution!=null&&(s.keyOriginResolution=o.keyOriginResolution),o.keyOriginShapeBBox&&(s.keyOriginShapeBoundingBox={top:dn(o.keyOriginShapeBBox["Top "]),left:dn(o.keyOriginShapeBBox.Left),bottom:dn(o.keyOriginShapeBBox.Btom),right:dn(o.keyOriginShapeBBox.Rght)});var c=o.keyOriginRRectRadii;c&&(s.keyOriginRRectRadii={topRight:re(c.topRight),topLeft:re(c.topLeft),bottomLeft:re(c.bottomLeft),bottomRight:re(c.bottomRight)});var l=o.keyOriginBoxCorners;l&&(s.keyOriginBoxCorners=[{x:l.rectangleCornerA.Hrzn,y:l.rectangleCornerA.Vrtc},{x:l.rectangleCornerB.Hrzn,y:l.rectangleCornerB.Vrtc},{x:l.rectangleCornerC.Hrzn,y:l.rectangleCornerC.Vrtc},{x:l.rectangleCornerD.Hrzn,y:l.rectangleCornerD.Vrtc}]);var u=o.Trnf;u&&(s.transform=[u.xx,u.xy,u.yx,u.yy,u.tx,u.ty]),t.vectorOrigination.keyDescriptorList.push(s)}R(e,n())},function(e,t){for(var n=t.vectorOrigination,r={keyDescriptorList:[]},i=0;i<n.keyDescriptorList.length;i++){var a=n.keyDescriptorList[i];r.keyDescriptorList.push({});var o=r.keyDescriptorList[r.keyDescriptorList.length-1];a.keyOriginType!=null&&(o.keyOriginType=a.keyOriginType),a.keyOriginResolution!=null&&(o.keyOriginResolution=a.keyOriginResolution);var s=a.keyOriginRRectRadii;s&&(o.keyOriginRRectRadii={unitValueQuadVersion:1,topRight:ce(s.topRight,"topRight"),topLeft:ce(s.topLeft,"topLeft"),bottomLeft:ce(s.bottomLeft,"bottomLeft"),bottomRight:ce(s.bottomRight,"bottomRight")});var c=a.keyOriginShapeBoundingBox;c&&(o.keyOriginShapeBBox={unitValueQuadVersion:1,"Top ":ce(c.top,"top"),Left:ce(c.left,"left"),Btom:ce(c.bottom,"bottom"),Rght:ce(c.right,"right")});var l=a.keyOriginBoxCorners;l&&l.length===4&&(o.keyOriginBoxCorners={rectangleCornerA:{Hrzn:l[0].x,Vrtc:l[0].y},rectangleCornerB:{Hrzn:l[1].x,Vrtc:l[1].y},rectangleCornerC:{Hrzn:l[2].x,Vrtc:l[2].y},rectangleCornerD:{Hrzn:l[3].x,Vrtc:l[3].y}});var u=a.transform;u&&u.length===6&&(o.Trnf={xx:u[0],xy:u[1],yx:u[2],yy:u[3],tx:u[4],ty:u[5]}),a.keyShapeInvalidated!=null&&(o.keyShapeInvalidated=a.keyShapeInvalidated),o.keyOriginIndex=i}H(e,1),K(e,"","null",r)});N("lmfx",function(e){return e.effects!==void 0&&ms(e.effects)},function(e,t,n){var r=L(e);if(r!==0)throw new Error("Invalid lmfx version");var i=Y(e);t.effects=st(i,!!e.logMissingFeatures),R(e,n())},function(e,t,n,r){var i=ot(t.effects,!!r.logMissingFeatures,!0);D(e,0),K(e,"","null",i)});N("lrFX",ae("effects"),function(e,t,n){t.effects||(t.effects=Dc(e)),R(e,n())},function(e,t){Tc(e,t.effects)});N("luni",ae("name"),function(e,t,n){if(n()>4){var r=L(e);n()>=r*2?t.name=Or(e,r):e.logDevFeatures&&e.log("name in luni section is too long")}else e.logDevFeatures&&e.log("empty luni section");R(e,n())},function(e,t){Me(e,t.name)});N("lnsr",ae("nameSource"),function(e,t){return t.nameSource=se(e)},function(e,t){return G(e,t.nameSource)});N("lyid",ae("id"),function(e,t){t.id=L(e)},function(e,t,n,r){for(var i=t.id;r.layerIds.has(i);)i+=100;D(e,i),r.layerIds.add(i),r.layerToId.set(t,i)});N("lsct",ae("sectionDivider"),function(e,t,n){t.sectionDivider={type:L(e)},n()&&(pn(e,"8BIM"),t.sectionDivider.key=se(e)),n()&&(t.sectionDivider.subType=L(e))},function(e,t){D(e,t.sectionDivider.type),t.sectionDivider.key&&(G(e,"8BIM"),G(e,t.sectionDivider.key),t.sectionDivider.subType!==void 0&&D(e,t.sectionDivider.subType))});Nn("lsdk","lsct");N("clbl",ae("blendClippendElements"),function(e,t){t.blendClippendElements=!!T(e),R(e,3)},function(e,t){B(e,t.blendClippendElements?1:0),ie(e,3)});N("infx",ae("blendInteriorElements"),function(e,t){t.blendInteriorElements=!!T(e),R(e,3)},function(e,t){B(e,t.blendInteriorElements?1:0),ie(e,3)});N("knko",ae("knockout"),function(e,t){t.knockout=!!T(e),R(e,3)},function(e,t){B(e,t.knockout?1:0),ie(e,3)});N("lmgm",ae("layerMaskAsGlobalMask"),function(e,t){t.layerMaskAsGlobalMask=!!T(e),R(e,3)},function(e,t){B(e,t.layerMaskAsGlobalMask?1:0),ie(e,3)});N("lspf",ae("protected"),function(e,t){var n=L(e);t.protected={transparency:(n&1)!==0,composite:(n&2)!==0,position:(n&4)!==0},n&8&&(t.protected.artboards=!0)},function(e,t){var n=(t.protected.transparency?1:0)|(t.protected.composite?2:0)|(t.protected.position?4:0)|(t.protected.artboards?8:0);D(e,n)});N("lclr",ae("layerColor"),function(e,t){var n=E(e);R(e,6),t.layerColor=wi[n]},function(e,t){var n=wi.indexOf(t.layerColor);I(e,n===-1?0:n),ie(e,6)});N("shmd",function(e){return e.timestamp!==void 0||e.animationFrames!==void 0||e.animationFrameFlags!==void 0||e.timeline!==void 0||e.comps!==void 0},function(e,t,n){for(var r=L(e),i=function(o){pn(e,"8BIM");var s=se(e);T(e),R(e,3),Re(e,1,function(c){if(s==="cust"){var l=Y(e);l.layerTime!==void 0&&(t.timestamp=l.layerTime)}else if(s==="mlst"){var l=Y(e);t.animationFrames=[];for(var u=0;u<l.LaSt.length;u++){var h=l.LaSt[u],p={frames:h.FrLs};h.enab!==void 0&&(p.enable=h.enab),h.Ofst&&(p.offset=Jn(h.Ofst)),h.FXRf&&(p.referencePoint=Jn(h.FXRf)),h.Lefx&&(p.effects=st(h.Lefx,!!e.logMissingFeatures)),h.blendOptions&&h.blendOptions.Opct&&(p.opacity=oe(h.blendOptions.Opct)),t.animationFrames.push(p)}}else if(s==="mdyn"){E(e);var f=T(e),m=T(e);t.animationFrameFlags={propagateFrameOne:!f,unifyLayerPosition:(m&1)!==0,unifyLayerStyle:(m&2)!==0,unifyLayerVisibility:(m&4)!==0}}else if(s==="tmln"){var l=Y(e),v=l.timeScope,x={start:Ee(v.Strt),duration:Ee(v.duration),inTime:Ee(v.inTime),outTime:Ee(v.outTime),autoScope:l.autoScope,audioLevel:l.audioLevel};l.trackList&&(x.tracks=lo(l.trackList,!!e.logMissingFeatures)),t.timeline=x}else if(s==="cmls"){var l=Y(e);t.comps={settings:[]},l.origFXRefPoint&&(t.comps.originalEffectsReferencePoint={x:l.origFXRefPoint.Hrzn,y:l.origFXRefPoint.Vrtc});for(var b=0,y=l.layerSettings;b<y.length;b++){var S=y[b];t.comps.settings.push({compList:S.compList});var g=t.comps.settings[t.comps.settings.length-1];"enab"in S&&(g.enabled=S.enab),S.Ofst&&(g.offset={x:S.Ofst.Hrzn,y:S.Ofst.Vrtc}),S.FXRefPoint&&(g.effectsReferencePoint={x:S.FXRefPoint.Hrzn,y:S.FXRefPoint.Vrtc})}}else if(s==="extn"){var l=Y(e);e.logMissingFeatures&&e.log('Unhandled "shmd" section key',s)}else e.logMissingFeatures&&e.log('Unhandled "shmd" section key',s);R(e,c())})},a=0;a<r;a++)i();R(e,n())},function(e,t,n,r){var i=t.animationFrames,a=t.animationFrameFlags,o=t.timestamp,s=t.timeline,c=t.comps,l=0;i&&l++,a&&l++,s&&l++,o!==void 0&&l++,c&&l++,D(e,l),i&&(G(e,"8BIM"),G(e,"mlst"),B(e,0),ie(e,3),bn(e,2,function(){for(var u,h={LaID:(u=t.id)!==null&&u!==void 0?u:0,LaSt:[]},p=0;p<i.length;p++){var f=i[p],m={};f.enable!==void 0&&(m.enab=f.enable),m.FrLs=f.frames,f.offset&&(m.Ofst=Qn(f.offset)),f.referencePoint&&(m.FXRf=Qn(f.referencePoint)),f.effects&&(m.Lefx=ot(f.effects,!1,!1)),f.opacity!==void 0&&(m.blendOptions={Opct:Se(f.opacity)}),h.LaSt.push(m)}K(e,"","null",h)},!0)),a&&(G(e,"8BIM"),G(e,"mdyn"),B(e,0),ie(e,3),bn(e,2,function(){I(e,0),B(e,a.propagateFrameOne?0:15),B(e,(a.unifyLayerPosition?1:0)|(a.unifyLayerStyle?2:0)|(a.unifyLayerVisibility?4:0))})),s&&(G(e,"8BIM"),G(e,"tmln"),B(e,0),ie(e,3),bn(e,2,function(){var u={Vrsn:1,timeScope:{Vrsn:1,Strt:s.start,duration:s.duration,inTime:s.inTime,outTime:s.outTime},autoScope:s.autoScope,audioLevel:s.audioLevel};s.tracks&&(u.trackList=co(s.tracks));var h=r.layerToId.get(t)||t.id;if(!h)throw new Error("You need to provide layer.id value whan writing document with animations");u.LyrI=h,K(e,"","null",u,"anim")},!0)),o!==void 0&&(G(e,"8BIM"),G(e,"cust"),B(e,0),ie(e,3),bn(e,2,function(){var u={layerTime:o};K(e,"","metadata",u)},!0)),c&&(G(e,"8BIM"),G(e,"cmls"),B(e,0),ie(e,3),bn(e,2,function(){var u=r.layerToId.get(t)||t.id;if(!u)throw new Error("You need to provide layer.id value whan writing document with layer comps");var h={};c.originalEffectsReferencePoint&&(h.origFXRefPoint={Hrzn:c.originalEffectsReferencePoint.x,Vrtc:c.originalEffectsReferencePoint.y}),h.LyrI=u,h.layerSettings=[];for(var p=0,f=c.settings;p<f.length;p++){var m=f[p],v={};m.enabled!==void 0&&(v.enab=m.enabled),m.offset&&(v.Ofst={Hrzn:m.offset.x,Vrtc:m.offset.y}),m.effectsReferencePoint&&(v.FXRefPoint={Hrzn:m.effectsReferencePoint.x,Vrtc:m.effectsReferencePoint.y}),v.compList=m.compList,h.layerSettings.push(v)}K(e,"","null",h)},!0))});N("PxSc",function(){return!1},function(e,t){var n=Y(e,!0);n.pixelSourceType===1986285651?t.pixelSource={type:"vdPS",origin:{x:n.origin.Hrzn,y:n.origin.Vrtc},interpretation:{interpretAlpha:n.interpretation.interpretAlpha.split(".")[1],profile:n.interpretation.profile},frameReader:{type:"QTFR",link:{name:n.frameReader["Lnk "]["Nm  "],fullPath:n.frameReader["Lnk "].fullPath,originalPath:n.frameReader["Lnk "].originalPath,relativePath:n.frameReader["Lnk "].relPath,alias:n.frameReader["Lnk "].alis},mediaDescriptor:n.frameReader.mediaDescriptor},showAlteredVideo:n.showAlteredVideo}:e.log("Unknown pixelSourceType")},function(e,t){var n=t.pixelSource,r={_name:"",_classID:"PixelSource",pixelSourceType:1986285651,descVersion:1,origin:{Hrzn:n.origin.x,Vrtc:n.origin.y},interpretation:{_name:"",_classID:"footageInterpretation",Vrsn:1,interpretAlpha:"alphaInterpretation.".concat(n.interpretation.interpretAlpha),profile:n.interpretation.profile},frameReader:{_name:"",_classID:"FrameReader",frameReaderType:1364477522,descVersion:1,"Lnk ":{_name:"",_classID:"ExternalFileLink",descVersion:2,"Nm  ":n.frameReader.link.name,fullPath:n.frameReader.link.fullPath,originalPath:n.frameReader.link.originalPath,alis:n.frameReader.link.alias,relPath:n.frameReader.link.relativePath},mediaDescriptor:n.frameReader.mediaDescriptor},showAlteredVideo:n.showAlteredVideo};K(e,"","PixelSource",r)});N("vstk",ae("vectorStroke"),function(e,t,n){var r=Y(e);t.vectorStroke={strokeEnabled:r.strokeEnabled,fillEnabled:r.fillEnabled,lineWidth:re(r.strokeStyleLineWidth),lineDashOffset:re(r.strokeStyleLineDashOffset),miterLimit:r.strokeStyleMiterLimit,lineCapType:ea.decode(r.strokeStyleLineCapType),lineJoinType:na.decode(r.strokeStyleLineJoinType),lineAlignment:ta.decode(r.strokeStyleLineAlignment),scaleLock:r.strokeStyleScaleLock,strokeAdjust:r.strokeStyleStrokeAdjust,lineDashSet:r.strokeStyleLineDashSet.map(re),blendMode:Ne.decode(r.strokeStyleBlendMode),opacity:oe(r.strokeStyleOpacity),content:lt(r.strokeStyleContent),resolution:r.strokeStyleResolution},R(e,n())},function(e,t){var n,r,i,a=t.vectorStroke,o={strokeStyleVersion:2,strokeEnabled:!!a.strokeEnabled,fillEnabled:!!a.fillEnabled,strokeStyleLineWidth:a.lineWidth||{value:3,units:"Points"},strokeStyleLineDashOffset:a.lineDashOffset||{value:0,units:"Points"},strokeStyleMiterLimit:(n=a.miterLimit)!==null&&n!==void 0?n:100,strokeStyleLineCapType:ea.encode(a.lineCapType),strokeStyleLineJoinType:na.encode(a.lineJoinType),strokeStyleLineAlignment:ta.encode(a.lineAlignment),strokeStyleScaleLock:!!a.scaleLock,strokeStyleStrokeAdjust:!!a.strokeAdjust,strokeStyleLineDashSet:a.lineDashSet||[],strokeStyleBlendMode:Ne.encode(a.blendMode),strokeStyleOpacity:Se((r=a.opacity)!==null&&r!==void 0?r:1),strokeStyleContent:ct(a.content||{type:"color",color:{r:0,g:0,b:0}}).descriptor,strokeStyleResolution:(i=a.resolution)!==null&&i!==void 0?i:72};K(e,"","strokeStyle",o)});N("artb",ae("artboard"),function(e,t,n){var r=Y(e),i=r.artboardRect;t.artboard={rect:{top:i["Top "],left:i.Left,bottom:i.Btom,right:i.Rght},guideIndices:r.guideIndeces,presetName:r.artboardPresetName,color:Xe(r["Clr "]),backgroundType:r.artboardBackgroundType},R(e,n())},function(e,t){var n,r=t.artboard,i=r.rect,a={artboardRect:{"Top ":i.top,Left:i.left,Btom:i.bottom,Rght:i.right},guideIndeces:r.guideIndices||[],artboardPresetName:r.presetName||"","Clr ":qe(r.color),artboardBackgroundType:(n=r.backgroundType)!==null&&n!==void 0?n:1};K(e,"","artboard",a)});N("sn2P",ae("usingAlignedRendering"),function(e,t){return t.usingAlignedRendering=!!L(e)},function(e,t){return D(e,t.usingAlignedRendering?1:0)});var An=["unknown","vector","raster","image stack"];function hs(e){var t,n,r,i,a,o,s=d(d({style:Ar.decode(e.warpStyle)},e.warpValues?{values:e.warpValues}:{value:e.warpValue||0}),{perspective:e.warpPerspective||0,perspectiveOther:e.warpPerspectiveOther||0,rotate:nt.decode(e.warpRotate),bounds:e.bounds&&{top:dn(e.bounds["Top "]),left:dn(e.bounds.Left),bottom:dn(e.bounds.Btom),right:dn(e.bounds.Rght)},uOrder:e.uOrder,vOrder:e.vOrder});(e.deformNumRows!=null||e.deformNumCols!=null)&&(s.deformNumRows=e.deformNumRows,s.deformNumCols=e.deformNumCols);var c=e.customEnvelopeWarp;if(c){s.customEnvelopeWarp={meshPoints:[]};for(var l=((t=c.meshPoints.find(function(p){return p.type==="Hrzn"}))===null||t===void 0?void 0:t.values)||[],u=((n=c.meshPoints.find(function(p){return p.type==="Vrtc"}))===null||n===void 0?void 0:n.values)||[],h=0;h<l.length;h++)s.customEnvelopeWarp.meshPoints.push({x:l[h],y:u[h]});(c.quiltSliceX||c.quiltSliceY)&&(s.customEnvelopeWarp.quiltSliceX=((i=(r=c.quiltSliceX)===null||r===void 0?void 0:r[0])===null||i===void 0?void 0:i.values)||[],s.customEnvelopeWarp.quiltSliceY=((o=(a=c.quiltSliceY)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.values)||[])}return s}function Nr(e){var t,n;return e.deformNumCols!=null||e.deformNumRows!=null||((t=e.customEnvelopeWarp)===null||t===void 0?void 0:t.quiltSliceX)||((n=e.customEnvelopeWarp)===null||n===void 0?void 0:n.quiltSliceY)}function Gt(e){var t=e.bounds,n=d(d({warpStyle:Ar.encode(e.style)},e.values?{warpValues:e.values}:{warpValue:e.value||0}),{warpPerspective:e.perspective||0,warpPerspectiveOther:e.perspectiveOther||0,warpRotate:nt.encode(e.rotate),bounds:{"Top ":ce(t&&t.top||{units:"Pixels",value:0},"bounds.top"),Left:ce(t&&t.left||{units:"Pixels",value:0},"bounds.left"),Btom:ce(t&&t.bottom||{units:"Pixels",value:0},"bounds.bottom"),Rght:ce(t&&t.right||{units:"Pixels",value:0},"bounds.right")},uOrder:e.uOrder||0,vOrder:e.vOrder||0}),r=Nr(e);if(r){var i=n;i.deformNumRows=e.deformNumRows||0,i.deformNumCols=e.deformNumCols||0}var a=e.customEnvelopeWarp;if(a){var o=a.meshPoints||[];if(r){var i=n;i.customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",quiltSliceX:[{type:"quiltSliceX",values:a.quiltSliceX||[]}],quiltSliceY:[{type:"quiltSliceY",values:a.quiltSliceY||[]}],meshPoints:[{type:"Hrzn",values:o.map(function(c){return c.x})},{type:"Vrtc",values:o.map(function(c){return c.y})}]}}else n.customEnvelopeWarp={_name:"",_classID:"customEnvelopeWarp",meshPoints:[{type:"Hrzn",values:o.map(function(s){return s.x})},{type:"Vrtc",values:o.map(function(s){return s.y})}]}}return n}N("PlLd",ae("placedLayer"),function(e,t,n){if(se(e)!=="plcL")throw new Error("Invalid PlLd signature");if(_(e)!==3)throw new Error("Invalid PlLd version");var r=hn(e,1),i=_(e),a=_(e);_(e);var o=_(e);if(!An[o])throw new Error("Invalid PlLd type");for(var s=[],c=0;c<8;c++)s.push(ze(e));var l=_(e);if(l!==0)throw new Error("Invalid Warp version ".concat(l));var u=Y(e);t.placedLayer=t.placedLayer||{id:r,type:An[o],pageNumber:i,totalPages:a,transform:s,warp:hs(u)},R(e,n())},function(e,t){var n=t.placedLayer;if(G(e,"plcL"),H(e,3),!n.id||typeof n.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(n.id))throw new Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if(On(e,n.id,1),H(e,1),H(e,1),H(e,16),An.indexOf(n.type)===-1)throw new Error("Invalid placedLayer type");H(e,An.indexOf(n.type));for(var r=0;r<8;r++)Ye(e,n.transform[r]);H(e,0);var i=ps(n),a=Nr(i),o=a?"quiltWarp":"warp";K(e,"",o,Gt(i),o)});function Zc(e){return new Float32Array(e.buffer.slice(e.byteOffset),0,e.byteLength/4)}function Yc(e){return new Uint32Array(e.buffer.slice(e.byteOffset),0,e.byteLength/4)}function hr(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}function Bt(e){for(var t=[],n=0;n<e.length;n+=2)t.push({x:e[n],y:e[n+1]});return t}function Vn(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n].x,e[n].y);return t}function Ca(e){return Bt(Zc(e))}function Hn(e){return{x:re(e.Hrzn),y:re(e.Vrtc)}}function jn(e){return{_name:"",_classID:"Pnt ",Hrzn:ce(e.x,"x"),Vrtc:ce(e.y,"y")}}function Kc(e,t){var n={name:e["Nm  "],opacity:oe(e.blendOptions.Opct),blendMode:Ne.decode(e.blendOptions["Md  "]),enabled:e.enab,hasOptions:e.hasoptions,foregroundColor:Xe(e.FrgC),backgroundColor:Xe(e.BckC)};if("Fltr"in e)switch(e.Fltr._classID){case"boxblur":return d(d({},n),{type:"box blur",filter:{radius:re(e.Fltr["Rds "])}});case"GsnB":return d(d({},n),{type:"gaussian blur",filter:{radius:re(e.Fltr["Rds "])}});case"MtnB":return d(d({},n),{type:"motion blur",filter:{angle:e.Fltr.Angl,distance:re(e.Fltr.Dstn)}});case"RdlB":return d(d({},n),{type:"radial blur",filter:{amount:e.Fltr.Amnt,method:Io.decode(e.Fltr.BlrM),quality:wo.decode(e.Fltr.BlrQ)}});case"shapeBlur":return d(d({},n),{type:"shape blur",filter:{radius:re(e.Fltr["Rds "]),customShape:{name:e.Fltr.customShape["Nm  "],id:e.Fltr.customShape.Idnt}}});case"SmrB":return d(d({},n),{type:"smart blur",filter:{radius:e.Fltr["Rds "],threshold:e.Fltr.Thsh,quality:Lo.decode(e.Fltr.SmBQ),mode:Eo.decode(e.Fltr.SmBM)}});case"surfaceBlur":return d(d({},n),{type:"surface blur",filter:{radius:re(e.Fltr["Rds "]),threshold:e.Fltr.Thsh}});case"Dspl":return d(d({},n),{type:"displace",filter:{horizontalScale:e.Fltr.HrzS,verticalScale:e.Fltr.VrtS,displacementMap:Po.decode(e.Fltr.DspM),undefinedAreas:Tn.decode(e.Fltr.UndA),displacementFile:{signature:e.Fltr.DspF.sig,path:e.Fltr.DspF.path}}});case"Pnch":return d(d({},n),{type:"pinch",filter:{amount:e.Fltr.Amnt}});case"Plr ":return d(d({},n),{type:"polar coordinates",filter:{conversion:Ao.decode(e.Fltr.Cnvr)}});case"Rple":return d(d({},n),{type:"ripple",filter:{amount:e.Fltr.Amnt,size:Do.decode(e.Fltr.RplS)}});case"Shr ":return d(d({},n),{type:"shear",filter:{shearPoints:e.Fltr.ShrP.map(function(s){return{x:s.Hrzn,y:s.Vrtc}}),shearStart:e.Fltr.ShrS,shearEnd:e.Fltr.ShrE,undefinedAreas:Tn.decode(e.Fltr.UndA)}});case"Sphr":return d(d({},n),{type:"spherize",filter:{amount:e.Fltr.Amnt,mode:To.decode(e.Fltr.SphM)}});case"Twrl":return d(d({},n),{type:"twirl",filter:{angle:e.Fltr.Angl}});case"Wave":return d(d({},n),{type:"wave",filter:{numberOfGenerators:e.Fltr.NmbG,type:Oo.decode(e.Fltr.Wvtp),wavelength:{min:e.Fltr.WLMn,max:e.Fltr.WLMx},amplitude:{min:e.Fltr.AmMn,max:e.Fltr.AmMx},scale:{x:e.Fltr.SclH,y:e.Fltr.SclV},randomSeed:e.Fltr.RndS,undefinedAreas:Tn.decode(e.Fltr.UndA)}});case"ZgZg":return d(d({},n),{type:"zigzag",filter:{amount:e.Fltr.Amnt,ridges:e.Fltr.NmbR,style:Mo.decode(e.Fltr.ZZTy)}});case"AdNs":return d(d({},n),{type:"add noise",filter:{amount:oe(e.Fltr.Nose),distribution:Ro.decode(e.Fltr.Dstr),monochromatic:e.Fltr.Mnch,randomSeed:e.Fltr.FlRs}});case"DstS":return d(d({},n),{type:"dust and scratches",filter:{radius:e.Fltr["Rds "],threshold:e.Fltr.Thsh}});case"Mdn ":return d(d({},n),{type:"median",filter:{radius:re(e.Fltr["Rds "])}});case"denoise":return d(d({},n),{type:"reduce noise",filter:{preset:e.Fltr.preset,removeJpegArtifact:e.Fltr.removeJPEGArtifact,reduceColorNoise:oe(e.Fltr.ClNs),sharpenDetails:oe(e.Fltr.Shrp),channelDenoise:e.Fltr.channelDenoise.map(function(s){return d({channels:s.Chnl.map(tt.decode),amount:s.Amnt},s.EdgF?{preserveDetails:s.EdgF}:{})})}});case"ClrH":return d(d({},n),{type:"color halftone",filter:{radius:e.Fltr["Rds "],angle1:e.Fltr.Ang1,angle2:e.Fltr.Ang2,angle3:e.Fltr.Ang3,angle4:e.Fltr.Ang4}});case"Crst":return d(d({},n),{type:"crystallize",filter:{cellSize:e.Fltr.ClSz,randomSeed:e.Fltr.FlRs}});case"Mztn":return d(d({},n),{type:"mezzotint",filter:{type:Bo.decode(e.Fltr.MztT),randomSeed:e.Fltr.FlRs}});case"Msc ":return d(d({},n),{type:"mosaic",filter:{cellSize:re(e.Fltr.ClSz)}});case"Pntl":return d(d({},n),{type:"pointillize",filter:{cellSize:e.Fltr.ClSz,randomSeed:e.Fltr.FlRs}});case"Clds":return d(d({},n),{type:"clouds",filter:{randomSeed:e.Fltr.FlRs}});case"DfrC":return d(d({},n),{type:"difference clouds",filter:{randomSeed:e.Fltr.FlRs}});case"Fbrs":return d(d({},n),{type:"fibers",filter:{variance:e.Fltr.Vrnc,strength:e.Fltr.Strg,randomSeed:e.Fltr.RndS}});case"LnsF":return d(d({},n),{type:"lens flare",filter:{brightness:e.Fltr.Brgh,position:{x:e.Fltr.FlrC.Hrzn,y:e.Fltr.FlrC.Vrtc},lensType:_o.decode(e.Fltr["Lns "])}});case"smartSharpen":return d(d({},n),{type:"smart sharpen",filter:{amount:oe(e.Fltr.Amnt),radius:re(e.Fltr["Rds "]),threshold:e.Fltr.Thsh,angle:e.Fltr.Angl,moreAccurate:e.Fltr.moreAccurate,blur:No.decode(e.Fltr.blur),preset:e.Fltr.preset,shadow:{fadeAmount:oe(e.Fltr.sdwM.Amnt),tonalWidth:oe(e.Fltr.sdwM.Wdth),radius:e.Fltr.sdwM["Rds "]},highlight:{fadeAmount:oe(e.Fltr.hglM.Amnt),tonalWidth:oe(e.Fltr.hglM.Wdth),radius:e.Fltr.hglM["Rds "]}}});case"UnsM":return d(d({},n),{type:"unsharp mask",filter:{amount:oe(e.Fltr.Amnt),radius:re(e.Fltr["Rds "]),threshold:e.Fltr.Thsh}});case"Dfs ":return d(d({},n),{type:"diffuse",filter:{mode:zo.decode(e.Fltr["Md  "]),randomSeed:e.Fltr.FlRs}});case"Embs":return d(d({},n),{type:"emboss",filter:{angle:e.Fltr.Angl,height:e.Fltr.Hght,amount:e.Fltr.Amnt}});case"Extr":return d(d({},n),{type:"extrude",filter:{type:Uo.decode(e.Fltr.ExtT),size:e.Fltr.ExtS,depth:e.Fltr.ExtD,depthMode:Go.decode(e.Fltr.ExtR),randomSeed:e.Fltr.FlRs,solidFrontFaces:e.Fltr.ExtF,maskIncompleteBlocks:e.Fltr.ExtM}});case"Tls ":return d(d({},n),{type:"tiles",filter:{numberOfTiles:e.Fltr.TlNm,maximumOffset:e.Fltr.TlOf,fillEmptyAreaWith:Vo.decode(e.Fltr.FlCl),randomSeed:e.Fltr.FlRs}});case"TrcC":return d(d({},n),{type:"trace contour",filter:{level:e.Fltr["Lvl "],edge:Ho.decode(e.Fltr["Edg "])}});case"Wnd ":return d(d({},n),{type:"wind",filter:{method:jo.decode(e.Fltr.WndM),direction:Wo.decode(e.Fltr.Drct)}});case"Dntr":return d(d({},n),{type:"de-interlace",filter:{eliminate:Xo.decode(e.Fltr.IntE),newFieldsBy:qo.decode(e.Fltr.IntC)}});case"Cstm":return d(d({},n),{type:"custom",filter:{scale:e.Fltr["Scl "],offset:e.Fltr.Ofst,matrix:e.Fltr.Mtrx}});case"HghP":return d(d({},n),{type:"high pass",filter:{radius:re(e.Fltr["Rds "])}});case"Mxm ":return d(d({},n),{type:"maximum",filter:{radius:re(e.Fltr["Rds "])}});case"Mnm ":return d(d({},n),{type:"minimum",filter:{radius:re(e.Fltr["Rds "])}});case"Ofst":return d(d({},n),{type:"offset",filter:{horizontal:e.Fltr.Hrzn,vertical:e.Fltr.Vrtc,undefinedAreas:$o.decode(e.Fltr["Fl  "])}});case"rigidTransform":return d(d({},n),{type:"puppet",filter:{rigidType:e.Fltr.rigidType,bounds:[{x:e.Fltr.PuX0,y:e.Fltr.PuY0},{x:e.Fltr.PuX1,y:e.Fltr.PuY1},{x:e.Fltr.PuX2,y:e.Fltr.PuY2},{x:e.Fltr.PuX3,y:e.Fltr.PuY3}],puppetShapeList:e.Fltr.puppetShapeList.map(function(s){return{rigidType:s.rigidType,originalVertexArray:Ca(s.originalVertexArray),deformedVertexArray:Ca(s.deformedVertexArray),indexArray:Array.from(Yc(s.indexArray)),pinOffsets:Bt(s.pinOffsets),posFinalPins:Bt(s.posFinalPins),pinVertexIndices:s.pinVertexIndices,selectedPin:s.selectedPin,pinPosition:Bt(s.PinP),pinRotation:s.PnRt,pinOverlay:s.PnOv,pinDepth:s.PnDp,meshQuality:s.meshQuality,meshExpansion:s.meshExpansion,meshRigidity:s.meshRigidity,imageResolution:s.imageResolution,meshBoundaryPath:{pathComponents:s.meshBoundaryPath.pathComponents.map(function(c){return{shapeOperation:c.shapeOperation.split(".")[1],paths:c.SbpL.map(function(l){return{closed:l.Clsp,points:l["Pts "].map(function(u){return{anchor:Hn(u.Anch),forward:Hn(u["Fwd "]),backward:Hn(u["Bwd "]),smooth:u.Smoo}})}})}})}}})}});case"PbPl":{for(var r=[],i=e.Fltr,a=0;a<Te.length&&i["PN".concat(Te[a],"a")];a++)for(var o=0;o<Te.length&&i["PN".concat(Te[a]).concat(Te[o])];o++)r.push({name:i["PN".concat(Te[a]).concat(Te[o])],value:i["PF".concat(Te[a]).concat(Te[o])]});return d(d({},n),{type:"oil paint plugin",filter:{name:e.Fltr.KnNm,gpu:e.Fltr.GpuY,lighting:e.Fltr.LIWy,parameters:r}})}case"HsbP":return d(d({},n),{type:"hsb/hsl",filter:{inputMode:zt.decode(e.Fltr.Inpt),rowOrder:zt.decode(e.Fltr.Otpt)}});case"oilPaint":return d(d({},n),{type:"oil paint",filter:{lightingOn:e.Fltr.lightingOn,stylization:e.Fltr.stylization,cleanliness:e.Fltr.cleanliness,brushScale:e.Fltr.brushScale,microBrush:e.Fltr.microBrush,lightDirection:e.Fltr.LghD,specularity:e.Fltr.specularity}});case"LqFy":return d(d({},n),{type:"liquify",filter:{liquifyMesh:e.Fltr.LqMe}});case"perspectiveWarpTransform":return d(d({},n),{type:"perspective warp",filter:{vertices:e.Fltr.vertices.map(Hn),warpedVertices:e.Fltr.warpedVertices.map(Hn),quads:e.Fltr.quads.map(function(s){return s.indices})}});case"Crvs":return d(d({},n),{type:"curves",filter:d({presetKind:Zo.decode(e.Fltr.presetKind)},e.Fltr.Adjs?{adjustments:e.Fltr.Adjs.map(function(s){var c=s.Chnl.map(tt.decode);if(s["Crv "])return{channels:c,curve:s["Crv "].map(function(l){var u={x:l.Hrzn,y:l.Vrtc};return l.Cnty&&(u.curved=!0),u})};if(s.Mpng)return{channels:c,values:s.Mpng};throw new Error("Unknown curve adjustment")})}:{})});case"BrgC":return d(d({},n),{type:"brightness/contrast",filter:{brightness:e.Fltr.Brgh,contrast:e.Fltr.Cntr,useLegacy:!!e.Fltr.useLegacy}});default:if(t.throwForMissingFeatures)throw new Error("Unknown filter classId: ".concat(e.Fltr._classID));return}else switch(e.filterID){case 1098281575:return d(d({},n),{type:"average"});case 1114403360:return d(d({},n),{type:"blur"});case 1114403405:return d(d({},n),{type:"blur more"});case 1148416099:return d(d({},n),{type:"despeckle"});case 1180922912:return d(d({},n),{type:"facet"});case 1181902701:return d(d({},n),{type:"fragment"});case 1399353968:return d(d({},n),{type:"sharpen"});case 1399353925:return d(d({},n),{type:"sharpen edges"});case 1399353933:return d(d({},n),{type:"sharpen more"});case 1181639749:return d(d({},n),{type:"find edges"});case 1399616122:return d(d({},n),{type:"solarize"});case 1314149187:return d(d({},n),{type:"ntsc colors"});case 1231976050:return d(d({},n),{type:"invert"});default:if(t.throwForMissingFeatures)throw new Error("Unknown filterID: ".concat(e.filterID))}}function Jc(e,t){return{enabled:e.enab,validAtPosition:e.validAtPosition,maskEnabled:e.filterMaskEnable,maskLinked:e.filterMaskLinked,maskExtendWithWhite:e.filterMaskExtendWithWhite,list:e.filterFXList.map(function(n){return Kc(n,t)}).filter(function(n){return!!n})}}function Ze(e){return ce(e.radius,"radius")}function Qc(e){var t={_name:"",_classID:"filterFX","Nm  ":e.name,blendOptions:{_name:"",_classID:"blendOptions",Opct:_e(e.opacity),"Md  ":Ne.encode(e.blendMode)},enab:e.enabled,hasoptions:e.hasOptions,FrgC:qe(e.foregroundColor),BckC:qe(e.backgroundColor)};switch(e.type){case"average":return d(d({},t),{filterID:1098281575});case"blur":return d(d({},t),{filterID:1114403360});case"blur more":return d(d({},t),{filterID:1114403405});case"box blur":return d(d({},t),{Fltr:{_name:"Box Blur",_classID:"boxblur","Rds ":Ze(e.filter)},filterID:697});case"gaussian blur":return d(d({},t),{Fltr:{_name:"Gaussian Blur",_classID:"GsnB","Rds ":Ze(e.filter)},filterID:1198747202});case"motion blur":return d(d({},t),{Fltr:{_name:"Motion Blur",_classID:"MtnB",Angl:e.filter.angle,Dstn:ce(e.filter.distance,"distance")},filterID:1299476034});case"radial blur":return d(d({},t),{Fltr:{_name:"Radial Blur",_classID:"RdlB",Amnt:e.filter.amount,BlrM:Io.encode(e.filter.method),BlrQ:wo.encode(e.filter.quality)},filterID:1382313026});case"shape blur":return d(d({},t),{Fltr:{_name:"Shape Blur",_classID:"shapeBlur","Rds ":Ze(e.filter),customShape:{_name:"",_classID:"customShape","Nm  ":e.filter.customShape.name,Idnt:e.filter.customShape.id}},filterID:702});case"smart blur":return d(d({},t),{Fltr:{_name:"Smart Blur",_classID:"SmrB","Rds ":e.filter.radius,Thsh:e.filter.threshold,SmBQ:Lo.encode(e.filter.quality),SmBM:Eo.encode(e.filter.mode)},filterID:1399681602});case"surface blur":return d(d({},t),{Fltr:{_name:"Surface Blur",_classID:"surfaceBlur","Rds ":Ze(e.filter),Thsh:e.filter.threshold},filterID:701});case"displace":return d(d({},t),{Fltr:{_name:"Displace",_classID:"Dspl",HrzS:e.filter.horizontalScale,VrtS:e.filter.verticalScale,DspM:Po.encode(e.filter.displacementMap),UndA:Tn.encode(e.filter.undefinedAreas),DspF:{sig:e.filter.displacementFile.signature,path:e.filter.displacementFile.path}},filterID:1148416108});case"pinch":return d(d({},t),{Fltr:{_name:"Pinch",_classID:"Pnch",Amnt:e.filter.amount},filterID:1349411688});case"polar coordinates":return d(d({},t),{Fltr:{_name:"Polar Coordinates",_classID:"Plr ",Cnvr:Ao.encode(e.filter.conversion)},filterID:1349284384});case"ripple":return d(d({},t),{Fltr:{_name:"Ripple",_classID:"Rple",Amnt:e.filter.amount,RplS:Do.encode(e.filter.size)},filterID:1383099493});case"shear":return d(d({},t),{Fltr:{_name:"Shear",_classID:"Shr ",ShrP:e.filter.shearPoints.map(function(c){return{_name:"",_classID:"Pnt ",Hrzn:c.x,Vrtc:c.y}}),UndA:Tn.encode(e.filter.undefinedAreas),ShrS:e.filter.shearStart,ShrE:e.filter.shearEnd},filterID:1399353888});case"spherize":return d(d({},t),{Fltr:{_name:"Spherize",_classID:"Sphr",Amnt:e.filter.amount,SphM:To.encode(e.filter.mode)},filterID:1399875698});case"twirl":return d(d({},t),{Fltr:{_name:"Twirl",_classID:"Twrl",Angl:e.filter.angle},filterID:1417114220});case"wave":return d(d({},t),{Fltr:{_name:"Wave",_classID:"Wave",Wvtp:Oo.encode(e.filter.type),NmbG:e.filter.numberOfGenerators,WLMn:e.filter.wavelength.min,WLMx:e.filter.wavelength.max,AmMn:e.filter.amplitude.min,AmMx:e.filter.amplitude.max,SclH:e.filter.scale.x,SclV:e.filter.scale.y,UndA:Tn.encode(e.filter.undefinedAreas),RndS:e.filter.randomSeed},filterID:1466005093});case"zigzag":return d(d({},t),{Fltr:{_name:"ZigZag",_classID:"ZgZg",Amnt:e.filter.amount,NmbR:e.filter.ridges,ZZTy:Mo.encode(e.filter.style)},filterID:1516722791});case"add noise":return d(d({},t),{Fltr:{_name:"Add Noise",_classID:"AdNs",Dstr:Ro.encode(e.filter.distribution),Nose:_e(e.filter.amount),Mnch:e.filter.monochromatic,FlRs:e.filter.randomSeed},filterID:1097092723});case"despeckle":return d(d({},t),{filterID:1148416099});case"dust and scratches":return d(d({},t),{Fltr:{_name:"Dust & Scratches",_classID:"DstS","Rds ":e.filter.radius,Thsh:e.filter.threshold},filterID:1148417107});case"median":return d(d({},t),{Fltr:{_name:"Median",_classID:"Mdn ","Rds ":Ze(e.filter)},filterID:1298427424});case"reduce noise":return d(d({},t),{Fltr:{_name:"Reduce Noise",_classID:"denoise",ClNs:_e(e.filter.reduceColorNoise),Shrp:_e(e.filter.sharpenDetails),removeJPEGArtifact:e.filter.removeJpegArtifact,channelDenoise:e.filter.channelDenoise.map(function(c){return d({_name:"",_classID:"channelDenoiseParams",Chnl:c.channels.map(function(l){return tt.encode(l)}),Amnt:c.amount},c.preserveDetails?{EdgF:c.preserveDetails}:{})}),preset:e.filter.preset},filterID:633});case"color halftone":return d(d({},t),{Fltr:{_name:"Color Halftone",_classID:"ClrH","Rds ":e.filter.radius,Ang1:e.filter.angle1,Ang2:e.filter.angle2,Ang3:e.filter.angle3,Ang4:e.filter.angle4},filterID:1131180616});case"crystallize":return d(d({},t),{Fltr:{_name:"Crystallize",_classID:"Crst",ClSz:e.filter.cellSize,FlRs:e.filter.randomSeed},filterID:1131574132});case"facet":return d(d({},t),{filterID:1180922912});case"fragment":return d(d({},t),{filterID:1181902701});case"mezzotint":return d(d({},t),{Fltr:{_name:"Mezzotint",_classID:"Mztn",MztT:Bo.encode(e.filter.type),FlRs:e.filter.randomSeed},filterID:1299870830});case"mosaic":return d(d({},t),{Fltr:{_name:"Mosaic",_classID:"Msc ",ClSz:ce(e.filter.cellSize,"cellSize")},filterID:1299407648});case"pointillize":return d(d({},t),{Fltr:{_name:"Pointillize",_classID:"Pntl",ClSz:e.filter.cellSize,FlRs:e.filter.randomSeed},filterID:1349416044});case"clouds":return d(d({},t),{Fltr:{_name:"Clouds",_classID:"Clds",FlRs:e.filter.randomSeed},filterID:1131177075});case"difference clouds":return d(d({},t),{Fltr:{_name:"Difference Clouds",_classID:"DfrC",FlRs:e.filter.randomSeed},filterID:1147564611});case"fibers":return d(d({},t),{Fltr:{_name:"Fibers",_classID:"Fbrs",Vrnc:e.filter.variance,Strg:e.filter.strength,RndS:e.filter.randomSeed},filterID:1180856947});case"lens flare":return d(d({},t),{Fltr:{_name:"Lens Flare",_classID:"LnsF",Brgh:e.filter.brightness,FlrC:{_name:"",_classID:"Pnt ",Hrzn:e.filter.position.x,Vrtc:e.filter.position.y},"Lns ":_o.encode(e.filter.lensType)},filterID:1282306886});case"sharpen":return d(d({},t),{filterID:1399353968});case"sharpen edges":return d(d({},t),{filterID:1399353925});case"sharpen more":return d(d({},t),{filterID:1399353933});case"smart sharpen":return d(d({},t),{Fltr:{_name:"Smart Sharpen",_classID:"smartSharpen",Amnt:_e(e.filter.amount),"Rds ":Ze(e.filter),Thsh:e.filter.threshold,Angl:e.filter.angle,moreAccurate:e.filter.moreAccurate,blur:No.encode(e.filter.blur),preset:e.filter.preset,sdwM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:_e(e.filter.shadow.fadeAmount),Wdth:_e(e.filter.shadow.tonalWidth),"Rds ":e.filter.shadow.radius},hglM:{_name:"Parameters",_classID:"adaptCorrectTones",Amnt:_e(e.filter.highlight.fadeAmount),Wdth:_e(e.filter.highlight.tonalWidth),"Rds ":e.filter.highlight.radius}},filterID:698});case"unsharp mask":return d(d({},t),{Fltr:{_name:"Unsharp Mask",_classID:"UnsM",Amnt:_e(e.filter.amount),"Rds ":Ze(e.filter),Thsh:e.filter.threshold},filterID:1433301837});case"diffuse":return d(d({},t),{Fltr:{_name:"Diffuse",_classID:"Dfs ","Md  ":zo.encode(e.filter.mode),FlRs:e.filter.randomSeed},filterID:1147564832});case"emboss":return d(d({},t),{Fltr:{_name:"Emboss",_classID:"Embs",Angl:e.filter.angle,Hght:e.filter.height,Amnt:e.filter.amount},filterID:1164796531});case"extrude":return d(d({},t),{Fltr:{_name:"Extrude",_classID:"Extr",ExtS:e.filter.size,ExtD:e.filter.depth,ExtF:e.filter.solidFrontFaces,ExtM:e.filter.maskIncompleteBlocks,ExtT:Uo.encode(e.filter.type),ExtR:Go.encode(e.filter.depthMode),FlRs:e.filter.randomSeed},filterID:1165522034});case"find edges":return d(d({},t),{filterID:1181639749});case"solarize":return d(d({},t),{filterID:1399616122});case"tiles":return d(d({},t),{Fltr:{_name:"Tiles",_classID:"Tls ",TlNm:e.filter.numberOfTiles,TlOf:e.filter.maximumOffset,FlCl:Vo.encode(e.filter.fillEmptyAreaWith),FlRs:e.filter.randomSeed},filterID:1416393504});case"trace contour":return d(d({},t),{Fltr:{_name:"Trace Contour",_classID:"TrcC","Lvl ":e.filter.level,"Edg ":Ho.encode(e.filter.edge)},filterID:1416782659});case"wind":return d(d({},t),{Fltr:{_name:"Wind",_classID:"Wnd ",WndM:jo.encode(e.filter.method),Drct:Wo.encode(e.filter.direction)},filterID:1466852384});case"de-interlace":return d(d({},t),{Fltr:{_name:"De-Interlace",_classID:"Dntr",IntE:Xo.encode(e.filter.eliminate),IntC:qo.encode(e.filter.newFieldsBy)},filterID:1148089458});case"ntsc colors":return d(d({},t),{filterID:1314149187});case"invert":return d(d({},t),{filterID:1231976050});case"custom":return d(d({},t),{Fltr:{_name:"Custom",_classID:"Cstm","Scl ":e.filter.scale,Ofst:e.filter.offset,Mtrx:e.filter.matrix},filterID:1131639917});case"high pass":return d(d({},t),{Fltr:{_name:"High Pass",_classID:"HghP","Rds ":Ze(e.filter)},filterID:1214736464});case"maximum":return d(d({},t),{Fltr:{_name:"Maximum",_classID:"Mxm ","Rds ":Ze(e.filter)},filterID:1299737888});case"minimum":return d(d({},t),{Fltr:{_name:"Minimum",_classID:"Mnm ","Rds ":Ze(e.filter)},filterID:1299082528});case"offset":return d(d({},t),{Fltr:{_name:"Offset",_classID:"Ofst",Hrzn:e.filter.horizontal,Vrtc:e.filter.vertical,"Fl  ":$o.encode(e.filter.undefinedAreas)},filterID:1332114292});case"puppet":return d(d({},t),{Fltr:{_name:"Rigid Transform",_classID:"rigidTransform",null:["Ordn.Trgt"],rigidType:e.filter.rigidType,puppetShapeList:e.filter.puppetShapeList.map(function(c){return{_name:"",_classID:"puppetShape",rigidType:c.rigidType,VrsM:1,VrsN:0,originalVertexArray:hr(new Float32Array(Vn(c.originalVertexArray))),deformedVertexArray:hr(new Float32Array(Vn(c.deformedVertexArray))),indexArray:hr(new Uint32Array(c.indexArray)),pinOffsets:Vn(c.pinOffsets),posFinalPins:Vn(c.posFinalPins),pinVertexIndices:c.pinVertexIndices,PinP:Vn(c.pinPosition),PnRt:c.pinRotation,PnOv:c.pinOverlay,PnDp:c.pinDepth,meshQuality:c.meshQuality,meshExpansion:c.meshExpansion,meshRigidity:c.meshRigidity,imageResolution:c.imageResolution,meshBoundaryPath:{_name:"",_classID:"pathClass",pathComponents:c.meshBoundaryPath.pathComponents.map(function(l){return{_name:"",_classID:"PaCm",shapeOperation:"shapeOperation.".concat(l.shapeOperation),SbpL:l.paths.map(function(u){return{_name:"",_classID:"Sbpl",Clsp:u.closed,"Pts ":u.points.map(function(h){return{_name:"",_classID:"Pthp",Anch:jn(h.anchor),"Fwd ":jn(h.forward),"Bwd ":jn(h.backward),Smoo:h.smooth}})}})}})},selectedPin:c.selectedPin}}),PuX0:e.filter.bounds[0].x,PuX1:e.filter.bounds[1].x,PuX2:e.filter.bounds[2].x,PuX3:e.filter.bounds[3].x,PuY0:e.filter.bounds[0].y,PuY1:e.filter.bounds[1].y,PuY2:e.filter.bounds[2].y,PuY3:e.filter.bounds[3].y},filterID:991});case"oil paint plugin":{for(var n={},r=0;r<e.filter.parameters.length;r++){var i=e.filter.parameters[r],a=i.name,o=i.value,s="".concat(Te[Math.floor(r/Te.length)]).concat(Te[r%Te.length]);n["PN".concat(s)]=a,n["PT".concat(s)]=0,n["PF".concat(s)]=o}return d(d({},t),{Fltr:d({_name:"Oil Paint Plugin",_classID:"PbPl",KnNm:e.filter.name,GpuY:e.filter.gpu,LIWy:e.filter.lighting,FPth:"1"},n),filterID:1348620396})}case"oil paint":return d(d({},t),{Fltr:{_name:"Oil Paint",_classID:"oilPaint",lightingOn:e.filter.lightingOn,stylization:e.filter.stylization,cleanliness:e.filter.cleanliness,brushScale:e.filter.brushScale,microBrush:e.filter.microBrush,LghD:e.filter.lightDirection,specularity:e.filter.specularity},filterID:1122});case"liquify":return d(d({},t),{Fltr:{_name:"Liquify",_classID:"LqFy",LqMe:e.filter.liquifyMesh},filterID:1282492025});case"perspective warp":return d(d({},t),{Fltr:{_name:"Perspective Warp",_classID:"perspectiveWarpTransform",vertices:e.filter.vertices.map(jn),warpedVertices:e.filter.warpedVertices.map(jn),quads:e.filter.quads.map(function(c){return{indices:c}})},filterID:442});case"curves":return d(d({},t),{Fltr:d({_name:"Curves",_classID:"Crvs",presetKind:Zo.encode(e.filter.presetKind)},e.filter.adjustments?{Adjs:e.filter.adjustments.map(function(c){return"curve"in c?{_name:"",_classID:"CrvA",Chnl:c.channels.map(tt.encode),"Crv ":c.curve.map(function(l){return d({_name:"",_classID:"Pnt ",Hrzn:l.x,Vrtc:l.y},l.curved?{Cnty:!0}:{})})}:{_name:"",_classID:"CrvA",Chnl:c.channels.map(tt.encode),Mpng:c.values}})}:{}),filterID:1131574899});case"brightness/contrast":return d(d({},t),{Fltr:{_name:"Brightness/Contrast",_classID:"BrgC",Brgh:e.filter.brightness,Cntr:e.filter.contrast,useLegacy:!!e.filter.useLegacy},filterID:1114793795});default:throw new Error("Unknow filter type: ".concat(e.type))}}function ps(e){if(e.warp)return e.warp;if(!e.width||!e.height)throw new Error("You must provide width and height of the linked image in placedLayer");var t=e.width,n=e.height,r=0,i=t/3,a=t*2/3,o=t,s=0,c=n/3,l=n*2/3,u=n;return{style:"custom",value:0,perspective:0,perspectiveOther:0,rotate:"horizontal",bounds:{top:{value:0,units:"Pixels"},left:{value:0,units:"Pixels"},bottom:{value:n,units:"Pixels"},right:{value:t,units:"Pixels"}},uOrder:4,vOrder:4,customEnvelopeWarp:{meshPoints:[{x:r,y:s},{x:i,y:s},{x:a,y:s},{x:o,y:s},{x:r,y:c},{x:i,y:c},{x:a,y:c},{x:o,y:c},{x:r,y:l},{x:i,y:l},{x:a,y:l},{x:o,y:l},{x:r,y:u},{x:i,y:u},{x:a,y:u},{x:o,y:u}]}}}N("SoLd",ae("placedLayer"),function(e,t,n){if(se(e)!=="soLD")throw new Error("Invalid SoLd type");var r=_(e);if(r!==4&&r!==5)throw new Error("Invalid SoLd version");var i=Y(e,!0);t.placedLayer={id:i.Idnt,placed:i.placed,type:An[i.Type],pageNumber:i.PgNm,totalPages:i.totalPages,frameStep:Ee(i.frameStep),duration:Ee(i.duration),frameCount:i.frameCount,transform:i.Trnf,width:i["Sz  "].Wdth,height:i["Sz  "].Hght,resolution:re(i.Rslt),warp:hs(i.quiltWarp||i.warp)},i.nonAffineTransform&&i.nonAffineTransform.some(function(a,o){return a!==i.Trnf[o]})&&(t.placedLayer.nonAffineTransform=i.nonAffineTransform),i.Crop&&(t.placedLayer.crop=i.Crop),i.comp&&(t.placedLayer.comp=i.comp),i.compInfo&&(t.placedLayer.compInfo={compID:i.compInfo.compID,originalCompID:i.compInfo.originalCompID}),i.filterFX&&(t.placedLayer.filter=Jc(i.filterFX,e)),R(e,n())},function(e,t){var n,r;G(e,"soLD"),H(e,4);var i=t.placedLayer;if(!i.id||typeof i.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(i.id))throw new Error("Placed layer ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");var a=d(d({Idnt:i.id,placed:(n=i.placed)!==null&&n!==void 0?n:i.id,PgNm:i.pageNumber||1,totalPages:i.totalPages||1},i.crop?{Crop:i.crop}:{}),{frameStep:i.frameStep||{numerator:0,denominator:600},duration:i.duration||{numerator:0,denominator:600},frameCount:i.frameCount||0,Annt:16,Type:An.indexOf(i.type),Trnf:i.transform,nonAffineTransform:(r=i.nonAffineTransform)!==null&&r!==void 0?r:i.transform,warp:Gt(ps(i)),"Sz  ":{_name:"",_classID:"Pnt ",Wdth:i.width||0,Hght:i.height||0},Rslt:i.resolution?ce(i.resolution,"resolution"):{units:"Density",value:72}});if(i.filter&&(a.filterFX={_name:"",_classID:"filterFXStyle",enab:i.filter.enabled,validAtPosition:i.filter.validAtPosition,filterMaskEnable:i.filter.maskEnabled,filterMaskLinked:i.filter.maskLinked,filterMaskExtendWithWhite:i.filter.maskExtendWithWhite,filterFXList:i.filter.list.map(function(s){return Qc(s)})}),i.warp&&Nr(i.warp)){var o=Gt(i.warp);a.quiltWarp=o,a.warp={warpStyle:"warpStyle.warpNone",warpValue:o.warpValue,warpPerspective:o.warpPerspective,warpPerspectiveOther:o.warpPerspectiveOther,warpRotate:o.warpRotate,bounds:o.bounds,uOrder:o.uOrder,vOrder:o.vOrder}}else delete a.quiltWarp;i.comp&&(a.comp=i.comp),i.compInfo&&(a.compInfo=i.compInfo),K(e,"","null",a,a.quiltWarp?"quiltWarp":"warp")});Nn("SoLE","SoLd");N("fxrp",ae("referencePoint"),function(e,t){t.referencePoint={x:ze(e),y:ze(e)}},function(e,t){Ye(e,t.referencePoint.x),Ye(e,t.referencePoint.y)});N("Lr16",function(){return!1},function(e,t,n,r,i){Mr(e,r,i)},function(e,t){});N("Lr32",function(){return!1},function(e,t,n,r,i){Mr(e,r,i)},function(e,t){});N("LMsk",ae("userMask"),function(e,t){t.userMask={colorSpace:ye(e),opacity:E(e)/255};var n=T(e);if(n!==128)throw new Error("Invalid flag value");R(e,1)},function(e,t){var n=t.userMask;xe(e,n.colorSpace),I(e,Ja(n.opacity,0,1)*255),B(e,128),ie(e,1)});N("Patt",function(e){return!e},function(e,t,n){n()&&R(e,n())},function(e,t){});function ka(e){var t=_(e),n=_(e),r=_(e),i=_(e);return{top:t,left:n,bottom:r,right:i}}function Ia(e,t){H(e,t.top),H(e,t.left),H(e,t.bottom),H(e,t.right)}N("Anno",function(e){return e.annotations!==void 0},function(e,t,n){var r=E(e),i=E(e);if(r!==2||i!==1)throw new Error("Invalid Anno version");for(var a=L(e),o=[],s=0;s<a;s++){L(e);var c=se(e),l=!!T(e);T(e),E(e);var u=ka(e),h=ka(e),p=ye(e),f=hn(e,2),m=hn(e,2),v=hn(e,2);L(e),se(e);var x=L(e),b=void 0;if(c==="txtA")x>=2&&E(e)===65279?b=Or(e,(x-2)/2):(e.offset-=2,b=qt(e,x)),b=b.replace(/\r/g,`
`);else if(c==="sndA")b=ke(e,x);else throw new Error("Unknown annotation type");o.push({type:c==="txtA"?"text":"sound",open:l,iconLocation:u,popupLocation:h,color:p,author:f,name:m,date:v,data:b})}t.annotations=o,R(e,n())},function(e,t){var n=t.annotations;I(e,2),I(e,1),D(e,n.length);for(var r=0,i=n;r<i.length;r++){var a=i[r],o=a.type==="sound";if(o&&!(a.data instanceof Uint8Array))throw new Error("Sound annotation data should be Uint8Array");if(!o&&typeof a.data!="string")throw new Error("Text annotation data should be string");var s=e.offset;D(e,0),G(e,o?"sndA":"txtA"),B(e,a.open?1:0),B(e,28),I(e,1),Ia(e,a.iconLocation),Ia(e,a.popupLocation),xe(e,a.color),On(e,a.author||"",2),On(e,a.name||"",2),On(e,a.date||"",2);var c=e.offset;D(e,0),G(e,o?"sndM":"txtC"),D(e,0);var l=e.offset;if(o)sn(e,a.data);else{I(e,65279);for(var u=a.data.replace(/\n/g,"\r"),h=0;h<u.length;h++)I(e,u.charCodeAt(h))}e.view.setUint32(s,e.offset-s,!1),e.view.setUint32(c,e.offset-c,!1),e.view.setUint32(l-4,e.offset-l,!1)}});function vs(e){N(e,function(t){var n=t;return!(!n.linkedFiles||!n.linkedFiles.length||e==="lnkE"&&!n.linkedFiles.some(function(r){return r.linkedFile}))},function(t,n,r,i){var a=n;for(a.linkedFiles=a.linkedFiles||[];r()>8;){var o=fr(t),s=t.offset,c=se(t),l=_(t),u=hn(t,1),h=Fe(t),p=se(t).trim(),f=se(t).trim(),m=fr(t),v=T(t),x=v?Y(t):void 0,b=c==="liFE"?Y(t):void 0,y={id:u,name:h};if(p&&(y.type=p),f&&(y.creator=f),x&&(y.descriptor={compInfo:{compID:x.compInfo.compID,originalCompID:x.compInfo.originalCompID}}),c==="liFE"&&l>3){var S=_(t),g=T(t),F=T(t),w=T(t),C=T(t),k=ze(t),O=Math.floor(k),A=(k-O)*1e3;y.time=new Date(Date.UTC(S,g,F,w,C,O,A)).toISOString()}var M=c==="liFE"?fr(t):0;for(c==="liFA"&&R(t,8),c==="liFD"&&(y.data=ke(t,m)),l>=5&&(y.childDocumentID=Fe(t)),l>=6&&(y.assetModTime=ze(t)),l>=7&&(y.assetLockedState=T(t)),c==="liFE"&&l===2&&(y.data=ke(t,M)),t.skipLinkedFilesData&&(y.data=void 0),e==="lnkE"&&(y.linkedFile={fileSize:M,name:b?.["Nm  "]||"",fullPath:b?.fullPath||"",originalPath:b?.originalPath||"",relativePath:b?.relPath||""}),a.linkedFiles.push(y);o%4;)o++;t.offset=s+o}R(t,r())},function(t,n){for(var r,i,a,o,s,c,l,u,h,p=n,f=0,m=p.linkedFiles;f<m.length;f++){var v=m[f];if(e==="lnkE"==!!v.linkedFile){var x=2;v.assetLockedState!=null?x=7:v.assetModTime!=null?x=6:v.childDocumentID!=null?x=5:e=="lnkE"&&(x=3),dr(t,0);var b=t.offset;if(G(t,e==="lnkE"?"liFE":v.data?"liFD":"liFA"),H(t,x),!v.id||typeof v.id!="string"||!/^[0-9a-f]{8}-([0-9a-f]{4}-){3}[0-9a-f]{12}$/.test(v.id))throw new Error("Linked file ID must be in a GUID format (example: 20953ddb-9391-11ec-b4f1-c15674f50bc4)");if(On(t,v.id,1),Sn(t,v.name||""),G(t,v.type?"".concat(v.type,"    ").substring(0,4):"    "),G(t,v.creator?"".concat(v.creator,"    ").substring(0,4):"\0\0\0\0"),dr(t,v.data?v.data.byteLength:0),v.descriptor&&v.descriptor.compInfo){var y={compInfo:{compID:v.descriptor.compInfo.compID,originalCompID:v.descriptor.compInfo.originalCompID}};B(t,1),K(t,"","null",y)}else B(t,0);if(e==="lnkE"){var y={descVersion:2,"Nm  ":(i=(r=v.linkedFile)===null||r===void 0?void 0:r.name)!==null&&i!==void 0?i:"",fullPath:(o=(a=v.linkedFile)===null||a===void 0?void 0:a.fullPath)!==null&&o!==void 0?o:"",originalPath:(c=(s=v.linkedFile)===null||s===void 0?void 0:s.originalPath)!==null&&c!==void 0?c:"",relPath:(u=(l=v.linkedFile)===null||l===void 0?void 0:l.relativePath)!==null&&u!==void 0?u:""};K(t,"","ExternalFileLink",y);var S=v.time?new Date(v.time):new Date;H(t,S.getUTCFullYear()),B(t,S.getUTCMonth()),B(t,S.getUTCDate()),B(t,S.getUTCHours()),B(t,S.getUTCMinutes()),Ye(t,S.getUTCSeconds()+S.getUTCMilliseconds()/1e3)}v.data?sn(t,v.data):dr(t,((h=v.linkedFile)===null||h===void 0?void 0:h.fileSize)||0),x>=5&&Sn(t,v.childDocumentID||""),x>=6&&Ye(t,v.assetModTime||0),x>=7&&B(t,v.assetLockedState||0);var g=t.offset-b;for(t.view.setUint32(b-4,g,!1);g%4;)g++,B(t,0)}}})}vs("lnk2");vs("lnkE");Nn("lnkD","lnk2");Nn("lnk3","lnk2");N("pths",ae("pathList"),function(e,t){Y(e,!0),t.pathList=[]},function(e,t){var n={pathList:[]};K(e,"","pathsDataClass",n)});N("lyvr",ae("version"),function(e,t){return t.version=L(e)},function(e,t){return D(e,t.version)});N("lfxs",function(){return!1},function(e,t,n){var r=L(e);if(r!==0)throw new Error("Invalid lfxs version");var i=Y(e);t.effects=st(i,!!e.logMissingFeatures),R(e,n())},function(e,t,n,r){var i=ot(t.effects,!!r.logMissingFeatures,!0);D(e,0),K(e,"","null",i)});function Ie(e){return function(t){return!!t.adjustment&&t.adjustment.type===e}}N("brit",Ie("brightness/contrast"),function(e,t,n){t.adjustment||(t.adjustment={type:"brightness/contrast",brightness:Q(e),contrast:Q(e),meanValue:Q(e),labColorOnly:!!T(e),useLegacy:!0}),R(e,n())},function(e,t){var n,r=t.adjustment;te(e,r.brightness||0),te(e,r.contrast||0),te(e,(n=r.meanValue)!==null&&n!==void 0?n:127),B(e,r.labColorOnly?1:0),ie(e,1)});function Dt(e){var t=Q(e),n=Q(e),r=Q(e),i=Q(e),a=Q(e)/100;return{shadowInput:t,highlightInput:n,shadowOutput:r,highlightOutput:i,midtoneInput:a}}function Wn(e,t){te(e,t.shadowInput),te(e,t.highlightInput),te(e,t.shadowOutput),te(e,t.highlightOutput),te(e,Math.round(t.midtoneInput*100))}N("levl",Ie("levels"),function(e,t,n){if(E(e)!==2)throw new Error("Invalid levl version");t.adjustment=d(d({},t.adjustment),{type:"levels",rgb:Dt(e),red:Dt(e),green:Dt(e),blue:Dt(e)}),R(e,n())},function(e,t){var n=t.adjustment,r={shadowInput:0,highlightInput:255,shadowOutput:0,highlightOutput:255,midtoneInput:1};I(e,2),Wn(e,n.rgb||r),Wn(e,n.red||r),Wn(e,n.blue||r),Wn(e,n.green||r);for(var i=0;i<59;i++)Wn(e,r)});function Tt(e){for(var t=E(e),n=[],r=0;r<t;r++){var i=Q(e),a=Q(e);n.push({input:a,output:i})}return n}function fn(e,t){I(e,t.length);for(var n=0,r=t;n<r.length;n++){var i=r[n];I(e,i.output),I(e,i.input)}}N("curv",Ie("curves"),function(e,t,n){if(T(e),E(e)!==1)throw new Error("Invalid curv version");E(e);var r=E(e),i={type:"curves"};r&1&&(i.rgb=Tt(e)),r&2&&(i.red=Tt(e)),r&4&&(i.green=Tt(e)),r&8&&(i.blue=Tt(e)),t.adjustment=d(d({},t.adjustment),i),R(e,n())},function(e,t){var n=t.adjustment,r=n.rgb,i=n.red,a=n.green,o=n.blue,s=0,c=0;r&&r.length&&(s|=1,c++),i&&i.length&&(s|=2,c++),a&&a.length&&(s|=4,c++),o&&o.length&&(s|=8,c++),B(e,0),I(e,1),I(e,0),I(e,s),r&&r.length&&fn(e,r),i&&i.length&&fn(e,i),a&&a.length&&fn(e,a),o&&o.length&&fn(e,o),G(e,"Crv "),I(e,4),I(e,0),I(e,c),r&&r.length&&(I(e,0),fn(e,r)),i&&i.length&&(I(e,1),fn(e,i)),a&&a.length&&(I(e,2),fn(e,a)),o&&o.length&&(I(e,3),fn(e,o))});N("expA",Ie("exposure"),function(e,t,n){if(E(e)!==1)throw new Error("Invalid expA version");t.adjustment=d(d({},t.adjustment),{type:"exposure",exposure:je(e),offset:je(e),gamma:je(e)}),R(e,n())},function(e,t){var n=t.adjustment;I(e,1),We(e,n.exposure),We(e,n.offset),We(e,n.gamma),ie(e,2)});N("vibA",Ie("vibrance"),function(e,t,n){var r=Y(e);t.adjustment={type:"vibrance"},r.vibrance!==void 0&&(t.adjustment.vibrance=r.vibrance),r.Strt!==void 0&&(t.adjustment.saturation=r.Strt),R(e,n())},function(e,t){var n=t.adjustment,r={};n.vibrance!==void 0&&(r.vibrance=n.vibrance),n.saturation!==void 0&&(r.Strt=n.saturation),K(e,"","null",r)});function vn(e){return{a:Q(e),b:Q(e),c:Q(e),d:Q(e),hue:Q(e),saturation:Q(e),lightness:Q(e)}}function mn(e,t){var n=t||{};te(e,n.a||0),te(e,n.b||0),te(e,n.c||0),te(e,n.d||0),te(e,n.hue||0),te(e,n.saturation||0),te(e,n.lightness||0)}N("hue2",Ie("hue/saturation"),function(e,t,n){if(E(e)!==2)throw new Error("Invalid hue2 version");t.adjustment=d(d({},t.adjustment),{type:"hue/saturation",master:vn(e),reds:vn(e),yellows:vn(e),greens:vn(e),cyans:vn(e),blues:vn(e),magentas:vn(e)}),R(e,n())},function(e,t){var n=t.adjustment;I(e,2),mn(e,n.master),mn(e,n.reds),mn(e,n.yellows),mn(e,n.greens),mn(e,n.cyans),mn(e,n.blues),mn(e,n.magentas)});function pr(e){return{cyanRed:Q(e),magentaGreen:Q(e),yellowBlue:Q(e)}}function vr(e,t){te(e,t.cyanRed||0),te(e,t.magentaGreen||0),te(e,t.yellowBlue||0)}N("blnc",Ie("color balance"),function(e,t,n){t.adjustment={type:"color balance",shadows:pr(e),midtones:pr(e),highlights:pr(e),preserveLuminosity:!!T(e)},R(e,n())},function(e,t){var n=t.adjustment;vr(e,n.shadows||{}),vr(e,n.midtones||{}),vr(e,n.highlights||{}),B(e,n.preserveLuminosity?1:0),ie(e,1)});N("blwh",Ie("black & white"),function(e,t,n){var r=Y(e);t.adjustment={type:"black & white",reds:r["Rd  "],yellows:r.Yllw,greens:r["Grn "],cyans:r["Cyn "],blues:r["Bl  "],magentas:r.Mgnt,useTint:!!r.useTint,presetKind:r.bwPresetKind,presetFileName:r.blackAndWhitePresetFileName},r.tintColor!==void 0&&(t.adjustment.tintColor=Xe(r.tintColor)),R(e,n())},function(e,t){var n=t.adjustment,r={"Rd  ":n.reds||0,Yllw:n.yellows||0,"Grn ":n.greens||0,"Cyn ":n.cyans||0,"Bl  ":n.blues||0,Mgnt:n.magentas||0,useTint:!!n.useTint,tintColor:qe(n.tintColor),bwPresetKind:n.presetKind||0,blackAndWhitePresetFileName:n.presetFileName||""};K(e,"","null",r)});N("phfl",Ie("photo filter"),function(e,t,n){var r=E(e);if(r!==2&&r!==3)throw new Error("Invalid phfl version");var i;r===2?i=ye(e):i={l:_(e)/100,a:_(e)/100,b:_(e)/100},t.adjustment={type:"photo filter",color:i,density:L(e)/100,preserveLuminosity:!!T(e)},R(e,n())},function(e,t){var n=t.adjustment;I(e,2),xe(e,n.color||{l:0,a:0,b:0}),D(e,(n.density||0)*100),B(e,n.preserveLuminosity?1:0),ie(e,3)});function Ot(e){var t=Q(e),n=Q(e),r=Q(e);R(e,2);var i=Q(e);return{red:t,green:n,blue:r,constant:i}}function Xn(e,t){var n=t||{};te(e,n.red),te(e,n.green),te(e,n.blue),ie(e,2),te(e,n.constant)}N("mixr",Ie("channel mixer"),function(e,t,n){if(E(e)!==1)throw new Error("Invalid mixr version");var r=t.adjustment=d(d({},t.adjustment),{type:"channel mixer",monochrome:!!E(e)});r.monochrome||(r.red=Ot(e),r.green=Ot(e),r.blue=Ot(e)),r.gray=Ot(e),R(e,n())},function(e,t){var n=t.adjustment;I(e,1),I(e,n.monochrome?1:0),n.monochrome?(Xn(e,n.gray),ie(e,30)):(Xn(e,n.red),Xn(e,n.green),Xn(e,n.blue),Xn(e,n.gray))});var wa=z("colorLookupType","3DLUT",{"3dlut":"3DLUT",abstractProfile:"abstractProfile",deviceLinkProfile:"deviceLinkProfile"}),Ea=z("LUTFormatType","look",{look:"LUTFormatLOOK",cube:"LUTFormatCUBE","3dl":"LUTFormat3DL"}),Mt=z("colorLookupOrder","rgb",{rgb:"rgbOrder",bgr:"bgrOrder"});N("clrL",Ie("color lookup"),function(e,t,n){if(E(e)!==1)throw new Error("Invalid clrL version");var r=Y(e);t.adjustment={type:"color lookup"};var i=t.adjustment;r.lookupType!==void 0&&(i.lookupType=wa.decode(r.lookupType)),r["Nm  "]!==void 0&&(i.name=r["Nm  "]),r.Dthr!==void 0&&(i.dither=r.Dthr),r.profile!==void 0&&(i.profile=r.profile),r.LUTFormat!==void 0&&(i.lutFormat=Ea.decode(r.LUTFormat)),r.dataOrder!==void 0&&(i.dataOrder=Mt.decode(r.dataOrder)),r.tableOrder!==void 0&&(i.tableOrder=Mt.decode(r.tableOrder)),r.LUT3DFileData!==void 0&&(i.lut3DFileData=r.LUT3DFileData),r.LUT3DFileName!==void 0&&(i.lut3DFileName=r.LUT3DFileName),R(e,n())},function(e,t){var n=t.adjustment,r={};n.lookupType!==void 0&&(r.lookupType=wa.encode(n.lookupType)),n.name!==void 0&&(r["Nm  "]=n.name),n.dither!==void 0&&(r.Dthr=n.dither),n.profile!==void 0&&(r.profile=n.profile),n.lutFormat!==void 0&&(r.LUTFormat=Ea.encode(n.lutFormat)),n.dataOrder!==void 0&&(r.dataOrder=Mt.encode(n.dataOrder)),n.tableOrder!==void 0&&(r.tableOrder=Mt.encode(n.tableOrder)),n.lut3DFileData!==void 0&&(r.LUT3DFileData=n.lut3DFileData),n.lut3DFileName!==void 0&&(r.LUT3DFileName=n.lut3DFileName),I(e,1),K(e,"","null",r)});N("nvrt",Ie("invert"),function(e,t,n){t.adjustment={type:"invert"},R(e,n())},function(){});N("post",Ie("posterize"),function(e,t,n){t.adjustment={type:"posterize",levels:E(e)},R(e,n())},function(e,t){var n,r=t.adjustment;I(e,(n=r.levels)!==null&&n!==void 0?n:4),ie(e,2)});N("thrs",Ie("threshold"),function(e,t,n){t.adjustment={type:"threshold",level:E(e)},R(e,n())},function(e,t){var n,r=t.adjustment;I(e,(n=r.level)!==null&&n!==void 0?n:128),ie(e,2)});var La=["","","","rgb","hsb","","lab"];N("grdm",Ie("gradient map"),function(e,t,n){var r=E(e);if(r!==1&&r!==3)throw new Error("Invalid grdm version");var i={type:"gradient map",gradientType:"solid"};i.reverse=!!T(e),i.dither=!!T(e);var a=!!T(e);if(e.offset--,a){var o=se(e);i.method=Bn.decode(o)}i.name=Fe(e),i.colorStops=[],i.opacityStops=[];for(var s=E(e),c=0;c<s;c++)i.colorStops.push({location:L(e),midpoint:L(e)/100,color:ye(e)}),R(e,2);for(var l=E(e),c=0;c<l;c++)i.opacityStops.push({location:L(e),midpoint:L(e)/100,opacity:E(e)/255});var u=E(e);if(u!==2)throw new Error("Invalid grdm expansion count");var h=E(e);i.smoothness=h/4096;var p=E(e);if(p!==32)throw new Error("Invalid grdm length");i.gradientType=E(e)?"noise":"solid",i.randomSeed=L(e),i.addTransparency=!!E(e),i.restrictColors=!!E(e),i.roughness=L(e)/4096,i.colorModel=La[E(e)]||"rgb",i.min=[E(e)/32768,E(e)/32768,E(e)/32768,E(e)/32768],i.max=[E(e)/32768,E(e)/32768,E(e)/32768,E(e)/32768],R(e,n());for(var f=0,m=i.colorStops;f<m.length;f++){var v=m[f];v.location/=h}for(var x=0,b=i.opacityStops;x<b.length;x++){var v=b[x];v.location/=h}t.adjustment=i},function(e,t){var n,r,i,a=t.adjustment;I(e,a.method!==void 0?3:1),B(e,a.reverse?1:0),B(e,a.dither?1:0),a.method!==void 0&&G(e,Bn.encode(a.method)),Sn(e,a.name||""),I(e,a.colorStops&&a.colorStops.length||0);for(var o=Math.round(((n=a.smoothness)!==null&&n!==void 0?n:1)*4096),s=0,c=a.colorStops||[];s<c.length;s++){var l=c[s];D(e,Math.round(l.location*o)),D(e,Math.round(l.midpoint*100)),xe(e,l.color),ie(e,2)}I(e,a.opacityStops&&a.opacityStops.length||0);for(var u=0,h=a.opacityStops||[];u<h.length;u++){var l=h[u];D(e,Math.round(l.location*o)),D(e,Math.round(l.midpoint*100)),I(e,Math.round(l.opacity*255))}I(e,2),I(e,o),I(e,32),I(e,a.gradientType==="noise"?1:0),D(e,a.randomSeed||0),I(e,a.addTransparency?1:0),I(e,a.restrictColors?1:0),D(e,Math.round(((r=a.roughness)!==null&&r!==void 0?r:1)*4096));var p=La.indexOf((i=a.colorModel)!==null&&i!==void 0?i:"rgb");I(e,p===-1?3:p);for(var f=0;f<4;f++)I(e,Math.round((a.min&&a.min[f]||0)*32768));for(var f=0;f<4;f++)I(e,Math.round((a.max&&a.max[f]||0)*32768));ie(e,4)});function Qe(e){return{c:Q(e),m:Q(e),y:Q(e),k:Q(e)}}function en(e,t){var n=t||{};te(e,n.c),te(e,n.m),te(e,n.y),te(e,n.k)}N("selc",Ie("selective color"),function(e,t){if(E(e)!==1)throw new Error("Invalid selc version");var n=E(e)?"absolute":"relative";R(e,8),t.adjustment={type:"selective color",mode:n,reds:Qe(e),yellows:Qe(e),greens:Qe(e),cyans:Qe(e),blues:Qe(e),magentas:Qe(e),whites:Qe(e),neutrals:Qe(e),blacks:Qe(e)}},function(e,t){var n=t.adjustment;I(e,1),I(e,n.mode==="absolute"?1:0),ie(e,8),en(e,n.reds),en(e,n.yellows),en(e,n.greens),en(e,n.cyans),en(e,n.blues),en(e,n.magentas),en(e,n.whites),en(e,n.neutrals),en(e,n.blacks)});N("CgEd",function(e){var t=e.adjustment;return t?t.type==="brightness/contrast"&&!t.useLegacy||(t.type==="levels"||t.type==="curves"||t.type==="exposure"||t.type==="channel mixer"||t.type==="hue/saturation")&&t.presetFileName!==void 0:!1},function(e,t,n){var r=Y(e);if(r.Vrsn!==1)throw new Error("Invalid CgEd version");"presetFileName"in r?t.adjustment=d(d({},t.adjustment),{presetKind:r.presetKind,presetFileName:r.presetFileName}):"curvesPresetFileName"in r?t.adjustment=d(d({},t.adjustment),{presetKind:r.curvesPresetKind,presetFileName:r.curvesPresetFileName}):"mixerPresetFileName"in r?t.adjustment=d(d({},t.adjustment),{presetKind:r.mixerPresetKind,presetFileName:r.mixerPresetFileName}):t.adjustment={type:"brightness/contrast",brightness:r.Brgh,contrast:r.Cntr,meanValue:r.means,useLegacy:!!r.useLegacy,labColorOnly:!!r["Lab "],auto:!!r.Auto},R(e,n())},function(e,t){var n,r,i,a,o=t.adjustment;if(o.type==="levels"||o.type==="exposure"||o.type==="hue/saturation"){var s={Vrsn:1,presetKind:(n=o.presetKind)!==null&&n!==void 0?n:1,presetFileName:o.presetFileName||""};K(e,"","null",s)}else if(o.type==="curves"){var s={Vrsn:1,curvesPresetKind:(r=o.presetKind)!==null&&r!==void 0?r:1,curvesPresetFileName:o.presetFileName||""};K(e,"","null",s)}else if(o.type==="channel mixer"){var s={Vrsn:1,mixerPresetKind:(i=o.presetKind)!==null&&i!==void 0?i:1,mixerPresetFileName:o.presetFileName||""};K(e,"","null",s)}else if(o.type==="brightness/contrast"){var s={Vrsn:1,Brgh:o.brightness||0,Cntr:o.contrast||0,means:(a=o.meanValue)!==null&&a!==void 0?a:127,"Lab ":!!o.labColorOnly,useLegacy:!!o.useLegacy,Auto:!!o.auto};K(e,"","null",s)}else throw new Error("Unhandled CgEd case")});function eu(e){var t=[];function n(r){var i;if(r.children)for(var a=0,o=r.children;a<o.length;a++){var s=o[a];((i=s.text)===null||i===void 0?void 0:i.index)!==void 0&&(t[s.text.index]=s),n(s)}}return n(e),t}N("Txt2",ae("engineData"),function(e,t,n,r){var i=ke(e,n());t.engineData=Fr.fromByteArray(i);var a=eu(r),o=as(i),s=Wc(o),c=s.ResourceDict.TextFrameSet;if(c)for(var l=0;l<c.length;l++){var u=a[l];c[l].path&&u?.text&&(u.text.textPath=c[l].path)}},function(e,t){var n=Fr.toByteArray(t.engineData);sn(e,n)});N("FEid",ae("filterEffectsMasks"),function(e,t,n){var r=_(e);if(r<1||r>3)throw new Error("Invalid filterEffects version ".concat(r));for(t.filterEffectsMasks=[];n()>8;){if(L(e))throw new Error("filterEffects: 64 bit length is not supported");var i=L(e),a=e.offset+i,o=hn(e,1),s=_(e);if(s!==1)throw new Error("Invalid filterEffect version ".concat(s));if(L(e))throw new Error("filterEffect: 64 bit length is not supported");L(e);for(var c=_(e),l=_(e),u=_(e),h=_(e),p=_(e),f=_(e),m=[],v=0;v<f+2;v++){var x=_(e);if(x){if(L(e))throw new Error("filterEffect: 64 bit length is not supported");var b=L(e);if(!b)throw new Error("filterEffect: Empty channel");var y=E(e),S=ke(e,b-2);m.push({compressionMode:y,data:S})}else m.push(void 0)}if(t.filterEffectsMasks.push({id:o,top:c,left:l,bottom:u,right:h,depth:p,channels:m}),e.offset<a&&T(e)){var g=_(e),F=_(e),w=_(e),C=_(e);if(L(e))throw new Error("filterEffect: 64 bit length is not supported");var k=L(e),y=E(e),S=ke(e,k-2);t.filterEffectsMasks[t.filterEffectsMasks.length-1].extra={top:g,left:F,bottom:w,right:C,compressionMode:y,data:S}}e.offset=a;for(var O=i;O%4;)e.offset++,O++}},function(e,t){var n;H(e,3);for(var r=0,i=t.filterEffectsMasks;r<i.length;r++){var a=i[r];D(e,0),D(e,0);var o=e.offset;On(e,a.id,1),H(e,1),D(e,0),D(e,0);var s=e.offset;H(e,a.top),H(e,a.left),H(e,a.bottom),H(e,a.right),H(e,a.depth);var c=Math.max(0,a.channels.length-2);H(e,c);for(var l=0;l<c+2;l++){var u=a.channels[l];H(e,u?1:0),u&&(D(e,0),D(e,u.data.length+2),I(e,u.compressionMode),sn(e,u.data))}e.view.setUint32(s-4,e.offset-s,!1);var h=(n=t.filterEffectsMasks[t.filterEffectsMasks.length-1])===null||n===void 0?void 0:n.extra;h&&(B(e,1),H(e,h.top),H(e,h.left),H(e,h.bottom),H(e,h.right),D(e,0),D(e,h.data.byteLength+2),I(e,h.compressionMode),sn(e,h.data));var p=e.offset-o;for(e.view.setUint32(o-4,p,!1);p%4;)ie(e,1),p++}});Nn("FXid","FEid");N("FMsk",ae("filterMask"),function(e,t){t.filterMask={colorSpace:ye(e),opacity:E(e)/255}},function(e,t){var n;xe(e,t.filterMask.colorSpace),I(e,Ja((n=t.filterMask.opacity)!==null&&n!==void 0?n:1,0,1)*255)});N("artd",function(e){return e.artboards!==void 0},function(e,t,n){var r=Y(e);t.artboards={count:r["Cnt "],autoExpandOffset:{horizontal:r.autoExpandOffset.Hrzn,vertical:r.autoExpandOffset.Vrtc},origin:{horizontal:r.origin.Hrzn,vertical:r.origin.Vrtc},autoExpandEnabled:r.autoExpandEnabled,autoNestEnabled:r.autoNestEnabled,autoPositionEnabled:r.autoPositionEnabled,shrinkwrapOnSaveEnabled:!!r.shrinkwrapOnSaveEnabled,docDefaultNewArtboardBackgroundColor:Xe(r.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:r.docDefaultNewArtboardBackgroundType},R(e,n())},function(e,t){var n,r,i,a,o,s=t.artboards,c={"Cnt ":s.count,autoExpandOffset:s.autoExpandOffset?{Hrzn:s.autoExpandOffset.horizontal,Vrtc:s.autoExpandOffset.vertical}:{Hrzn:0,Vrtc:0},origin:s.origin?{Hrzn:s.origin.horizontal,Vrtc:s.origin.vertical}:{Hrzn:0,Vrtc:0},autoExpandEnabled:(n=s.autoExpandEnabled)!==null&&n!==void 0?n:!0,autoNestEnabled:(r=s.autoNestEnabled)!==null&&r!==void 0?r:!0,autoPositionEnabled:(i=s.autoPositionEnabled)!==null&&i!==void 0?i:!0,shrinkwrapOnSaveEnabled:(a=s.shrinkwrapOnSaveEnabled)!==null&&a!==void 0?a:!0,docDefaultNewArtboardBackgroundColor:qe(s.docDefaultNewArtboardBackgroundColor),docDefaultNewArtboardBackgroundType:(o=s.docDefaultNewArtboardBackgroundType)!==null&&o!==void 0?o:1};K(e,"","null",c,"artd")});function ms(e){return Object.keys(e).map(function(t){return e[t]}).some(function(t){return Array.isArray(t)&&t.length>1})}N("lfx2",function(e){return e.effects!==void 0&&!ms(e.effects)},function(e,t,n){var r=L(e);if(r!==0)throw new Error("Invalid lfx2 version");var i=Y(e);t.effects=st(i,!!e.logMissingFeatures),R(e,n())},function(e,t,n,r){var i=ot(t.effects,!!r.logMissingFeatures,!0);D(e,0),K(e,"","null",i)});N("cinf",ae("compositorUsed"),function(e,t,n){var r=Y(e);function i(a){return a.split(".")[1]}t.compositorUsed={description:r.description,reason:r.reason,engine:i(r.Engn)},r.Vrsn&&(t.compositorUsed.version=r.Vrsn),r.psVersion&&(t.compositorUsed.photoshopVersion=r.psVersion),r.enableCompCore&&(t.compositorUsed.enableCompCore=i(r.enableCompCore)),r.enableCompCoreGPU&&(t.compositorUsed.enableCompCoreGPU=i(r.enableCompCoreGPU)),r.enableCompCoreThreads&&(t.compositorUsed.enableCompCoreThreads=i(r.enableCompCoreThreads)),r.compCoreSupport&&(t.compositorUsed.compCoreSupport=i(r.compCoreSupport)),r.compCoreGPUSupport&&(t.compositorUsed.compCoreGPUSupport=i(r.compCoreGPUSupport)),R(e,n())},function(e,t){var n=t.compositorUsed,r={Vrsn:n.version||{major:1,minor:0,fix:0}};n.photoshopVersion&&(r.psVersion=n.photoshopVersion),r.description=n.description,r.reason=n.reason,r.Engn="Engn.".concat(n.engine),n.enableCompCore&&(r.enableCompCore="enable.".concat(n.enableCompCore)),n.enableCompCoreGPU&&(r.enableCompCoreGPU="enable.".concat(n.enableCompCoreGPU)),n.enableCompCoreThreads&&(r.enableCompCoreThreads="enable.".concat(n.enableCompCoreThreads)),n.compCoreSupport&&(r.compCoreSupport="reason.".concat(n.compCoreSupport)),n.compCoreGPUSupport&&(r.compCoreGPUSupport="reason.".concat(n.compCoreGPUSupport)),K(e,"","null",r)});N("extn",function(e){return e._extn!==void 0},function(e,t){Y(e)},function(e,t){});N("iOpa",ae("fillOpacity"),function(e,t){t.fillOpacity=T(e)/255,R(e,3)},function(e,t){B(e,t.fillOpacity*255),ie(e,3)});N("brst",ae("channelBlendingRestrictions"),function(e,t,n){for(t.channelBlendingRestrictions=[];n()>4;)t.channelBlendingRestrictions.push(_(e))},function(e,t){for(var n=0,r=t.channelBlendingRestrictions;n<r.length;n++){var i=r[n];H(e,i)}});N("tsly",ae("transparencyShapesLayer"),function(e,t){t.transparencyShapesLayer=!!T(e),R(e,3)},function(e,t){B(e,t.transparencyShapesLayer?1:0),ie(e,3)});function B(e,t){var n=ln(e,1);e.view.setUint8(n,t)}function te(e,t){var n=ln(e,2);e.view.setInt16(n,t,!1)}function I(e,t){var n=ln(e,2);e.view.setUint16(n,t,!1)}function nu(e,t){var n=ln(e,2);e.view.setUint16(n,t,!0)}function H(e,t){var n=ln(e,4);e.view.setInt32(n,t,!1)}function Pa(e,t){var n=ln(e,4);e.view.setInt32(n,t,!0)}function D(e,t){var n=ln(e,4);e.view.setUint32(n,t,!1)}function We(e,t){var n=ln(e,4);e.view.setFloat32(n,t,!1)}function Ye(e,t){var n=ln(e,8);e.view.setFloat64(n,t,!1)}function Oe(e,t){H(e,t*65536)}function He(e,t){H(e,t*(1<<24))}function sn(e,t){if(t){gs(e,e.offset+t.length);var n=new Uint8Array(e.buffer);n.set(t,e.offset),e.offset+=t.length}}function ie(e,t){for(var n=0;n<t;n++)B(e,0)}function G(e,t){if(t.length!==4)throw new Error("Invalid signature: '".concat(t,"'"));for(var n=0;n<4;n++)B(e,t.charCodeAt(n))}function tu(e,t){for(var n=0;n<t.length;n++)B(e,t.charCodeAt(n))}function On(e,t,n){var r=t.length;if(r>255)throw new Error("String too long");B(e,r);for(var i=0;i<r;i++){var a=t.charCodeAt(i);B(e,a<128?a:63)}for(;++r%n;)B(e,0)}function ru(e,t){for(var n=0;n<t.length;n++)I(e,t.charCodeAt(n))}function iu(e,t){for(var n=0;n<t.length;n++)nu(e,t.charCodeAt(n))}function Me(e,t){D(e,t.length),ru(e,t)}function Sn(e,t){D(e,t.length+1);for(var n=0;n<t.length;n++)I(e,t.charCodeAt(n));I(e,0)}function bn(e,t,n,r,i){r===void 0&&(r=!1),i===void 0&&(i=!1),i&&D(e,0);var a=e.offset;D(e,0),n();for(var o=e.offset-a-4,s=o;s%t;)B(e,0),s++;r&&(o=s),e.view.setUint32(a,o,!1)}function au(e,t){var n=e.buffer.byteLength;do n*=2;while(t>n);var r=new ArrayBuffer(n),i=new Uint8Array(r),a=new Uint8Array(e.buffer);i.set(a),e.buffer=r,e.view=new DataView(e.buffer)}function gs(e,t){t>e.buffer.byteLength&&au(e,t)}function ln(e,t){var n=e.offset;return gs(e,e.offset+=t),n}function xe(e,t){t?"r"in t?(I(e,0),I(e,Math.round(t.r*257)),I(e,Math.round(t.g*257)),I(e,Math.round(t.b*257)),I(e,0)):"fr"in t?(I(e,0),I(e,Math.round(t.fr*255*257)),I(e,Math.round(t.fg*255*257)),I(e,Math.round(t.fb*255*257)),I(e,0)):"l"in t?(I(e,7),te(e,Math.round(t.l*1e4)),te(e,Math.round(t.a<0?t.a*12800:t.a*12700)),te(e,Math.round(t.b<0?t.b*12800:t.b*12700)),I(e,0)):"h"in t?(I(e,1),I(e,Math.round(t.h*65535)),I(e,Math.round(t.s*65535)),I(e,Math.round(t.b*65535)),I(e,0)):"c"in t?(I(e,2),I(e,Math.round(t.c*257)),I(e,Math.round(t.m*257)),I(e,Math.round(t.y*257)),I(e,Math.round(t.k*257))):(I(e,8),I(e,Math.round(t.k*1e4/255)),ie(e,6)):(I(e,0),ie(e,8))}var Aa;(function(e){e[e.Bitmap=0]="Bitmap",e[e.Grayscale=1]="Grayscale",e[e.Indexed=2]="Indexed",e[e.RGB=3]="RGB",e[e.CMYK=4]="CMYK",e[e.Multichannel=7]="Multichannel",e[e.Duotone=8]="Duotone",e[e.Lab=9]="Lab"})(Aa||(Aa={}));var Da;(function(e){e[e.Other=0]="Other",e[e.OpenFolder=1]="OpenFolder",e[e.ClosedFolder=2]="ClosedFolder",e[e.BoundingSectionDivider=3]="BoundingSectionDivider"})(Da||(Da={}));var Ta;(function(e){e[e.None=0]="None",e[e.Visibility=1]="Visibility",e[e.Position=2]="Position",e[e.Appearance=4]="Appearance"})(Ta||(Ta={}));function ou(e,t){var n="buffer"in e?da(e.buffer,e.byteOffset,e.byteLength):da(e);return Sc(n,t)}class at extends HTMLElement{static observedAttributes=["src","layers"];resizeObserver;psd=null;shadow;container=document.createElement("div");baseWidth=0;baseHeight=0;constructor(t={}){super(),this.#e(t),this.container.classList.add("container"),this.shadow=this.attachShadow({mode:"closed"});const n=document.createElement("style");n.textContent=`
            :host {
                display: flex;
                justify-content: center;             
                align-items: center;             
            }

            .container {
                position: relative;     /*  */
                transform-origin: center;
            }

            .psd-canvas {
                position: absolute;     /*  */
                image-rendering: pixelated;
                animation: fade-in 0.1s linear; 
            }

            @keyframes fade-in {
                from {
                    opacity: 0.5;
                }

                to {
                    opacity: 1;
                }
            }
        `,this.shadow.appendChild(n),this.shadow.appendChild(this.container),this.resizeObserver=new ResizeObserver(()=>{this.updateScale()}),this.resizeObserver.observe(this)}#e(t){t.url&&this.setAttribute("src",t.url),t.layers&&this.setAttribute("layers",t.layers)}set layers(t){this.setAttribute("layers",t)}get layers(){return this.getAttribute("layers")??""}attributeChangedCallback(t,n,r){n!==r&&(t==="src"&&r?this.loadPsd(r):t==="layers"&&this.renderLayers())}async loadPsd(t){this.psd=null;try{const n=await this.fetchPsdData(t);this.psd=ou(n,{useImageData:!0}),this.baseWidth=this.psd.width??0,this.baseHeight=this.psd.height??0,this.container.style.width=`${this.baseWidth}px`,this.container.style.height=`${this.baseHeight}px`,this.renderLayers()}catch(n){this.renderError(n)}}async fetchPsdData(t){const n=await fetch(t);if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);return await n.arrayBuffer()}renderLayers(){if(!this.psd||!this.psd.children)return;const t=this.getAttribute("layers");if(!t){this.container.innerHTML+='<p>Please specify a "layers" attribute.</p>';return}this.clearContent();const n=t.split(",").map(r=>r.trim());for(const r of n){const i=at.findLayerByName(this.psd.children,r);if(!i){console.error(`PsdElement: layer-name ${r} is not found.`),console.error("layers:",this.psd?.children?.map(a=>a.name));break}this.appendLayerCanvas(i)}this.updateScale()}appendLayerCanvas(t){if(t.children){for(const n of t.children)this.appendLayerCanvas(n);return}t.canvas||(t.canvas=at.createCanvas(t.imageData),t.canvas.dataset.baseLeft=String(t.left),t.canvas.dataset.baseTop=String(t.top),t.canvas.classList.add("psd-canvas")),this.container.appendChild(t.canvas)}renderLoading(){this.clearContent(),this.container.innerHTML+="<p>Loading PSD...</p>"}renderError(t){this.clearContent();const n=t instanceof Error?t.message:"Unknown error";this.container.innerHTML+=`<p style="color:red">Error: ${n}</p>`}clearContent(){this.container.innerHTML=""}updateScale(){if(!this.baseWidth||!this.baseHeight)return;const t=this.clientWidth/this.baseWidth,n=this.clientHeight/this.baseHeight,r=Math.min(t,n);this.container.style.width=`${this.baseWidth*r}px`,this.container.style.height=`${this.baseHeight*r}px`,this.shadow.querySelectorAll("canvas").forEach(i=>{i.style.left=`${Number(i.dataset.baseLeft)*r}px`,i.style.top=`${Number(i.dataset.baseTop)*r}px`,i.style.width=`${i.width*r}px`,i.style.height=`${i.height*r}px`})}static findLayerByName(t,n){for(const r of t){if(r.name===n)return r;if(r.children){const i=this.findLayerByName(r.children,n);if(i)return i}}return null}static createCanvas(t){const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const r=n.getContext("2d");if(!r)throw new Error("Failed to get 2D context");return r.putImageData(t,0,0),n}}customElements.define("psd-viewer",at);class su{static#e=document.createElement("div");static#i;static#n;static#t;static#r;static#s;static#o="say";static#u=()=>{};static#l=[];static init(){this.#f(),this.#d(),this.#h()}static#f(){this.#e.innerHTML=`
            <div id="serif-background"></div>
            <div id="serif-window">
                <div id="serif-icon-container" class="hidden"></div>
                <div id="serif-text-container" class="text-end"></div>
                <span id="serif-Z">[Z]</span>
            </div>
        `,this.#e.id="serif-container",document.body.appendChild(this.#e)}static#d(){this.#i=this.#e.querySelector("#serif-background"),this.#n=this.#e.querySelector("#serif-window"),this.#t=this.#e.querySelector("#serif-icon-container"),this.#r=this.#e.querySelector("#serif-text-container"),this.#s=this.#e.querySelector("#serif-Z")}static#h(){this.#e.addEventListener("click",()=>{this.#o==="say"&&this.#a()}),window.addEventListener("keydown",t=>{["KeyZ","Enter","Space"].includes(t.code)&&this.#o==="say"&&this.#a()})}static ask(t,n){return this.#o="ask",this.#s.classList.add("hidden"),this.#c(),this.#r.innerHTML=t+"<br/>",requestAnimationFrame(()=>{this.#r.classList.add("fade-in")}),new Promise(r=>{n.forEach((i,a)=>{const o=document.createElement("button");o.textContent=i,o.onclick=()=>{this.#e.classList.remove("shown"),r(a)},this.#r.appendChild(o)}),this.#e.classList.add("shown")})}static say(...t){return this.#o="say",this.#s.classList.remove("hidden"),this.#c(),this.#l=t,this.#r.classList.add("text-end"),requestAnimationFrame(()=>{this.#e.classList.add("shown")}),this.#a(),new Promise(n=>{this.#u=n})}static#a(){if(this.#l.length===0){this.#e.classList.remove("shown"),Ce.sleep(400).then(()=>{this.#c()}),this.#u();return}this.#p()}static#p(){const t=this.#l.shift();if(typeof t=="string")this.#r.innerHTML=t,this.#r.classList.remove("fade-in"),requestAnimationFrame(()=>{this.#r.classList.add("fade-in")});else if(t.type==="character")t.icon==="none"?this.#t.classList.add("hidden"):(this.#t.innerHTML=`<img src="${t.icon}" alt="" />`,this.#t.classList.remove("hidden")),this.#a();else if(t.type==="background")this.#i.innerHTML=`<img src="${t.image}" alt="" class="fade-in"/>`,this.#a();else if(t.type==="portrait"){const n=new at({url:`${t.url}`,layers:"normal"});n.classList.add("serif-portrait","hidden"),n.classList.add(t.side??"left"),n.id=t.name,this.#e.appendChild(n),this.#a()}else if(t.type==="portrait-change"){const n=this.#e.querySelector(`#${t.name}`);n.layers=t.layers,n.classList.remove("hidden"),this.#a()}}static#c(){this.#e.style.cursor={say:"pointer",ask:"default"}[this.#o],this.#i.innerHTML="",this.#t.classList.add("hidden"),this.#r.classList.remove("fade-in"),this.#r.classList.remove("text-end"),this.#e.querySelectorAll("psd-viewer").forEach(t=>t.remove())}}document.addEventListener("DOMContentLoaded",async()=>{su.init(),ks.init(),new URLSearchParams(window.location.search).get("delete")==="true"&&Oa.clear();const{SceneTitle:t}=await Cs(async()=>{const{SceneTitle:n}=await import("./assets/SceneTitle.js").then(r=>r.b);return{SceneTitle:n}},[],import.meta.url);Is.init(new t)});window.addEventListener("contextmenu",e=>{e.preventDefault()});export{Ce as A,ks as D,Oa as L,Is as S,Cs as _,su as a};
//# sourceMappingURL=run.js.map
